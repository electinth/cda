import{S as e,i as t,s as n,c as r,u as i,g as a,a as s,t as o,b as l,d as c,e as h,f as u,o as d,h as p,j as f,k as m,l as g,m as y,n as v,p as x,q as _,r as b,v as w,w as M,x as S,y as E,z as T,A as L,B as A,C as P,D as R,E as C,F as I,G as D,H as N,I as $,J as O,K as z,L as B,M as H,N as F,O as U,P as k,Q as G,R as V,T as W,U as j,V as q,W as X,X as Y,Y as Z,Z as J,_ as Q,$ as K,a0 as ee,a1 as te,a2 as ne,a3 as re,a4 as ie,a5 as ae}from"./client.2a488702.js";function se(){}Object.assign(se.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}});const oe=[];for(let e=0;e<256;e++)oe[e]=(e<16?"0":"")+e.toString(16);let le=1234567;const ce={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(oe[255&e]+oe[e>>8&255]+oe[e>>16&255]+oe[e>>24&255]+"-"+oe[255&t]+oe[t>>8&255]+"-"+oe[t>>16&15|64]+oe[t>>24&255]+"-"+oe[63&n|128]+oe[n>>8&255]+"-"+oe[n>>16&255]+oe[n>>24&255]+oe[255&r]+oe[r>>8&255]+oe[r>>16&255]+oe[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},damp:function(e,t,n,r){return ce.lerp(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(ce.euclideanModulo(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(le=e%2147483647),le=16807*le%2147483647,(le-1)/2147483646},degToRad:function(e){return e*ce.DEG2RAD},radToDeg:function(e){return e*ce.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+r)/2),h=s((t+r)/2),u=a((t-r)/2),d=s((t-r)/2),p=a((r-t)/2),f=s((r-t)/2);switch(i){case"XYX":e.set(o*h,l*u,l*d,o*c);break;case"YZY":e.set(l*d,o*h,l*u,o*c);break;case"ZXZ":e.set(l*u,l*d,o*h,o*c);break;case"XZX":e.set(o*h,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*h,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class he{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}he.prototype.isVector2=!0;class ue{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],y=r[1],v=r[4],x=r[7],_=r[2],b=r[5],w=r[8];return i[0]=a*f+s*y+o*_,i[3]=a*m+s*v+o*b,i[6]=a*g+s*x+o*w,i[1]=l*f+c*y+h*_,i[4]=l*m+c*v+h*b,i[7]=l*g+c*x+h*w,i[2]=u*f+d*y+p*_,i[5]=u*m+d*v+p*b,i[8]=u*g+d*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*i*c+n*s*o+r*i*l-r*a*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],h=c*a-s*l,u=s*o-c*i,d=l*i-a*o,p=t*h+n*u+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=h*f,e[1]=(r*l-c*n)*f,e[2]=(s*n-r*a)*f,e[3]=u*f,e[4]=(c*t-r*o)*f,e[5]=(r*i-s*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],s=r[6],o=r[1],l=r[4],c=r[7];return r[0]=t*i+n*o,r[3]=t*a+n*l,r[6]=t*s+n*c,r[1]=-n*i+t*o,r[4]=-n*a+t*l,r[7]=-n*s+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let de;ue.prototype.isMatrix3=!0;const pe={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===de&&(de=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),de.width=e.width,de.height=e.height;const n=de.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=de}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let fe=0;class me extends se{constructor(e=me.DEFAULT_IMAGE,t=me.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,s=1023,o=1009,l=1,c=3e3){super(),Object.defineProperty(this,"id",{value:fe++}),this.uuid=ce.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ue,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=ce.generateUUID()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(ge(r[e].image)):t.push(ge(r[e]))}else t=ge(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ge(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?pe.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}me.DEFAULT_IMAGE=void 0,me.DEFAULT_MAPPING=300,me.prototype.isTexture=!0;class ye{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],h=o[8],u=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-u)<a&&Math.abs(h-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+u)<s&&Math.abs(h+f)<s&&Math.abs(p+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,y=(g+1)/2,v=(c+u)/4,x=(h+f)/4,_=(p+m)/4;return e>o&&e>y?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=v/n,i=x/n):o>y?o<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=v/r,i=_/r):y<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=x/i,r=_/i),this.set(n,r,i,t),this}let y=Math.sqrt((m-p)*(m-p)+(h-f)*(h-f)+(u-c)*(u-c));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(h-f)/y,this.z=(u-c)/y,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}ye.prototype.isVector4=!0;class ve extends se{constructor(e,t,n){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new ye(0,0,e,t),this.scissorTest=!1,this.viewport=new ye(0,0,e,t),n=n||{},this.texture=new me(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ve.prototype.isWebGLRenderTarget=!0;(class extends ve{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}).prototype.isWebGLMultisampleRenderTarget=!0;class xe{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return n.copy(e).slerp(t,r)}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],c=n[r+2],h=n[r+3];const u=i[a+0],d=i[a+1],p=i[a+2],f=i[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=h);if(1===s)return e[t+0]=u,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(h!==f||o!==u||l!==d||c!==p){let e=1-s;const t=o*u+l*d+c*p+h*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*e+u*i,l=l*e+d*i,c=c*e+p*i,h=h*e+f*i,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=e,l*=e,c*=e,h*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],h=i[a],u=i[a+1],d=i[a+2],p=i[a+3];return e[t]=s*p+c*h+o*d-l*u,e[t+1]=o*p+c*u+l*h-s*d,e[t+2]=l*p+c*d+s*u-o*h,e[t+3]=c*p-s*h-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),h=s(i/2),u=o(n/2),d=o(r/2),p=o(i/2);switch(a){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],h=t[10],u=n+s+h;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>s&&n>h){const e=2*Math.sqrt(1+n-s-h);this._w=(c-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(s>h){const e=2*Math.sqrt(1+s-n-h);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+h-n-s);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ce.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+r*l-i*o,this._y=r*c+a*o+i*s-n*l,this._z=i*c+a*l+n*o-r*s,this._w=a*c-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),h=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=a*h+this._w*u,this._x=n*h+this._x*u,this._y=r*h+this._y*u,this._z=i*h+this._z*u,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}xe.prototype.isQuaternion=!0;class _e{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(we.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(we.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*r-s*n,c=o*n+s*t-i*r,h=o*r+i*n-a*t,u=-i*t-a*n-s*r;return this.x=l*o+u*-i+c*-s-h*-a,this.y=c*o+u*-a+h*-i-l*-s,this.z=h*o+u*-s+l*-a-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return be.copy(this).projectOnVector(e),this.sub(be)}reflect(e){return this.sub(be.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ce.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}_e.prototype.isVector3=!0;const be=new _e,we=new xe;class Me{constructor(e=new _e(1/0,1/0,1/0),t=new _e(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],h=e[o+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,n,r),this.max.set(i,a,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),h=e.getZ(o);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,n,r),this.max.set(i,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ee.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new _e),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new _e),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Te.copy(t.boundingBox),Te.applyMatrix4(e.matrixWorld),this.union(Te));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new _e),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ee),Ee.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(De),Ne.subVectors(this.max,De),Le.subVectors(e.a,De),Ae.subVectors(e.b,De),Pe.subVectors(e.c,De),Re.subVectors(Ae,Le),Ce.subVectors(Pe,Ae),Ie.subVectors(Le,Pe);let t=[0,-Re.z,Re.y,0,-Ce.z,Ce.y,0,-Ie.z,Ie.y,Re.z,0,-Re.x,Ce.z,0,-Ce.x,Ie.z,0,-Ie.x,-Re.y,Re.x,0,-Ce.y,Ce.x,0,-Ie.y,Ie.x,0];return!!ze(t,Le,Ae,Pe,Ne)&&(t=[1,0,0,0,1,0,0,0,1],!!ze(t,Le,Ae,Pe,Ne)&&($e.crossVectors(Re,Ce),t=[$e.x,$e.y,$e.z],ze(t,Le,Ae,Pe,Ne)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new _e),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ee.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Ee).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Se[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Se[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Se[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Se[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Se[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Se[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Se[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Se[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Se)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Me.prototype.isBox3=!0;const Se=[new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e],Ee=new _e,Te=new Me,Le=new _e,Ae=new _e,Pe=new _e,Re=new _e,Ce=new _e,Ie=new _e,De=new _e,Ne=new _e,$e=new _e,Oe=new _e;function ze(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){Oe.fromArray(e,a);const s=i.x*Math.abs(Oe.x)+i.y*Math.abs(Oe.y)+i.z*Math.abs(Oe.z),o=t.dot(Oe),l=n.dot(Oe),c=r.dot(Oe);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Be=new Me;class He{constructor(e=new _e,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Be.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new _e),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Me),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Fe=new _e,Ue=new _e,ke=new _e,Ge=new _e,Ve=new _e,We=new _e,je=new _e;class qe{constructor(e=new _e,t=new _e(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new _e),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fe)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new _e),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Fe.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fe.copy(this.direction).multiplyScalar(t).add(this.origin),Fe.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Ue.copy(e).add(t).multiplyScalar(.5),ke.copy(t).sub(e).normalize(),Ge.copy(this.origin).sub(Ue);const i=.5*e.distanceTo(t),a=-this.direction.dot(ke),s=Ge.dot(this.direction),o=-Ge.dot(ke),l=Ge.lengthSq(),c=Math.abs(1-a*a);let h,u,d,p;if(c>0)if(h=a*o-s,u=a*s-o,p=i*c,h>=0)if(u>=-p)if(u<=p){const e=1/c;h*=e,u*=e,d=h*(h+a*u+2*s)+u*(a*h+u+2*o)+l}else u=i,h=Math.max(0,-(a*u+s)),d=-h*h+u*(u+2*o)+l;else u=-i,h=Math.max(0,-(a*u+s)),d=-h*h+u*(u+2*o)+l;else u<=-p?(h=Math.max(0,-(-a*i+s)),u=h>0?-i:Math.min(Math.max(-i,-o),i),d=-h*h+u*(u+2*o)+l):u<=p?(h=0,u=Math.min(Math.max(-i,-o),i),d=u*(u+2*o)+l):(h=Math.max(0,-(a*i+s)),u=h>0?i:Math.min(Math.max(-i,-o),i),d=-h*h+u*(u+2*o)+l);else u=a>0?-i:i,h=Math.max(0,-(a*u+s)),d=-h*h+u*(u+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(ke).multiplyScalar(u).add(Ue),d}intersectSphere(e,t){Fe.subVectors(e.center,this.origin);const n=Fe.dot(this.direction),r=Fe.dot(Fe)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),c>=0?(i=(e.min.y-u.y)*c,a=(e.max.y-u.y)*c):(i=(e.max.y-u.y)*c,a=(e.min.y-u.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),h>=0?(s=(e.min.z-u.z)*h,o=(e.max.z-u.z)*h):(s=(e.max.z-u.z)*h,o=(e.min.z-u.z)*h),n>o||s>r?null:((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Fe)}intersectTriangle(e,t,n,r,i){Ve.subVectors(t,e),We.subVectors(n,e),je.crossVectors(Ve,We);let a,s=this.direction.dot(je);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Ge.subVectors(this.origin,e);const o=a*this.direction.dot(We.crossVectors(Ge,We));if(o<0)return null;const l=a*this.direction.dot(Ve.cross(Ge));if(l<0)return null;if(o+l>s)return null;const c=-a*Ge.dot(je);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Xe{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,a,s,o,l,c,h,u,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Xe).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Ye.setFromMatrixColumn(e,0).length(),i=1/Ye.setFromMatrixColumn(e,1).length(),a=1/Ye.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*h,r=s*c,i=s*h;t[0]=o*c,t[4]=-o*h,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*h,r=l*c,i=l*h;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*h,t[5]=a*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*h,r=l*c,i=l*h;t[0]=e-i*s,t[4]=-a*h,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*c,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*h,r=s*c,i=s*h;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*h,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=i-e*h,t[8]=r*h+n,t[1]=h,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*h+r,t[10]=e-i*h}else if("XZY"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=-h,t[8]=l*c,t[1]=e*h+i,t[5]=a*c,t[9]=n*h-r,t[2]=r*h-n,t[6]=s*c,t[10]=i*h+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Je,e,Qe)}lookAt(e,t,n){const r=this.elements;return tt.subVectors(e,t),0===tt.lengthSq()&&(tt.z=1),tt.normalize(),Ke.crossVectors(n,tt),0===Ke.lengthSq()&&(1===Math.abs(n.z)?tt.x+=1e-4:tt.z+=1e-4,tt.normalize(),Ke.crossVectors(n,tt)),Ke.normalize(),et.crossVectors(tt,Ke),r[0]=Ke.x,r[4]=et.x,r[8]=tt.x,r[1]=Ke.y,r[5]=et.y,r[9]=tt.y,r[2]=Ke.z,r[6]=et.z,r[10]=tt.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],x=n[11],_=n[15],b=r[0],w=r[4],M=r[8],S=r[12],E=r[1],T=r[5],L=r[9],A=r[13],P=r[2],R=r[6],C=r[10],I=r[14],D=r[3],N=r[7],$=r[11],O=r[15];return i[0]=a*b+s*E+o*P+l*D,i[4]=a*w+s*T+o*R+l*N,i[8]=a*M+s*L+o*C+l*$,i[12]=a*S+s*A+o*I+l*O,i[1]=c*b+h*E+u*P+d*D,i[5]=c*w+h*T+u*R+d*N,i[9]=c*M+h*L+u*C+d*$,i[13]=c*S+h*A+u*I+d*O,i[2]=p*b+f*E+m*P+g*D,i[6]=p*w+f*T+m*R+g*N,i[10]=p*M+f*L+m*C+g*$,i[14]=p*S+f*A+m*I+g*O,i[3]=y*b+v*E+x*P+_*D,i[7]=y*w+v*T+x*R+_*N,i[11]=y*M+v*L+x*C+_*$,i[15]=y*S+v*A+x*I+_*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+i*o*h-r*l*h-i*s*u+n*l*u+r*s*d-n*o*d)+e[7]*(+t*o*d-t*l*u+i*a*u-r*a*d+r*l*c-i*o*c)+e[11]*(+t*l*h-t*s*d-i*a*h+n*a*d+i*s*c-n*l*c)+e[15]*(-r*s*c-t*o*h+t*s*u+r*a*h-n*a*u+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],y=h*m*l-f*u*l+f*o*d-s*m*d-h*o*g+s*u*g,v=p*u*l-c*m*l-p*o*d+a*m*d+c*o*g-a*u*g,x=c*f*l-p*h*l+p*s*d-a*f*d-c*s*g+a*h*g,_=p*h*o-c*f*o-p*s*u+a*f*u+c*s*m-a*h*m,b=t*y+n*v+r*x+i*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=y*w,e[1]=(f*u*i-h*m*i-f*r*d+n*m*d+h*r*g-n*u*g)*w,e[2]=(s*m*i-f*o*i+f*r*l-n*m*l-s*r*g+n*o*g)*w,e[3]=(h*o*i-s*u*i-h*r*l+n*u*l+s*r*d-n*o*d)*w,e[4]=v*w,e[5]=(c*m*i-p*u*i+p*r*d-t*m*d-c*r*g+t*u*g)*w,e[6]=(p*o*i-a*m*i-p*r*l+t*m*l+a*r*g-t*o*g)*w,e[7]=(a*u*i-c*o*i+c*r*l-t*u*l-a*r*d+t*o*d)*w,e[8]=x*w,e[9]=(p*h*i-c*f*i-p*n*d+t*f*d+c*n*g-t*h*g)*w,e[10]=(a*f*i-p*s*i+p*n*l-t*f*l-a*n*g+t*s*g)*w,e[11]=(c*s*i-a*h*i-c*n*l+t*h*l+a*n*d-t*s*d)*w,e[12]=_*w,e[13]=(c*f*r-p*h*r+p*n*u-t*f*u-c*n*m+t*h*m)*w,e[14]=(p*s*r-a*f*r-p*n*o+t*f*o+a*n*m-t*s*m)*w,e[15]=(a*h*r-c*s*r+c*n*o-t*h*o-a*n*u+t*s*u)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,c=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*a,0,l*o-r*s,c*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,l=i+i,c=a+a,h=s+s,u=i*l,d=i*c,p=i*h,f=a*c,m=a*h,g=s*h,y=o*l,v=o*c,x=o*h,_=n.x,b=n.y,w=n.z;return r[0]=(1-(f+g))*_,r[1]=(d+x)*_,r[2]=(p-v)*_,r[3]=0,r[4]=(d-x)*b,r[5]=(1-(u+g))*b,r[6]=(m+y)*b,r[7]=0,r[8]=(p+v)*w,r[9]=(m-y)*w,r[10]=(1-(u+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Ye.set(r[0],r[1],r[2]).length();const a=Ye.set(r[4],r[5],r[6]).length(),s=Ye.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ze.copy(this);const o=1/i,l=1/a,c=1/s;return Ze.elements[0]*=o,Ze.elements[1]*=o,Ze.elements[2]*=o,Ze.elements[4]*=l,Ze.elements[5]*=l,Ze.elements[6]*=l,Ze.elements[8]*=c,Ze.elements[9]*=c,Ze.elements[10]*=c,t.setFromRotationMatrix(Ze),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,o=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),h=(n+r)/(n-r),u=-(a+i)/(a-i),d=-2*a*i/(a-i);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,a){const s=this.elements,o=1/(t-e),l=1/(n-r),c=1/(a-i),h=(t+e)*o,u=(n+r)*l,d=(a+i)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Xe.prototype.isMatrix4=!0;const Ye=new _e,Ze=new Xe,Je=new _e(0,0,0),Qe=new _e(1,1,1),Ke=new _e,et=new _e,tt=new _e,nt=new Xe,rt=new xe;class it{constructor(e=0,t=0,n=0,r=it.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=ce.clamp,i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],c=i[5],h=i[9],u=i[2],d=i[6],p=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,a),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return nt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nt,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return rt.setFromEuler(this),this.setFromQuaternion(rt,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new _e(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}it.prototype.isEuler=!0,it.DefaultOrder="XYZ",it.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class at{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let st=0;const ot=new _e,lt=new xe,ct=new Xe,ht=new _e,ut=new _e,dt=new _e,pt=new xe,ft=new _e(1,0,0),mt=new _e(0,1,0),gt=new _e(0,0,1),yt={type:"added"},vt={type:"removed"};function xt(){Object.defineProperty(this,"id",{value:st++}),this.uuid=ce.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xt.DefaultUp.clone();const e=new _e,t=new it,n=new xe,r=new _e(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Xe},normalMatrix:{value:new ue}}),this.matrix=new Xe,this.matrixWorld=new Xe,this.matrixAutoUpdate=xt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}xt.DefaultUp=new _e(0,1,0),xt.DefaultMatrixAutoUpdate=!0,xt.prototype=Object.assign(Object.create(se.prototype),{constructor:xt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return lt.setFromAxisAngle(e,t),this.quaternion.multiply(lt),this},rotateOnWorldAxis:function(e,t){return lt.setFromAxisAngle(e,t),this.quaternion.premultiply(lt),this},rotateX:function(e){return this.rotateOnAxis(ft,e)},rotateY:function(e){return this.rotateOnAxis(mt,e)},rotateZ:function(e){return this.rotateOnAxis(gt,e)},translateOnAxis:function(e,t){return ot.copy(e).applyQuaternion(this.quaternion),this.position.add(ot.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(ft,e)},translateY:function(e){return this.translateOnAxis(mt,e)},translateZ:function(e){return this.translateOnAxis(gt,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(ct.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?ht.copy(e):ht.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ut.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ct.lookAt(ut,ht,this.up):ct.lookAt(ht,ut,this.up),this.quaternion.setFromRotationMatrix(ct),r&&(ct.extractRotation(r.matrixWorld),lt.setFromRotationMatrix(ct),this.quaternion.premultiply(lt.invert()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(yt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vt)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(vt)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),ct.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ct.multiply(e.parent.matrixWorld)),e.applyMatrix4(ct),this.add(e),e.updateWorldMatrix(!1,!0),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new _e),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new xe),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ut,e,dt),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new _e),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ut,pt,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new _e),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const _t=new _e,bt=new _e,wt=new ue;class Mt{constructor(e=new _e(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=_t.subVectors(n,t).cross(bt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new _e),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new _e);const n=e.delta(_t),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new _e),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||wt.getNormalMatrix(e),r=this.coplanarPoint(_t).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Mt.prototype.isPlane=!0;const St=new _e,Et=new _e,Tt=new _e,Lt=new _e,At=new _e,Pt=new _e,Rt=new _e,Ct=new _e,It=new _e,Dt=new _e;class Nt{constructor(e=new _e,t=new _e,n=new _e){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new _e),r.subVectors(n,t),St.subVectors(e,t),r.cross(St);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){St.subVectors(r,t),Et.subVectors(n,t),Tt.subVectors(e,t);const a=St.dot(St),s=St.dot(Et),o=St.dot(Tt),l=Et.dot(Et),c=Et.dot(Tt),h=a*l-s*s;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new _e),0===h)return i.set(-2,-1,-1);const u=1/h,d=(l*o-s*c)*u,p=(a*c-s*o)*u;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Lt),Lt.x>=0&&Lt.y>=0&&Lt.x+Lt.y<=1}static getUV(e,t,n,r,i,a,s,o){return this.getBarycoord(e,t,n,r,Lt),o.set(0,0),o.addScaledVector(i,Lt.x),o.addScaledVector(a,Lt.y),o.addScaledVector(s,Lt.z),o}static isFrontFacing(e,t,n,r){return St.subVectors(n,t),Et.subVectors(e,t),St.cross(Et).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return St.subVectors(this.c,this.b),Et.subVectors(this.a,this.b),.5*St.cross(Et).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new _e),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Nt.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Mt),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Nt.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Nt.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Nt.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Nt.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new _e);const n=this.a,r=this.b,i=this.c;let a,s;At.subVectors(r,n),Pt.subVectors(i,n),Ct.subVectors(e,n);const o=At.dot(Ct),l=Pt.dot(Ct);if(o<=0&&l<=0)return t.copy(n);It.subVectors(e,r);const c=At.dot(It),h=Pt.dot(It);if(c>=0&&h<=c)return t.copy(r);const u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(At,a);Dt.subVectors(e,i);const d=At.dot(Dt),p=Pt.dot(Dt);if(p>=0&&d<=p)return t.copy(i);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(Pt,s);const m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return Rt.subVectors(i,r),s=(h-c)/(h-c+(d-p)),t.copy(r).addScaledVector(Rt,s);const g=1/(m+f+u);return a=f*g,s=u*g,t.copy(n).addScaledVector(At,a).addScaledVector(Pt,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let $t=0;function Ot(){Object.defineProperty(this,"id",{value:$t++}),this.uuid=ce.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Ot.prototype=Object.assign(Object.create(se.prototype),{constructor:Ot,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Ot.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});const zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bt={h:0,s:0,l:0},Ht={h:0,s:0,l:0};function Ft(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ut(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function kt(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Gt{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=ce.euclideanModulo(e,1),t=ce.clamp(t,0,1),n=ce.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Ft(i,r,e+1/3),this.g=Ft(i,r,e),this.b=Ft(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=zt[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Ut(e.r),this.g=Ut(e.g),this.b=Ut(e.b),this}copyLinearToSRGB(e){return this.r=kt(e.r),this.g=kt(e.g),this.b=kt(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),a=Math.min(t,n,r);let s,o;const l=(a+i)/2;if(a===i)s=0,o=0;else{const e=i-a;switch(o=l<=.5?e/(i+a):e/(2-i-a),i){case t:s=(n-r)/e+(n<r?6:0);break;case n:s=(r-t)/e+2;break;case r:s=(t-n)/e+4}s/=6}return e.h=s,e.s=o,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(Bt),Bt.h+=e,Bt.s+=t,Bt.l+=n,this.setHSL(Bt.h,Bt.s,Bt.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Bt),e.getHSL(Ht);const n=ce.lerp(Bt.h,Ht.h,t),r=ce.lerp(Bt.s,Ht.s,t),i=ce.lerp(Bt.l,Ht.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Gt.NAMES=zt,Gt.prototype.isColor=!0,Gt.prototype.r=1,Gt.prototype.g=1,Gt.prototype.b=1;class Vt extends Ot{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this}}Vt.prototype.isMeshBasicMaterial=!0;const Wt=new _e,jt=new he;function qt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Xt(e,t,n){qt.call(this,new Int8Array(e),t,n)}function Yt(e,t,n){qt.call(this,new Uint8Array(e),t,n)}function Zt(e,t,n){qt.call(this,new Uint8ClampedArray(e),t,n)}function Jt(e,t,n){qt.call(this,new Int16Array(e),t,n)}function Qt(e,t,n){qt.call(this,new Uint16Array(e),t,n)}function Kt(e,t,n){qt.call(this,new Int32Array(e),t,n)}function en(e,t,n){qt.call(this,new Uint32Array(e),t,n)}function tn(e,t,n){qt.call(this,new Uint16Array(e),t,n)}function nn(e,t,n){qt.call(this,new Float32Array(e),t,n)}function rn(e,t,n){qt.call(this,new Float64Array(e),t,n)}function an(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(qt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(qt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Gt),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new he),t[n++]=i.x,t[n++]=i.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new _e),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new ye),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)jt.fromBufferAttribute(this,t),jt.applyMatrix3(e),this.setXY(t,jt.x,jt.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Wt.fromBufferAttribute(this,t),Wt.applyMatrix3(e),this.setXYZ(t,Wt.x,Wt.y,Wt.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)Wt.x=this.getX(t),Wt.y=this.getY(t),Wt.z=this.getZ(t),Wt.applyMatrix4(e),this.setXYZ(t,Wt.x,Wt.y,Wt.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)Wt.x=this.getX(t),Wt.y=this.getY(t),Wt.z=this.getZ(t),Wt.applyNormalMatrix(e),this.setXYZ(t,Wt.x,Wt.y,Wt.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)Wt.x=this.getX(t),Wt.y=this.getY(t),Wt.z=this.getZ(t),Wt.transformDirection(e),this.setXYZ(t,Wt.x,Wt.y,Wt.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Xt.prototype=Object.create(qt.prototype),Xt.prototype.constructor=Xt,Yt.prototype=Object.create(qt.prototype),Yt.prototype.constructor=Yt,Zt.prototype=Object.create(qt.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(qt.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(qt.prototype),Qt.prototype.constructor=Qt,Kt.prototype=Object.create(qt.prototype),Kt.prototype.constructor=Kt,en.prototype=Object.create(qt.prototype),en.prototype.constructor=en,tn.prototype=Object.create(qt.prototype),tn.prototype.constructor=tn,tn.prototype.isFloat16BufferAttribute=!0,nn.prototype=Object.create(qt.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(qt.prototype),rn.prototype.constructor=rn;let sn=0;const on=new Xe,ln=new xt,cn=new _e,hn=new Me,un=new Me,dn=new _e;function pn(){Object.defineProperty(this,"id",{value:sn++}),this.uuid=ce.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}pn.prototype=Object.assign(Object.create(se.prototype),{constructor:pn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(an(e)>65535?en:Qt)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new ue).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return on.makeRotationX(e),this.applyMatrix4(on),this},rotateY:function(e){return on.makeRotationY(e),this.applyMatrix4(on),this},rotateZ:function(e){return on.makeRotationZ(e),this.applyMatrix4(on),this},translate:function(e,t,n){return on.makeTranslation(e,t,n),this.applyMatrix4(on),this},scale:function(e,t,n){return on.makeScale(e,t,n),this.applyMatrix4(on),this},lookAt:function(e){return ln.lookAt(e),ln.updateMatrix(),this.applyMatrix4(ln.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(cn).negate(),this.translate(cn.x,cn.y,cn.z),this},setFromPoints:function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new nn(t,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Me);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new _e(-1/0,-1/0,-1/0),new _e(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];hn.setFromBufferAttribute(n),this.morphTargetsRelative?(dn.addVectors(this.boundingBox.min,hn.min),this.boundingBox.expandByPoint(dn),dn.addVectors(this.boundingBox.max,hn.max),this.boundingBox.expandByPoint(dn)):(this.boundingBox.expandByPoint(hn.min),this.boundingBox.expandByPoint(hn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new He);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new _e,1/0);if(e){const n=this.boundingSphere.center;if(hn.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];un.setFromBufferAttribute(n),this.morphTargetsRelative?(dn.addVectors(hn.min,un.min),hn.expandByPoint(dn),dn.addVectors(hn.max,un.max),hn.expandByPoint(dn)):(hn.expandByPoint(un.min),hn.expandByPoint(un.max))}hn.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)dn.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(dn));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)dn.fromBufferAttribute(a,t),s&&(cn.fromBufferAttribute(e,t),dn.add(cn)),r=Math.max(r,n.distanceToSquared(dn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,s=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new qt(new Float32Array(4*s),4));const o=t.tangent.array,l=[],c=[];for(let e=0;e<s;e++)l[e]=new _e,c[e]=new _e;const h=new _e,u=new _e,d=new _e,p=new he,f=new he,m=new he,g=new _e,y=new _e;function v(e,t,n){h.fromArray(r,3*e),u.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),u.sub(h),d.sub(h),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),y.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let e=0,t=x.length;e<t;++e){const t=x[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)v(n[e+0],n[e+1],n[e+2])}const _=new _e,b=new _e,w=new _e,M=new _e;function S(e){w.fromArray(i,3*e),M.copy(w);const t=l[e];_.copy(t),_.sub(w.multiplyScalar(w.dot(t))).normalize(),b.crossVectors(M,t);const n=b.dot(c[e])<0?-1:1;o[4*e]=_.x,o[4*e+1]=_.y,o[4*e+2]=_.z,o[4*e+3]=n}for(let e=0,t=x.length;e<t;++e){const t=x[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new qt(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new _e,i=new _e,a=new _e,s=new _e,o=new _e,l=new _e,c=new _e,h=new _e;if(e)for(let u=0,d=e.count;u<d;u+=3){const d=e.getX(u+0),p=e.getX(u+1),f=e.getX(u+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,i),h.subVectors(r,i),c.cross(h),s.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),h.subVectors(r,i),c.cross(h),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,a=e.attributes[r],s=a.array,o=a.itemSize*t,l=Math.min(s.length,i.length-o);for(let e=0,t=o;e<l;e++,t++)i[t]=s[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)dn.fromBufferAttribute(e,t),dn.normalize(),e.setXYZ(t,dn.x,dn.y,dn.z)},toNonIndexed:function(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let s=0,o=0;for(let e=0,i=t.length;e<i;e++){s=t[e]*r;for(let e=0;e<r;e++)a[o++]=n[s++]}return new qt(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new pn,n=this.index.array,r=this.attributes;for(const i in r){const a=e(r[i],n);t.setAttribute(i,a)}const i=this.morphAttributes;for(const r in i){const a=[],s=i[r];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t],i=r.toJSON(e.data);""!==r.name&&(i.name=r.name),e.data.attributes[t]=i}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t],i=r.toJSON(e.data);""!==r.name&&(i.name=r.name),a.push(i)}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e},clone:function(){return(new pn).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const fn=new Xe,mn=new qe,gn=new He,yn=new _e,vn=new _e,xn=new _e,_n=new _e,bn=new _e,wn=new _e,Mn=new _e,Sn=new _e,En=new _e,Tn=new he,Ln=new he,An=new he,Pn=new _e,Rn=new _e;function Cn(e=new pn,t=new Vt){xt.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}function In(e,t,n,r,i,a,s,o,l,c,h,u){yn.fromBufferAttribute(i,c),vn.fromBufferAttribute(i,h),xn.fromBufferAttribute(i,u);const d=e.morphTargetInfluences;if(t.morphTargets&&a&&d){Mn.set(0,0,0),Sn.set(0,0,0),En.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=d[e],n=a[e];0!==t&&(_n.fromBufferAttribute(n,c),bn.fromBufferAttribute(n,h),wn.fromBufferAttribute(n,u),s?(Mn.addScaledVector(_n,t),Sn.addScaledVector(bn,t),En.addScaledVector(wn,t)):(Mn.addScaledVector(_n.sub(yn),t),Sn.addScaledVector(bn.sub(vn),t),En.addScaledVector(wn.sub(xn),t)))}yn.add(Mn),vn.add(Sn),xn.add(En)}e.isSkinnedMesh&&t.skinning&&(e.boneTransform(c,yn),e.boneTransform(h,vn),e.boneTransform(u,xn));const p=function(e,t,n,r,i,a,s,o){let l;if(l=1===t.side?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,2!==t.side,o),null===l)return null;Rn.copy(o),Rn.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Rn);return c<n.near||c>n.far?null:{distance:c,point:Rn.clone(),object:e}}(e,t,n,r,yn,vn,xn,Pn);if(p){o&&(Tn.fromBufferAttribute(o,c),Ln.fromBufferAttribute(o,h),An.fromBufferAttribute(o,u),p.uv=Nt.getUV(Pn,yn,vn,xn,Tn,Ln,An,new he)),l&&(Tn.fromBufferAttribute(l,c),Ln.fromBufferAttribute(l,h),An.fromBufferAttribute(l,u),p.uv2=Nt.getUV(Pn,yn,vn,xn,Tn,Ln,An,new he));const e={a:c,b:h,c:u,normal:new _e,materialIndex:0};Nt.getNormal(yn,vn,xn,e.normal),p.face=e}return p}Cn.prototype=Object.assign(Object.create(xt.prototype),{constructor:Cn,isMesh:!0,copy:function(e){return xt.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),gn.copy(n.boundingSphere),gn.applyMatrix4(i),!1===e.ray.intersectsSphere(gn))return;if(fn.copy(i).invert(),mn.copy(e.ray).applyMatrix4(fn),null!==n.boundingBox&&!1===mn.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const i=n.index,s=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=u.length;n<p;n++){const p=u[n],f=r[p.materialIndex];for(let n=Math.max(p.start,d.start),r=Math.min(p.start+p.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),u=i.getX(n+1),d=i.getX(n+2);a=In(this,f,e,mn,s,o,l,c,h,r,u,d),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),u=Math.min(i.count,d.start+d.count);n<u;n+=3){const u=i.getX(n),d=i.getX(n+1),p=i.getX(n+2);a=In(this,r,e,mn,s,o,l,c,h,u,d,p),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=u.length;n<i;n++){const i=u[n],p=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3){a=In(this,p,e,mn,s,o,l,c,h,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),i=Math.min(s.count,d.start+d.count);n<i;n+=3){a=In(this,r,e,mn,s,o,l,c,h,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class Dn extends pn{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const s=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const o=[],l=[],c=[],h=[];let u=0,d=0;function p(e,t,n,r,i,a,p,f,m,g,y){const v=a/m,x=p/g,_=a/2,b=p/2,w=f/2,M=m+1,S=g+1;let E=0,T=0;const L=new _e;for(let a=0;a<S;a++){const s=a*x-b;for(let o=0;o<M;o++){const u=o*v-_;L[e]=u*r,L[t]=s*i,L[n]=w,l.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=f>0?1:-1,c.push(L.x,L.y,L.z),h.push(o/m),h.push(1-a/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=u+t+M*e,r=u+t+M*(e+1),i=u+(t+1)+M*(e+1),a=u+(t+1)+M*e;o.push(n,r,a),o.push(r,i,a),T+=6}s.addGroup(d,T,y),d+=T,u+=E}p("z","y","x",-1,-1,n,t,e,a,i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new nn(l,3)),this.setAttribute("normal",new nn(c,3)),this.setAttribute("uv",new nn(h,2))}}function Nn(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function $n(e){const t={};for(let n=0;n<e.length;n++){const r=Nn(e[n]);for(const e in r)t[e]=r[e]}return t}const On={clone:Nn,merge:$n};function zn(e){Ot.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Bn(){xt.call(this),this.type="Camera",this.matrixWorldInverse=new Xe,this.projectionMatrix=new Xe,this.projectionMatrixInverse=new Xe}function Hn(e=50,t=1,n=.1,r=2e3){Bn.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}zn.prototype=Object.create(Ot.prototype),zn.prototype.constructor=zn,zn.prototype.isShaderMaterial=!0,zn.prototype.copy=function(e){return Ot.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Nn(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},zn.prototype.toJSON=function(e){const t=Ot.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},Bn.prototype=Object.assign(Object.create(xt.prototype),{constructor:Bn,isCamera:!0,copy:function(e,t){return xt.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new _e),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){xt.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){xt.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),Hn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Hn,isPerspectiveCamera:!0,copy:function(e,t){return Bn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ce.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*ce.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ce.RAD2DEG*Math.atan(Math.tan(.5*ce.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*ce.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=xt.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});class Fn extends xt{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Hn(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new _e(1,0,0)),this.add(r);const i=new Hn(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new _e(-1,0,0)),this.add(i);const a=new Hn(90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new _e(0,1,0)),this.add(a);const s=new Hn(90,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new _e(0,-1,0)),this.add(s);const o=new Hn(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new _e(0,0,1)),this.add(o);const l=new Hn(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new _e(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,a,s,o,l]=this.children,c=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;const u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=u,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(h),e.xr.enabled=c}}class Un extends me{constructor(e,t,n,r,i,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,a,s=void 0!==s?s:1022,o,l,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Un.prototype.isCubeTexture=!0;class kn extends ve{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Un(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Dn(5,5,5),i=new zn({name:"CubemapFromEquirect",uniforms:Nn(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;const a=new Cn(r,i),s=t.minFilter;1008===t.minFilter&&(t.minFilter=1006);return new Fn(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}kn.prototype.isWebGLCubeRenderTarget=!0;class Gn extends me{constructor(e,t,n,r,i,a,s,o,l,c,h,u){super(null,a,s,o,l,c,r,i,h,u),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Gn.prototype.isDataTexture=!0;const Vn=new He,Wn=new _e;class jn{constructor(e=new Mt,t=new Mt,n=new Mt,r=new Mt,i=new Mt,a=new Mt){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(s-r,h-o,f-u,v-m).normalize(),t[1].setComponents(s+r,h+o,f+u,v+m).normalize(),t[2].setComponents(s+i,h+l,f+d,v+g).normalize(),t[3].setComponents(s-i,h-l,f-d,v-g).normalize(),t[4].setComponents(s-a,h-c,f-p,v-y).normalize(),t[5].setComponents(s+a,h+c,f+p,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Vn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Vn)}intersectsSprite(e){return Vn.center.set(0,0,0),Vn.radius=.7071067811865476,Vn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vn)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Wn.x=r.normal.x>0?e.max.x:e.min.x,Wn.y=r.normal.y>0?e.max.y:e.min.y,Wn.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Wn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function qn(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Xn(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);void 0===a?r.set(t,function(t,r){const i=t.array,a=t.usage,s=e.createBuffer();e.bindBuffer(r,s),e.bufferData(r,i,a),t.onUploadCallback();let o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){const a=r.array,s=r.updateRange;e.bindBuffer(i,t),-1===s.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(a.buffer,t,i),a.version=t.version)}}}class Yn extends pn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,h=e/s,u=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*u-a;for(let n=0;n<l;n++){const r=n*h-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;d.push(n,r,a),d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new nn(p,3)),this.setAttribute("normal",new nn(f,3)),this.setAttribute("uv",new nn(m,2))}}const Zn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Jn={common:{diffuse:{value:new Gt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ue},uv2Transform:{value:new ue},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ue}},sprite:{diffuse:{value:new Gt(15658734)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ue}}},Qn={basic:{uniforms:$n([Jn.common,Jn.specularmap,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.fog]),vertexShader:Zn.meshbasic_vert,fragmentShader:Zn.meshbasic_frag},lambert:{uniforms:$n([Jn.common,Jn.specularmap,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.fog,Jn.lights,{emissive:{value:new Gt(0)}}]),vertexShader:Zn.meshlambert_vert,fragmentShader:Zn.meshlambert_frag},phong:{uniforms:$n([Jn.common,Jn.specularmap,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.fog,Jn.lights,{emissive:{value:new Gt(0)},specular:{value:new Gt(1118481)},shininess:{value:30}}]),vertexShader:Zn.meshphong_vert,fragmentShader:Zn.meshphong_frag},standard:{uniforms:$n([Jn.common,Jn.envmap,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.roughnessmap,Jn.metalnessmap,Jn.fog,Jn.lights,{emissive:{value:new Gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zn.meshphysical_vert,fragmentShader:Zn.meshphysical_frag},toon:{uniforms:$n([Jn.common,Jn.aomap,Jn.lightmap,Jn.emissivemap,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.gradientmap,Jn.fog,Jn.lights,{emissive:{value:new Gt(0)}}]),vertexShader:Zn.meshtoon_vert,fragmentShader:Zn.meshtoon_frag},matcap:{uniforms:$n([Jn.common,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,Jn.fog,{matcap:{value:null}}]),vertexShader:Zn.meshmatcap_vert,fragmentShader:Zn.meshmatcap_frag},points:{uniforms:$n([Jn.points,Jn.fog]),vertexShader:Zn.points_vert,fragmentShader:Zn.points_frag},dashed:{uniforms:$n([Jn.common,Jn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zn.linedashed_vert,fragmentShader:Zn.linedashed_frag},depth:{uniforms:$n([Jn.common,Jn.displacementmap]),vertexShader:Zn.depth_vert,fragmentShader:Zn.depth_frag},normal:{uniforms:$n([Jn.common,Jn.bumpmap,Jn.normalmap,Jn.displacementmap,{opacity:{value:1}}]),vertexShader:Zn.normal_vert,fragmentShader:Zn.normal_frag},sprite:{uniforms:$n([Jn.sprite,Jn.fog]),vertexShader:Zn.sprite_vert,fragmentShader:Zn.sprite_frag},background:{uniforms:{uvTransform:{value:new ue},t2D:{value:null}},vertexShader:Zn.background_vert,fragmentShader:Zn.background_frag},cube:{uniforms:$n([Jn.envmap,{opacity:{value:1}}]),vertexShader:Zn.cube_vert,fragmentShader:Zn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zn.equirect_vert,fragmentShader:Zn.equirect_frag},distanceRGBA:{uniforms:$n([Jn.common,Jn.displacementmap,{referencePosition:{value:new _e},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zn.distanceRGBA_vert,fragmentShader:Zn.distanceRGBA_frag},shadow:{uniforms:$n([Jn.lights,Jn.fog,{color:{value:new Gt(0)},opacity:{value:1}}]),vertexShader:Zn.shadow_vert,fragmentShader:Zn.shadow_frag}};function Kn(e,t,n,r,i){const a=new Gt(0);let s,o,l=0,c=null,h=0,u=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),l=t,d(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(a,l)},render:function(n,i,p,f){let m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=t.get(m));const g=e.xr,y=g.getSession&&g.getSession();y&&"additive"===y.environmentBlendMode&&(m=null),null===m?d(a,l):m&&m.isColor&&(d(m,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||306===m.mapping)?(void 0===o&&(o=new Cn(new Dn(1,1,1),new zn({name:"BackgroundCubeMaterial",uniforms:Nn(Qn.cube.uniforms),vertexShader:Qn.cube.vertexShader,fragmentShader:Qn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),m.isWebGLCubeRenderTarget&&(m=m.texture),o.material.uniforms.envMap.value=m,o.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,c===m&&h===m.version&&u===e.toneMapping||(o.material.needsUpdate=!0,c=m,h=m.version,u=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):m&&m.isTexture&&(void 0===s&&(s=new Cn(new Yn(2,2),new zn({name:"BackgroundMaterial",uniforms:Nn(Qn.background.uniforms),vertexShader:Qn.background.vertexShader,fragmentShader:Qn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),c===m&&h===m.version&&u===e.toneMapping||(s.material.needsUpdate=!0,c=m,h=m.version,u=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function er(e,t,n,r){const i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=d(null);let c=l;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function u(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,i){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i}}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,s,o){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,s,o):e.vertexAttribIPointer(t,n,i,s,o)}function v(){x(),c!==l&&(c=l,h(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,u,v,x){let _=!1;if(s){const t=function(t,n,i){const s=!0===i.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let h=c[s];void 0===h&&(h=d(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=h);return h}(v,u,l);c!==t&&(c=t,h(c.object)),_=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],a=r[e];if(void 0===t)return!0;if(t.attribute!==a)return!0;if(t.data!==a.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(v,x),_&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],a={};a.attribute=t,t.data&&(a.data=t.data),n[e]=a,i++}c.attributes=n,c.attributesNum=i,c.index=t}(v,x)}else{const e=!0===l.wireframe;c.geometry===v.id&&c.program===u.id&&c.wireframe===e||(c.geometry=v.id,c.program=u.id,c.wireframe=e,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==x&&n.update(x,34963),_&&(!function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),h=a.defaultAttributeValues;for(const t in c){const r=c[t];if(r>=0){const a=l[t];if(void 0!==a){const t=a.normalized,i=a.itemSize,s=n.get(a);if(void 0===s)continue;const l=s.buffer,c=s.type,h=s.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,s=n.stride,u=a.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)):f(r),e.bindBuffer(34962,l),y(r,i,c,t,s*h,u*h)}else a.isInstancedBufferAttribute?(m(r,a.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)):f(r),e.bindBuffer(34962,l),y(r,i,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const a=t.buffer,s=t.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),e.bindBuffer(34962,a),e.vertexAttribPointer(r+0,4,s,!1,64,0),e.vertexAttribPointer(r+1,4,s,!1,64,16),e.vertexAttribPointer(r+2,4,s,!1,64,32),e.vertexAttribPointer(r+3,4,s,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const a=t.buffer,s=t.type;m(r,1),e.bindBuffer(34962,a),e.vertexAttribPointer(r,3,s,!1,12,0)}else if(void 0!==h){const n=h[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}g()}(i,l,u,v),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:v,resetDefaultState:x,dispose:function(){v();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)u(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)u(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)u(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function tr(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,s,o){if(0===o)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,s,o),n.update(s,a,o)}}function nr(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),u=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,v=a||t.has("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:y&&v,maxSamples:a?e.getParameter(36183):0}}function rr(e){const t=this;let n=null,r=0,i=!1,a=!1;const s=new Mt,o=new ue,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function h(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(i,o),s.normal.toArray(c,n),c[n+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const s=0!==e.length||t||0!==r||i;return i=t,n=h(e,a,0),r=e.length,s},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,s,o){const u=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===u||0===u.length||a&&!p)a?h(null):c();else{const e=a?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=h(u,s,t,o);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function ir(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping;if(303===a||304===a){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=e.getRenderTarget(),o=new kn(a.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),e.setRenderTarget(s),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function ar(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function sr(e,t,n,r){const i={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete i[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const o=new(an(n)>65535?en:Qt)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function or(e,t,n,r){const i=r.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,s,t*o),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let h,u;if(i)h=e,u="drawElementsInstanced";else if(h=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](a,l,s,r*o,c),n.update(l,a,c)}}function lr(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function cr(e,t){return e[0]-t[0]}function hr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ur(e){const t={},n=new Float32Array(8),r=[];for(let e=0;e<8;e++)r[e]=[e,0];return{update:function(i,a,s,o){const l=i.morphTargetInfluences,c=void 0===l?0:l.length;let h=t[a.id];if(void 0===h){h=[];for(let e=0;e<c;e++)h[e]=[e,0];t[a.id]=h}for(let e=0;e<c;e++){const t=h[e];t[0]=e,t[1]=l[e]}h.sort(hr);for(let e=0;e<8;e++)e<c&&h[e][1]?(r[e][0]=h[e][0],r[e][1]=h[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(cr);const u=s.morphTargets&&a.morphAttributes.position,d=s.morphNormals&&a.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],s=t[1];i!==Number.MAX_SAFE_INTEGER&&s?(u&&a.getAttribute("morphTarget"+e)!==u[i]&&a.setAttribute("morphTarget"+e,u[i]),d&&a.getAttribute("morphNormal"+e)!==d[i]&&a.setAttribute("morphNormal"+e,d[i]),n[e]=s,p+=s):(u&&!0===a.hasAttribute("morphTarget"+e)&&a.deleteAttribute("morphTarget"+e),d&&!0===a.hasAttribute("morphNormal"+e)&&a.deleteAttribute("morphNormal"+e),n[e]=0)}const f=a.morphTargetsRelative?1:1-p;o.getUniforms().setValue(e,"morphTargetBaseInfluence",f),o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function dr(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const s=r.render.frame,o=e.geometry,l=t.get(e,o);return i.get(l)!==s&&(t.update(l),i.set(l,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}Qn.physical={uniforms:$n([Qn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new he(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Gt(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Zn.meshphysical_vert,fragmentShader:Zn.meshphysical_frag};class pr extends me{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}pr.prototype.isDataTexture2DArray=!0;class fr extends me{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}fr.prototype.isDataTexture3D=!0;const mr=new me,gr=new pr,yr=new fr,vr=new Un,xr=[],_r=[],br=new Float32Array(16),wr=new Float32Array(9),Mr=new Float32Array(4);function Sr(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=xr[i];if(void 0===a&&(a=new Float32Array(i),xr[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Er(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Tr(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Lr(e,t){let n=_r[t];void 0===n&&(n=new Int32Array(t),_r[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ar(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Pr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Er(n,t))return;e.uniform2fv(this.addr,t),Tr(n,t)}}function Rr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Er(n,t))return;e.uniform3fv(this.addr,t),Tr(n,t)}}function Cr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Er(n,t))return;e.uniform4fv(this.addr,t),Tr(n,t)}}function Ir(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Er(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Tr(n,t)}else{if(Er(n,r))return;Mr.set(r),e.uniformMatrix2fv(this.addr,!1,Mr),Tr(n,r)}}function Dr(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Er(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Tr(n,t)}else{if(Er(n,r))return;wr.set(r),e.uniformMatrix3fv(this.addr,!1,wr),Tr(n,r)}}function Nr(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Er(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Tr(n,t)}else{if(Er(n,r))return;br.set(r),e.uniformMatrix4fv(this.addr,!1,br),Tr(n,r)}}function $r(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||mr,i)}function Or(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||gr,i)}function zr(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||yr,i)}function Br(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||vr,i)}function Hr(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Fr(e,t){const n=this.cache;Er(n,t)||(e.uniform2iv(this.addr,t),Tr(n,t))}function Ur(e,t){const n=this.cache;Er(n,t)||(e.uniform3iv(this.addr,t),Tr(n,t))}function kr(e,t){const n=this.cache;Er(n,t)||(e.uniform4iv(this.addr,t),Tr(n,t))}function Gr(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Vr(e,t){e.uniform1fv(this.addr,t)}function Wr(e,t){e.uniform1iv(this.addr,t)}function jr(e,t){e.uniform2iv(this.addr,t)}function qr(e,t){e.uniform3iv(this.addr,t)}function Xr(e,t){e.uniform4iv(this.addr,t)}function Yr(e,t){const n=Sr(t,this.size,2);e.uniform2fv(this.addr,n)}function Zr(e,t){const n=Sr(t,this.size,3);e.uniform3fv(this.addr,n)}function Jr(e,t){const n=Sr(t,this.size,4);e.uniform4fv(this.addr,n)}function Qr(e,t){const n=Sr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Kr(e,t){const n=Sr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ei(e,t){const n=Sr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ti(e,t,n){const r=t.length,i=Lr(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||mr,i[e])}function ni(e,t,n){const r=t.length,i=Lr(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||vr,i[e])}function ri(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ar;case 35664:return Pr;case 35665:return Rr;case 35666:return Cr;case 35674:return Ir;case 35675:return Dr;case 35676:return Nr;case 5124:case 35670:return Hr;case 35667:case 35671:return Fr;case 35668:case 35672:return Ur;case 35669:case 35673:return kr;case 5125:return Gr;case 35678:case 36198:case 36298:case 36306:case 35682:return $r;case 35679:case 36299:case 36307:return zr;case 35680:case 36300:case 36308:case 36293:return Br;case 36289:case 36303:case 36311:case 36292:return Or}}(t.type)}function ii(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Vr;case 35664:return Yr;case 35665:return Zr;case 35666:return Jr;case 35674:return Qr;case 35675:return Kr;case 35676:return ei;case 5124:case 35670:return Wr;case 35667:case 35671:return jr;case 35668:case 35672:return qr;case 35669:case 35673:return Xr;case 35678:case 36198:case 36298:case 36306:case 35682:return ti;case 35680:case 36300:case 36308:case 36293:return ni}}(t.type)}function ai(e){this.id=e,this.seq=[],this.map={}}ii.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Tr(t,e)},ai.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}};const si=/(\w+)(\])?(\[|\.)?/g;function oi(e,t){e.seq.push(t),e.map[t.id]=t}function li(e,t,n){const r=e.name,i=r.length;for(si.lastIndex=0;;){const a=si.exec(r),s=si.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===i){oi(n,void 0===c?new ri(o,e,t):new ii(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new ai(o),oi(n,e)),n=e}}}function ci(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);li(n,e.getUniformLocation(t,n.name),this)}}function hi(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}ci.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},ci.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},ci.upload=function(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},ci.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let ui=0;function di(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function pi(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function fi(e,t){const n=di(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function mi(e,t){const n=di(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function gi(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function yi(e){return""!==e}function vi(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function xi(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const _i=/^[ \t]*#include +<([\w\d./]+)>/gm;function bi(e){return e.replace(_i,wi)}function wi(e,t){const n=Zn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return bi(n)}const Mi=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Si=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ei(e){return e.replace(Si,Li).replace(Mi,Ti)}function Ti(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Li(e,t,n,r)}function Li(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Ai(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Pi(e,t,n,r){const i=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(yi).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(yi).join("\n"),g.length>0&&(g+="\n"),y=[p,f].filter(yi).join("\n"),y.length>0&&(y+="\n")):(g=[Ai(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yi).join("\n"),y=[p,Ai(n),"#define SHADER_NAME "+n.shaderName,f,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Zn.tonemapping_pars_fragment:"",0!==n.toneMapping?gi("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Zn.encodings_pars_fragment,n.map?fi("mapTexelToLinear",n.mapEncoding):"",n.matcap?fi("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?fi("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?fi("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?fi("lightMapTexelToLinear",n.lightMapEncoding):"",mi("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(yi).join("\n")),s=bi(s),s=vi(s,n),s=xi(s,n),o=bi(o),o=vi(o,n),o=xi(o,n),s=Ei(s),o=Ei(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const x=v+y+o,_=hi(i,35633,v+g+s),b=hi(i,35632,x);if(i.attachShader(m,_),i.attachShader(m,b),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(b).trim();let r=!0,a=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=pi(i,_,"vertex"),n=pi(i,b,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:y}})}let w,M;return i.deleteShader(_),i.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new ci(i,m)),w},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,m)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=ui++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=b,this}function Ri(e,t,n,r,i,a){const s=[],o=r.isWebGL2,l=r.logarithmicDepthBuffer,c=r.floatVertexTextures,h=r.maxVertexUniforms,u=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,t}return{getParameters:function(i,s,f,g,y){const v=g.fog,x=i.isMeshStandardMaterial?g.environment:null,_=t.get(i.envMap||x),b=p[i.type],w=y.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=h,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(y):0;let M,S;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),b){const e=Qn[b];M=e.vertexShader,S=e.fragmentShader}else M=i.vertexShader,S=i.fragmentShader;const E=e.getRenderTarget();return{isWebGL2:o,shaderID:b,shaderName:i.type,vertexShader:M,fragmentShader:S,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:u,outputEncoding:null!==E?m(E.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:m(_),envMapCubeUV:!!_&&(306===_.mapping||307===_.mapping),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!v,useFog:i.fog,fogExp2:v&&v.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:l,skinning:i.skinning&&w>0,maxBones:w,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<f.length;e++)n.push(t[f[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=Qn[t];n=On.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Pi(e,n,t,i),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Ci(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Ii(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Di(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ni(e){const t=[];let n=0;const r=[],i=[],a={id:-1};function s(r,i,s,o,l,c){let h=t[n];const u=e.get(s);return void 0===h?(h={id:r.id,object:r,geometry:i,material:s,program:u.program||a,groupOrder:o,renderOrder:r.renderOrder,z:l,group:c},t[n]=h):(h.id=r.id,h.object=r,h.geometry=i,h.material=s,h.program=u.program||a,h.groupOrder=o,h.renderOrder=r.renderOrder,h.z=l,h.group=c),n++,h}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(e,t,n,a,o,l){const c=s(e,t,n,a,o,l);(!0===n.transparent?i:r).push(c)},unshift:function(e,t,n,a,o,l){const c=s(e,t,n,a,o,l);(!0===n.transparent?i:r).unshift(c)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Ii),i.length>1&&i.sort(t||Di)}}}function $i(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new Ni(e),t.set(n,[i])):r>=t.get(n).length?(i=new Ni(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function Oi(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new _e,color:new Gt};break;case"SpotLight":n={position:new _e,direction:new _e,color:new Gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new _e,color:new Gt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new _e,skyColor:new Gt,groundColor:new Gt};break;case"RectAreaLight":n={color:new Gt,position:new _e,halfWidth:new _e,halfHeight:new _e}}return e[t.id]=n,n}}}let zi=0;function Bi(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Hi(e,t){const n=new Oi,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new _e);const a=new _e,s=new Xe,o=new Xe;return{setup:function(a){let s=0,o=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,h=0,u=0,d=0,p=0,f=0,m=0,g=0;a.sort(Bi);for(let e=0,t=a.length;e<t;e++){const t=a[e],y=t.color,v=t.intensity,x=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=y.r*v,o+=y.g*v,l+=y.b*v;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],v);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=_,i.directionalShadowMatrix[c]=t.shadow.matrix,f++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(y).multiplyScalar(v),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[u]=n,i.spotShadowMap[u]=_,i.spotShadowMatrix[u]=t.shadow.matrix,g++}i.spot[u]=e,u++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(y).multiplyScalar(v),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=_,i.pointShadowMatrix[h]=t.shadow.matrix,m++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(v),e.groundColor.copy(t.groundColor).multiplyScalar(v),i.hemi[p]=e,p++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Jn.LTC_FLOAT_1,i.rectAreaLTC2=Jn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Jn.LTC_HALF_1,i.rectAreaLTC2=Jn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=o,i.ambient[2]=l;const y=i.hash;y.directionalLength===c&&y.pointLength===h&&y.spotLength===u&&y.rectAreaLength===d&&y.hemiLength===p&&y.numDirectionalShadows===f&&y.numPointShadows===m&&y.numSpotShadows===g||(i.directional.length=c,i.spot.length=u,i.rectArea.length=d,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,y.directionalLength=c,y.pointLength=h,y.spotLength=u,y.rectAreaLength=d,y.hemiLength=p,y.numDirectionalShadows=f,y.numPointShadows=m,y.numSpotShadows=g,i.version=zi++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,h=0;const u=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(u),n++}else if(d.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(u),l++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(u),o.identity(),s.copy(d.matrixWorld),s.premultiply(u),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(u),r++}else if(d.isHemisphereLight){const e=i.hemi[h];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(u),e.direction.normalize(),h++}}},state:i}}function Fi(e,t){const n=new Hi(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Ui(e,t){let n=new WeakMap;return{get:function(r,i=0){let a;return!1===n.has(r)?(a=new Fi(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new Fi(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}class ki extends Ot{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}ki.prototype.isMeshDepthMaterial=!0;class Gi extends Ot{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new _e,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Gi.prototype.isMeshDistanceMaterial=!0;function Vi(e,t,n){let r=new jn;const i=new he,a=new he,s=new ye,o=[],l=[],c={},h={0:1,1:0,2:2},u=new zn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=u.clone();d.defines.HORIZONTAL_PASS=1;const p=new pn;p.setAttribute("position",new qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Cn(p,u),m=this;function g(n,r){const i=t.update(f);u.uniforms.shadow_pass.value=n.map.texture,u.uniforms.resolution.value=n.mapSize,u.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,u,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,f,null)}function y(e,t,n){const r=e<<0|t<<1|n<<2;let i=o[r];return void 0===i&&(i=new ki({depthPacking:3201,morphTargets:e,skinning:t}),o[r]=i),i}function v(e,t,n){const r=e<<0|t<<1|n<<2;let i=l[r];return void 0===i&&(i=new Gi({morphTargets:e,skinning:t}),l[r]=i),i}function x(t,n,r,i,a,s,o){let l=null,u=y,d=t.customDepthMaterial;if(!0===i.isPointLight&&(u=v,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));l=u(e,i,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=l.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=l.clone(),n[t]=i),l=i}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=3===o?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=a,l.farDistance=s),l}function _(n,i,a,s,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],h=i[c.materialIndex];if(h&&h.visible){const t=x(n,r,h,s,a.near,a.far,o);e.renderBufferDirect(a,null,r,t,n,c)}}}else if(i.visible){const t=x(n,r,i,s,a.near,a.far,o);e.renderBufferDirect(a,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)_(l[e],i,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,o,l){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),h=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let c=0,h=t.length;c<h;c++){const h=t[c],u=h.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const p=u.getFrameExtents();if(i.multiply(p),a.copy(u.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(a.x=Math.floor(n/p.x),i.x=a.x*p.x,u.mapSize.x=a.x),i.y>n&&(a.y=Math.floor(n/p.y),i.y=a.y*p.y,u.mapSize.y=a.y)),null===u.map&&!u.isPointLightShadow&&3===this.type){const e={minFilter:1006,magFilter:1006,format:1023};u.map=new ve(i.x,i.y,e),u.map.texture.name=h.name+".shadowMap",u.mapPass=new ve(i.x,i.y,e),u.camera.updateProjectionMatrix()}if(null===u.map){const e={minFilter:1003,magFilter:1003,format:1023};u.map=new ve(i.x,i.y,e),u.map.texture.name=h.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const f=u.getViewportCount();for(let e=0;e<f;e++){const t=u.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(s),u.updateMatrices(h,e),r=u.getFrustum(),_(o,l,u.camera,h,this.type)}u.isPointLightShadow||3!==this.type||g(u,l),u.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(c,h,u)}}function Wi(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new ye;let r=null;const i=new ye(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?D(2929):N(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?D(2960):N(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&a===s||(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){s===t&&o===n&&l===r||(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null}}};let o={},l=null,c=!1,h=null,u=null,d=null,p=null,f=null,m=null,g=null,y=!1,v=null,x=null,_=null,b=null,w=null;const M=e.getParameter(35661);let S=!1,E=0;const T=e.getParameter(7938);-1!==T.indexOf("WebGL")?(E=parseFloat(/^WebGL (\d)/.exec(T)[1]),S=E>=1):-1!==T.indexOf("OpenGL ES")&&(E=parseFloat(/^OpenGL ES (\d)/.exec(T)[1]),S=E>=2);let L=null,A={};const P=new ye,R=new ye;function C(t,n,r){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return a}const I={};function D(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function N(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}I[3553]=C(3553,3553,1),I[34067]=C(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),D(2929),a.setFunc(3),B(!1),H(1),D(2884),z(0);const $={100:32774,101:32778,102:32779};if(r)$[103]=32775,$[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&($[103]=e.MIN_EXT,$[104]=e.MAX_EXT)}const O={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function z(t,n,r,i,a,s,o,l){if(0!==t){if(!1===c&&(D(3042),c=!0),5===t)a=a||n,s=s||r,o=o||i,n===u&&a===f||(e.blendEquationSeparate($[n],$[a]),u=n,f=a),r===d&&i===p&&s===m&&o===g||(e.blendFuncSeparate(O[r],O[i],O[s],O[o]),d=r,p=i,m=s,g=o),h=t,y=null;else if(t!==h||l!==y){if(100===u&&100===f||(e.blendEquation(32774),u=100,f=100),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}d=null,p=null,m=null,g=null,h=t,y=l}}else!0===c&&(N(3042),c=!1)}function B(t){v!==t&&(t?e.frontFace(2304):e.frontFace(2305),v=t)}function H(t){0!==t?(D(2884),t!==x&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):N(2884),x=t}function F(t,n,r){t?(D(32823),b===n&&w===r||(e.polygonOffset(n,r),b=n,w=r)):N(32823)}function U(t){void 0===t&&(t=33984+M-1),L!==t&&(e.activeTexture(t),L=t)}return{buffers:{color:i,depth:a,stencil:s},enable:D,disable:N,useProgram:function(t){return l!==t&&(e.useProgram(t),l=t,!0)},setBlending:z,setMaterial:function(e,t){2===e.side?N(2884):D(2884);let n=1===e.side;t&&(n=!n),B(n),1===e.blending&&!1===e.transparent?z(0):z(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;s.setTest(r),r&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),F(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:B,setCullFace:H,setLineWidth:function(t){t!==_&&(S&&e.lineWidth(t),_=t)},setPolygonOffset:F,setScissorTest:function(e){e?D(3089):N(3089)},activeTexture:U,bindTexture:function(t,n){null===L&&U();let r=A[L];void 0===r&&(r={type:void 0,texture:void 0},A[L]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||I[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=A[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===P.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),P.copy(t))},viewport:function(t){!1===R.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},L=null,A={},l=null,c=!1,h=null,u=null,d=null,p=null,f=null,m=null,g=null,y=!1,v=null,x=null,_=null,b=null,w=null,i.reset(),a.reset(),s.reset()}}}function ji(e,t,n,r,i,a,s){const o=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,u=i.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?ce.floorPowerOfTwo:Math.floor,a=r(i*e.width),s=r(i*e.height);void 0===p&&(p=m(a,s));const o=n?m(a,s):p;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return ce.isPowerOfTwo(e.width)&&ce.isPowerOfTwo(e.height)}function v(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function x(t,n,i,a){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,a))}function _(n,r,i){if(!1===o)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function b(e){return 1003===e||1004===e||1005===e?9728:9729}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&d.delete(n),s.memory.textures--}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,i=r.get(t),a=r.get(n);if(!t)return;void 0!==a.__webglTexture&&e.deleteTexture(a.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);r.remove(n),r.remove(t)}(n),s.memory.textures--}let S=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void C(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function T(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const s=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=s||l?l?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,c);const u=h[0],d=y(u)||o,p=a.convert(r.format),f=a.convert(r.type),m=_(r.internalFormat,p,f);let b;if(P(34067,r,d),s){for(let e=0;e<6;e++){b=h[e].mipmaps;for(let t=0;t<b.length;t++){const i=b[t];1023!==r.format&&1022!==r.format?null!==p?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,p,f,i.data)}}t.__maxMipLevel=b.length-1}else{b=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,h[e].width,h[e].height,0,p,f,h[e].data);for(let t=0;t<b.length;t++){const r=b[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,p,f,r.data)}}else{n.texImage2D(34069+e,0,m,p,f,h[e]);for(let t=0;t<b.length;t++){const r=b[t];n.texImage2D(34069+e,t+1,m,p,f,r.image[e])}}t.__maxMipLevel=b.length}v(r,d)&&x(34067,r,u.width,u.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(s,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture))}const L={1e3:10497,1001:33071,1002:33648},A={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function P(n,a,s){if(s?(e.texParameteri(n,10242,L[a.wrapS]),e.texParameteri(n,10243,L[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,L[a.wrapR]),e.texParameteri(n,10240,A[a.magFilter]),e.texParameteri(n,10241,A[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,b(a.magFilter)),e.texParameteri(n,10241,b(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(1015===a.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&1016===a.type&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),s.memory.textures++)}function C(t,r,i){let s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!o&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===y(r.image),c=g(r.image,l,!1,h),u=y(c)||o,d=a.convert(r.format);let p,f=a.convert(r.type),m=_(r.internalFormat,d,f);P(s,r,u);const b=r.mipmaps;if(r.isDepthTexture)m=6402,o?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,f=a.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,f=a.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(r.isDataTexture)if(b.length>0&&u){for(let e=0,t=b.length;e<t;e++)p=b[e],n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=b.length;e<t;e++)p=b[e],1023!==r.format&&1022!==r.format?null!==d?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);t.__maxMipLevel=b.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(b.length>0&&u){for(let e=0,t=b.length;e<t;e++)p=b[e],n.texImage2D(3553,e,m,d,f,p);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,m,d,f,c),t.__maxMipLevel=0;v(r,u)&&x(s,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function I(t,i,s,o){const l=i.texture,c=a.convert(l.format),h=a.convert(l.type),u=_(l.internalFormat,c,h);32879===o||35866===o?n.texImage3D(o,0,u,i.width,i.height,i.depth,0,c,h,null):n.texImage2D(o,0,u,i.width,i.height,0,c,h,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,o,r.get(l).__webglTexture,0),e.bindFramebuffer(36160,null)}function D(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(1015===t.type?i=36012:1014===t.type&&(i=33190));const r=$(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=$(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=n.texture,i=a.convert(t.format),s=a.convert(t.type),o=_(t.internalFormat,i,s);if(r){const t=$(n);e.renderbufferStorageMultisample(36161,t,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){const n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);const i=r.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)e.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),D(n.__webglDepthbuffer[r],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),D(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function $(e){return o&&e.isWebGLMultisampleRenderTarget?Math.min(u,e.samples):0}let O=!1,z=!1;this.allocateTextureUnit=function(){const e=S;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?C(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?C(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=T,this.setupRenderTarget=function(t){const i=t.texture,l=r.get(t),c=r.get(i);t.addEventListener("dispose",M),c.__webglTexture=e.createTexture(),s.memory.textures++;const h=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,d=i.isDataTexture3D||i.isDataTexture2DArray,p=y(t)||o;if(!o||1022!==i.format||1015!==i.type&&1016!==i.type||(i.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),u)if(o){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const n=a.convert(i.format),r=a.convert(i.type),s=_(i.internalFormat,n,r),o=$(t);e.renderbufferStorageMultisample(36161,o,s,t.width,t.height),e.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),D(l.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),P(34067,i,p);for(let e=0;e<6;e++)I(l.__webglFramebuffer[e],t,36064,34069+e);v(i,p)&&x(34067,i,t.width,t.height),n.bindTexture(34067,null)}else{let e=3553;if(d)if(o){e=i.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,c.__webglTexture),P(e,i,p),I(l.__webglFramebuffer,t,36064,e),v(i,p)&&x(3553,i,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(v(t,y(e)||o)){const i=e.isWebGLCubeRenderTarget?34067:3553,a=r.get(t).__webglTexture;n.bindTexture(i,a),x(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(o){const n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const i=t.width,a=t.height;let s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,i,a,0,0,i,a,s,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),O=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),T(e,t)}}function qi(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):1020===e?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Xi(e=[]){Hn.call(this),this.cameras=e}Xi.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Xi,isArrayCamera:!0});class Yi extends xt{constructor(){super(),this.type="Group"}}function Zi(){this._targetRay=null,this._grip=null,this._hand=null}function Ji(e,t){const n=this;let r=null,i=1,a=null,s="local-floor",o=null;const l=[],c=new Map,h=new Hn;h.layers.enable(1),h.viewport=new ye;const u=new Hn;u.layers.enable(2),u.viewport=new ye;const d=[h,u],p=new Xi;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function y(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),f=null,m=null,e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),M.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(e){const t=r.inputSources;for(let e=0;e<l.length;e++)c.set(t[e],l[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=c.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),c.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=c.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new Zi,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new Zi,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new Zi,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",y),r.addEventListener("inputsourceschange",v);const e=t.getContextAttributes();!0!==e.xrCompatible&&await t.makeXRCompatible();const o={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:i},l=new XRWebGLLayer(r,t,o);r.updateRenderState({baseLayer:l}),a=await r.requestReferenceSpace(s),M.setContext(r),M.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const x=new _e,_=new _e;function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.getCamera=function(e){p.near=u.near=h.near=e.near,p.far=u.far=h.far=e.far,f===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const t=e.parent,n=p.cameras;b(p,t);for(let e=0;e<n.length;e++)b(n[e],t);e.matrixWorld.copy(p.matrixWorld),e.matrix.copy(p.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){x.setFromMatrixPosition(t.matrixWorld),_.setFromMatrixPosition(n.matrixWorld);const r=x.distanceTo(_),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],h=(i[8]-1)/i[0],u=(a[8]+1)/a[0],d=s*h,p=s*u,f=r/(-h+u),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,y=o+f,v=d-m,b=p+(r-m),w=l*o/y*g,M=c*o/y*g;e.projectionMatrix.makePerspective(v,b,w,M,g,y)}(p,h,u):p.projectionMatrix.copy(h.projectionMatrix),p};let w=null;const M=new qn;M.setAnimationLoop((function(t,n){if(o=n.getViewerPose(a),null!==o){const t=o.views,n=r.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let i=!1;t.length!==p.cameras.length&&(p.cameras.length=0,i=!0);for(let e=0;e<t.length;e++){const r=t[e],a=n.getViewport(r),s=d[e];s.matrix.fromArray(r.transform.matrix),s.projectionMatrix.fromArray(r.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===e&&p.matrix.copy(s.matrix),!0===i&&p.cameras.push(s)}}const i=r.inputSources;for(let e=0;e<l.length;e++){const t=l[e],r=i[e];t.update(r,n,a)}w&&w(t,n)})),this.setAnimationLoop=function(e){w=e},this.dispose=function(){}}function Qi(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,a;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,r):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ki(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",h=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const m=this;let g=!1,y=null,v=0,x=0,_=null,b=null,w=-1,M=null;const S=new ye,E=new ye;let T=null,L=t.width,A=t.height,P=1,R=null,C=null;const I=new ye(0,0,L,A),D=new ye(0,0,L,A);let N=!1;const $=new jn;let O=!1,z=!1;const B=new Xe,H=new _e,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===_?P:1}let k,G,V,W,j,q,X,Y,Z,J,Q,K,ee,te,ne,re,ie,ae,se,oe,le,ue=n;function de(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:r,depth:i,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if(t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ve,!1),null===ue){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),ue=de(t,e),null===ue)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ue.getShaderPrecisionFormat&&(ue.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function pe(){k=new ar(ue),G=new nr(ue,k,e),k.init(G),oe=new qi(ue,k,G),V=new Wi(ue,k,G),V.scissor(E.copy(D).multiplyScalar(P).floor()),V.viewport(S.copy(I).multiplyScalar(P).floor()),W=new lr(ue),j=new Ci,q=new ji(ue,k,V,j,G,oe,W),X=new ir(m),Y=new Xn(ue,G),le=new er(ue,k,Y,G),Z=new sr(ue,Y,W,le),J=new dr(ue,Z,Y,W),ie=new ur(ue),ne=new rr(j),Q=new Ri(m,X,k,G,le,ne),K=new Qi(j),ee=new $i(j),te=new Ui(k,G),re=new Kn(m,X,V,J,o),ae=new tr(ue,k,W,G),se=new or(ue,k,W,G),W.programs=Q.programs,m.capabilities=G,m.extensions=k,m.properties=j,m.renderLists=ee,m.state=V,m.info=W}pe();const fe=new Ji(m,ue);this.xr=fe;const me=new Vi(m,J,G.maxTextureSize);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1,pe()}function xe(e){const t=e.target;t.removeEventListener("dispose",xe),function(e){be(e),j.remove(e)}(t)}function be(e){const t=j.get(e).program;void 0!==t&&Q.releaseProgram(t)}this.shadowMap=me,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){const e=k.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=k.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(L,A,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new he),e.set(L,A)},this.setSize=function(e,n,r){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,A=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new he),e.set(L*P,A*P).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,A=n,P=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new ye),e.copy(S)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),V.viewport(S.copy(I).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),V.scissor(E.copy(D).multiplyScalar(P).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){V.setScissorTest(N=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){C=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new Gt),e.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ue.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ve,!1),ee.dispose(),te.dispose(),j.dispose(),X.dispose(),J.dispose(),le.dispose(),fe.dispose(),Me.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();const n=j.get(e);e.hasPositions&&!n.position&&(n.position=ue.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ue.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ue.createBuffer()),e.hasColors&&!n.color&&(n.color=ue.createBuffer());const r=t.getAttributes();e.hasPositions&&(ue.bindBuffer(34962,n.position),ue.bufferData(34962,e.positionArray,35048),le.enableAttribute(r.position),ue.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ue.bindBuffer(34962,n.normal),ue.bufferData(34962,e.normalArray,35048),le.enableAttribute(r.normal),ue.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ue.bindBuffer(34962,n.uv),ue.bufferData(34962,e.uvArray,35048),le.enableAttribute(r.uv),ue.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ue.bindBuffer(34962,n.color),ue.bufferData(34962,e.colorArray,35048),le.enableAttribute(r.color),ue.vertexAttribPointer(r.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ue.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=F);const s=i.isMesh&&i.matrixWorld.determinant()<0,o=Ae(e,t,r,i);V.setMaterial(r,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let h,u=1;!0===r.wireframe&&(l=Z.getWireframeAttribute(n),u=2),(r.morphTargets||r.morphNormals)&&ie.update(i,n,r,o),le.setup(i,r,o,n,l);let d=ae;null!==l&&(h=Y.get(l),d=se,d.setIndex(h));const p=null!==l?l.count:c.count,f=n.drawRange.start*u,m=n.drawRange.count*u,g=null!==a?a.start*u:0,y=null!==a?a.count*u:1/0,v=Math.max(f,g),x=Math.min(p,f+m,g+y)-1,_=Math.max(0,x-v+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*U()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),V.setLineWidth(e*U()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(v,_,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,_,e)}else d.render(v,_)}},this.compile=function(e,t){d=te.get(e),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights();const n=new WeakMap;e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const a=r[i];!1===n.has(a)&&(Le(a,e,t),n.set(a))}else!1===n.has(r)&&(Le(r,e,t),n.set(r))}))};let we=null;const Me=new qn;function Se(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||$.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);const t=J.update(e),i=e.material;i.visible&&u.push(e,t,i,n,H.z,null)}}else if(e.isImmediateRenderObject)r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B),u.push(e,null,e.material,n,H.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||$.intersectsObject(e))){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);const t=J.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&u.push(e,t,o,n,H.z,s)}}else i.visible&&u.push(e,t,i,n,H.z,null)}const i=e.children;for(let e=0,a=i.length;e<a;e++)Se(i[e],t,n,r)}function Ee(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],s=a.object,o=a.geometry,l=null===r?a.material:r,c=a.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];s.layers.test(r.layers)&&(V.viewport(S.copy(r.viewport)),d.setupLightsView(r),Te(s,t,r,o,l,c))}}else Te(s,t,n,o,l,c)}}function Te(e,t,n,r,i,a){if(e.onBeforeRender(m,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=Ae(n,t,i,e);V.setMaterial(i),le.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,r)}else m.renderBufferDirect(n,t,r,i,e,a);e.onAfterRender(m,t,n,r,i,a)}function Le(e,t,n){!0!==t.isScene&&(t=F);const r=j.get(e),i=d.state.lights,a=d.state.shadowsArray,s=i.state.version,o=Q.getParameters(e,i.state,a,t,n),l=Q.getProgramCacheKey(o);let c=r.program,h=!0;if(r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=X.get(e.envMap||r.environment),void 0===c)e.addEventListener("dispose",xe);else if(c.cacheKey!==l)be(e);else if(r.lightsStateVersion!==s)h=!1;else{if(void 0!==o.shaderID)return;h=!1}h&&(o.uniforms=Q.getUniforms(e),e.onBeforeCompile(o,m),c=Q.acquireProgram(o,l),r.program=c,r.uniforms=o.uniforms,r.outputEncoding=o.outputEncoding);const u=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ne.numPlanes,r.numIntersection=ne.numIntersection,u.clippingPlanes=ne.uniform),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(u.ambientLightColor.value=i.state.ambient,u.lightProbe.value=i.state.probe,u.directionalLights.value=i.state.directional,u.directionalLightShadows.value=i.state.directionalShadow,u.spotLights.value=i.state.spot,u.spotLightShadows.value=i.state.spotShadow,u.rectAreaLights.value=i.state.rectArea,u.ltc_1.value=i.state.rectAreaLTC1,u.ltc_2.value=i.state.rectAreaLTC2,u.pointLights.value=i.state.point,u.pointLightShadows.value=i.state.pointShadow,u.hemisphereLights.value=i.state.hemi,u.directionalShadowMap.value=i.state.directionalShadowMap,u.directionalShadowMatrix.value=i.state.directionalShadowMatrix,u.spotShadowMap.value=i.state.spotShadowMap,u.spotShadowMatrix.value=i.state.spotShadowMatrix,u.pointShadowMap.value=i.state.pointShadowMap,u.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=r.program.getUniforms(),f=ci.seqWithValue(p.seq,u);r.uniformsList=f}function Ae(e,t,n,r){!0!==t.isScene&&(t=F),q.resetTextureUnits();const i=t.fog,a=n.isMeshStandardMaterial?t.environment:null,s=null===_?m.outputEncoding:_.texture.encoding,o=X.get(n.envMap||a),l=j.get(n),c=d.state.lights;if(!0===O&&(!0===z||e!==M)){const t=e===M&&n.id===w;ne.setState(n,e,t)}n.version===l.__version?n.fog&&l.fog!==i||l.environment!==a||l.needsLights&&l.lightsStateVersion!==c.state.version?Le(n,t,r):void 0===l.numClippingPlanes||l.numClippingPlanes===ne.numPlanes&&l.numIntersection===ne.numIntersection?(l.outputEncoding!==s||l.envMap!==o)&&Le(n,t,r):Le(n,t,r):(Le(n,t,r),l.__version=n.version);let h=!1,u=!1,p=!1;const f=l.program,g=f.getUniforms(),y=l.uniforms;if(V.useProgram(f.program)&&(h=!0,u=!0,p=!0),n.id!==w&&(w=n.id,u=!0),h||M!==e){if(g.setValue(ue,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&g.setValue(ue,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),M!==e&&(M=e,u=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=g.map.cameraPosition;void 0!==t&&t.setValue(ue,H.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(ue,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(ue,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(ue,r,"bindMatrix"),g.setOptional(ue,r,"bindMatrixInverse");const e=r.skeleton;if(e){const t=e.bones;if(G.floatVertexTextures){if(null===e.boneTexture){let n=Math.sqrt(4*t.length);n=ce.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(e.boneMatrices);const i=new Gn(r,n,n,1023,1015);e.boneMatrices=r,e.boneTexture=i,e.boneTextureSize=n}g.setValue(ue,"boneTexture",e.boneTexture,q),g.setValue(ue,"boneTextureSize",e.boneTextureSize)}else g.setOptional(ue,e,"boneMatrices")}}var v,x;return(u||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,g.setValue(ue,"receiveShadow",r.receiveShadow)),u&&(g.setValue(ue,"toneMappingExposure",m.toneMappingExposure),l.needsLights&&(x=p,(v=y).ambientLightColor.needsUpdate=x,v.lightProbe.needsUpdate=x,v.directionalLights.needsUpdate=x,v.directionalLightShadows.needsUpdate=x,v.pointLights.needsUpdate=x,v.pointLightShadows.needsUpdate=x,v.spotLights.needsUpdate=x,v.spotLightShadows.needsUpdate=x,v.rectAreaLights.needsUpdate=x,v.hemisphereLights.needsUpdate=x),i&&n.fog&&K.refreshFogUniforms(y,i),K.refreshMaterialUniforms(y,n,P,A),ci.upload(ue,l.uniformsList,y,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ci.upload(ue,l.uniformsList,y,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(ue,"center",r.center),g.setValue(ue,"modelViewMatrix",r.modelViewMatrix),g.setValue(ue,"normalMatrix",r.normalMatrix),g.setValue(ue,"modelMatrix",r.matrixWorld),f}Me.setAnimationLoop((function(e){fe.isPresenting||we&&we(e)})),"undefined"!=typeof window&&Me.setContext(window),this.setAnimationLoop=function(e){we=e,fe.setAnimationLoop(e),null===e?Me.stop():Me.start()},this.render=function(e,t){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;le.resetDefaultState(),w=-1,M=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(t=fe.getCamera(t)),!0===e.isScene&&e.onBeforeRender(m,e,t,n||_),d=te.get(e,f.length),d.init(),f.push(d),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),$.setFromProjectionMatrix(B),z=this.localClippingEnabled,O=ne.init(this.clippingPlanes,z,t),u=ee.get(e,p.length),u.init(),p.push(u),Se(e,t,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(R,C),!0===O&&ne.beginShadows();const i=d.state.shadowsArray;me.render(i,e,t),d.setupLights(),d.setupLightsView(t),!0===O&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),re.render(u,e,t,r);const a=u.opaque,s=u.transparent;a.length>0&&Ee(a,e,t),s.length>0&&Ee(s,e,t),!0===e.isScene&&e.onAfterRender(m,e,t),null!==_&&(q.updateRenderTargetMipmap(_),q.updateMultisampleRenderTarget(_)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),u=p.length>0?p[p.length-1]:null},this.setFramebuffer=function(e){y!==e&&null===_&&ue.bindFramebuffer(36160,e),y=e},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return _},this.setRenderTarget=function(e,t=0,n=0){_=e,v=t,x=n,e&&void 0===j.get(e).__webglFramebuffer&&q.setupRenderTarget(e);let r=y,i=!1,a=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const s=j.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],i=!0):r=e.isWebGLMultisampleRenderTarget?j.get(e).__webglMultisampledFramebuffer:s,S.copy(e.viewport),E.copy(e.scissor),T=e.scissorTest}else S.copy(I).multiplyScalar(P).floor(),E.copy(D).multiplyScalar(P).floor(),T=N;if(b!==r&&(ue.bindFramebuffer(36160,r),b=r),V.viewport(S),V.scissor(E),V.setScissorTest(T),i){const r=j.get(e.texture);ue.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=j.get(e.texture),i=t||0;ue.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(e,t,n,r,i,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=j.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){let s=!1;o!==b&&(ue.bindFramebuffer(36160,o),s=!0);try{const o=e.texture,l=o.format,c=o.type;if(1023!==l&&oe.convert(l)!==ue.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=1016===c&&(k.has("EXT_color_buffer_half_float")||G.isWebGL2&&k.has("EXT_color_buffer_float"));if(!(1009===c||oe.convert(c)===ue.getParameter(35738)||1015===c&&(G.isWebGL2||k.has("OES_texture_float")||k.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ue.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ue.readPixels(t,n,r,i,oe.convert(l),oe.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&ue.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),s=oe.convert(t.format);q.setTexture2D(t,0),ue.copyTexImage2D(3553,n,s,e.x,e.y,i,a,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,a=t.image.height,s=oe.convert(n.format),o=oe.convert(n.type);q.setTexture2D(n,0),ue.pixelStorei(37440,n.flipY),ue.pixelStorei(37441,n.premultiplyAlpha),ue.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ue.texSubImage2D(3553,r,e.x,e.y,i,a,s,o,t.image.data):t.isCompressedTexture?ue.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ue.texSubImage2D(3553,r,e.x,e.y,s,o,t.image),0===r&&n.generateMipmaps&&ue.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:a,height:s,data:o}=n.image,l=oe.convert(r.format),c=oe.convert(r.type);let h;if(r.isDataTexture3D)q.setTexture3D(r,0),h=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),h=35866}ue.pixelStorei(37440,r.flipY),ue.pixelStorei(37441,r.premultiplyAlpha),ue.pixelStorei(3317,r.unpackAlignment);const u=ue.getParameter(3314),d=ue.getParameter(32878),p=ue.getParameter(3316),f=ue.getParameter(3315),g=ue.getParameter(32877);ue.pixelStorei(3314,a),ue.pixelStorei(32878,s),ue.pixelStorei(3316,e.min.x),ue.pixelStorei(3315,e.min.y),ue.pixelStorei(32877,e.min.z),ue.texSubImage3D(h,i,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,l,c,o),ue.pixelStorei(3314,u),ue.pixelStorei(32878,d),ue.pixelStorei(3316,p),ue.pixelStorei(3315,f),ue.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ue.generateMipmap(h),V.unbindTexture()},this.initTexture=function(e){q.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){V.reset(),le.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Yi.prototype.isGroup=!0,Object.assign(Zi.prototype,{constructor:Zi,getHandSpace:function(){return null===this._hand&&(this._hand=new Yi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Yi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Yi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let r=null,i=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(l&&e.hand){a=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new Yi;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale))),null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)));return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}}),Object.assign(Ji.prototype,se.prototype);(class extends Ki{}).prototype.isWebGL1Renderer=!0;class ea extends xt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function ta(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ce.generateUUID()}ea.prototype.isScene=!0,Object.defineProperty(ta.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ta.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ce.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new ta(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ce.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const na=new _e;function ra(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}Object.defineProperties(ra.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(ra.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)na.x=this.getX(t),na.y=this.getY(t),na.z=this.getZ(t),na.applyMatrix4(e),this.setXYZ(t,na.x,na.y,na.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new qt(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ra(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class ia extends Ot{constructor(e){super(),this.type="SpriteMaterial",this.color=new Gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let aa;ia.prototype.isSpriteMaterial=!0;const sa=new _e,oa=new _e,la=new _e,ca=new he,ha=new he,ua=new Xe,da=new _e,pa=new _e,fa=new _e,ma=new he,ga=new he,ya=new he;function va(e,t,n,r,i,a){ca.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(ha.x=a*ca.x-i*ca.y,ha.y=i*ca.x+a*ca.y):ha.copy(ca),e.copy(t),e.x+=ha.x,e.y+=ha.y,e.applyMatrix4(ua)}(class extends xt{constructor(e){if(super(),this.type="Sprite",void 0===aa){aa=new pn;const e=new ta(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);aa.setIndex([0,1,2,0,2,3]),aa.setAttribute("position",new ra(e,3,0,!1)),aa.setAttribute("uv",new ra(e,2,3,!1))}this.geometry=aa,this.material=void 0!==e?e:new ia,this.center=new he(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),oa.setFromMatrixScale(this.matrixWorld),ua.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),la.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&oa.multiplyScalar(-la.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;va(da.set(-.5,-.5,0),la,a,oa,r,i),va(pa.set(.5,-.5,0),la,a,oa,r,i),va(fa.set(.5,.5,0),la,a,oa,r,i),ma.set(0,0),ga.set(1,0),ya.set(1,1);let s=e.ray.intersectTriangle(da,pa,fa,!1,sa);if(null===s&&(va(pa.set(-.5,.5,0),la,a,oa,r,i),ga.set(0,1),s=e.ray.intersectTriangle(da,fa,pa,!1,sa),null===s))return;const o=e.ray.origin.distanceTo(sa);o<e.near||o>e.far||t.push({distance:o,point:sa.clone(),uv:Nt.getUV(sa,da,pa,fa,ma,ga,ya,new he),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const xa=new _e,_a=new _e;const ba=new _e,wa=new ye,Ma=new ye,Sa=new _e,Ea=new Xe;function Ta(e,t){Cn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xe,this.bindMatrixInverse=new Xe}function La(){xt.call(this),this.type="Bone"}Ta.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Ta,isSkinnedMesh:!0,copy:function(e){return Cn.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new ye,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Cn.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(e,t){const n=this.skeleton,r=this.geometry;wa.fromBufferAttribute(r.attributes.skinIndex,e),Ma.fromBufferAttribute(r.attributes.skinWeight,e),ba.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Ma.getComponent(e);if(0!==r){const i=wa.getComponent(e);Ea.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Sa.copy(ba).applyMatrix4(Ea),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}),La.prototype=Object.assign(Object.create(xt.prototype),{constructor:La,isBone:!0});const Aa=new Xe,Pa=new Xe;class Ra{constructor(e=[],t=[]){this.uuid=ce.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Xe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Xe;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Pa;Aa.multiplyMatrices(i,t[r]),Aa.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Ra(this.bones,this.boneInverses)}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new La),this.bones.push(i),this.boneInverses.push((new Xe).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}const Ca=new Xe,Ia=new Xe,Da=[],Na=new Cn;function $a(e,t,n){Cn.call(this,e,t),this.instanceMatrix=new qt(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}$a.prototype=Object.assign(Object.create(Cn.prototype),{constructor:$a,isInstancedMesh:!0,copy:function(e){return Cn.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,r=this.count;if(Na.geometry=this.geometry,Na.material=this.material,void 0!==Na.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Ca),Ia.multiplyMatrices(n,Ca),Na.matrixWorld=Ia,Na.raycast(e,Da);for(let e=0,n=Da.length;e<n;e++){const n=Da[e];n.instanceId=i,n.object=this,t.push(n)}Da.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new qt(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Oa extends Ot{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Gt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}Oa.prototype.isLineBasicMaterial=!0;const za=new _e,Ba=new _e,Ha=new Xe,Fa=new qe,Ua=new He;function ka(e=new pn,t=new Oa){xt.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}ka.prototype=Object.assign(Object.create(xt.prototype),{constructor:ka,isLine:!0,copy:function(e){return xt.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)za.fromBufferAttribute(t,e-1),Ba.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=za.distanceTo(Ba);e.setAttribute("lineDistance",new nn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ua.copy(n.boundingSphere),Ua.applyMatrix4(r),Ua.radius+=i,!1===e.ray.intersectsSphere(Ua))return;Ha.copy(r).invert(),Fa.copy(e.ray).applyMatrix4(Ha);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,o=new _e,l=new _e,c=new _e,h=new _e,u=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,a=n.length-1;r<a;r+=u){const a=n[r],u=n[r+1];o.fromBufferAttribute(i,a),l.fromBufferAttribute(i,u);if(Fa.distanceSqToSegment(o,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,r=i.count-1;n<r;n+=u){o.fromBufferAttribute(i,n),l.fromBufferAttribute(i,n+1);if(Fa.distanceSqToSegment(o,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Ga=new _e,Va=new _e;function Wa(e,t){ka.call(this,e,t),this.type="LineSegments"}Wa.prototype=Object.assign(Object.create(ka.prototype),{constructor:Wa,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Ga.fromBufferAttribute(t,e),Va.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Ga.distanceTo(Va);e.setAttribute("lineDistance",new nn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});(class extends ka{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class ja extends Ot{constructor(e){super(),this.type="PointsMaterial",this.color=new Gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}ja.prototype.isPointsMaterial=!0;const qa=new Xe,Xa=new qe,Ya=new He,Za=new _e;function Ja(e=new pn,t=new ja){xt.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}function Qa(e,t,n,r,i,a,s){const o=Xa.distanceSqToPoint(e);if(o<n){const n=new _e;Xa.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}Ja.prototype=Object.assign(Object.create(xt.prototype),{constructor:Ja,isPoints:!0,copy:function(e){return xt.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ya.copy(n.boundingSphere),Ya.applyMatrix4(r),Ya.radius+=i,!1===e.ray.intersectsSphere(Ya))return;qa.copy(r).invert(),Xa.copy(e.ray).applyMatrix4(qa);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,o=n.length;i<o;i++){const o=n[i];Za.fromBufferAttribute(a,o),Qa(Za,o,s,r,e,t,this)}}else for(let n=0,i=a.count;n<i;n++)Za.fromBufferAttribute(a,n),Qa(Za,n,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});(class extends me{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class Ka extends me{constructor(e,t,n,r,i,a,s,o,l,c,h,u){super(null,a,s,o,l,c,r,i,h,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Ka.prototype.isCompressedTexture=!0;(class extends me{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends me{constructor(e,t,n,r,i,a,s,o,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),super(null,r,i,a,s,o,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0,new _e,new _e,new _e,new Nt;const es=function(e,t,n){n=n||2;const r=t&&t.length,i=r?t[0]*n:e.length;let a=ts(e,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,h,u,d,p;if(r&&(a=function(e,t,n,r){const i=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=ts(e,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ds(c));for(i.sort(ls),a=0;a<i.length;a++)cs(i[a],n),n=ns(n,n.next);return n}(e,t,a,n)),e.length>80*n){o=c=e[0],l=h=e[1];for(let t=n;t<i;t+=n)u=e[t],d=e[t+1],u<o&&(o=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);p=Math.max(c-o,h-l),p=0!==p?1/p:0}return rs(a,s,n,o,l,p),s};function ts(e,t,n,r,i){let a,s;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=ws(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=ws(a,e[a],e[a+1],s);return s&&gs(s,s.next)&&(Ms(s),s=s.next),s}function ns(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!gs(r,r.next)&&0!==ms(r.prev,r,r.next))r=r.next;else{if(Ms(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function rs(e,t,n,r,i,a,s){if(!e)return;!s&&a&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=us(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,s,o,l,c=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<c&&(o++,r=r.nextZ,r);t++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(s>1)}(i)}(e,r,i,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?as(e,r,i,a):is(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),Ms(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?rs(e=ss(ns(e),t,n),t,n,r,i,a,2):2===s&&os(e,t,n,r,i,a):rs(ns(e),t,n,r,i,a,1);break}}function is(e){const t=e.prev,n=e,r=e.next;if(ms(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(ps(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ms(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function as(e,t,n,r){const i=e.prev,a=e,s=e.next;if(ms(i,a,s)>=0)return!1;const o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,l=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,c=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,h=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,u=us(o,l,t,n,r),d=us(c,h,t,n,r);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=u&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&ps(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&ms(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&ps(i.x,i.y,a.x,a.y,s.x,s.y,f.x,f.y)&&ms(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=u;){if(p!==e.prev&&p!==e.next&&ps(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&ms(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&ps(i.x,i.y,a.x,a.y,s.x,s.y,f.x,f.y)&&ms(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ss(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!gs(i,a)&&ys(i,r,r.next,a)&&_s(i,a)&&_s(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Ms(r),Ms(r.next),r=e=a),r=r.next}while(r!==e);return ns(r)}function os(e,t,n,r,i,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&fs(s,e)){let o=bs(s,e);return s=ns(s,s.next),o=ns(o,o.next),rs(s,t,n,r,i,a),void rs(o,t,n,r,i,a)}e=e.next}s=s.next}while(s!==e)}function ls(e,t){return e.x-t.x}function cs(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let a,s=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>s){if(s=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(r===s)return a;const o=a,l=a.x,c=a.y;let h,u=1/0;n=a;do{r>=n.x&&n.x>=l&&r!==n.x&&ps(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),_s(n,e)&&(h<u||h===u&&(n.x>a.x||n.x===a.x&&hs(a,n)))&&(a=n,u=h)),n=n.next}while(n!==o);return a}(e,t),t){const n=bs(t,e);ns(t,t.next),ns(n,n.next)}}function hs(e,t){return ms(e.prev,e,t.prev)<0&&ms(t.next,e,e.next)<0}function us(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ds(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ps(e,t,n,r,i,a,s,o){return(i-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(r-o)-(n-s)*(t-o)>=0&&(n-s)*(a-o)-(i-s)*(r-o)>=0}function fs(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ys(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(_s(e,t)&&_s(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(ms(e.prev,e,t.prev)||ms(e,t.prev,t))||gs(e,t)&&ms(e.prev,e,e.next)>0&&ms(t.prev,t,t.next)>0)}function ms(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function gs(e,t){return e.x===t.x&&e.y===t.y}function ys(e,t,n,r){const i=xs(ms(e,t,n)),a=xs(ms(e,t,r)),s=xs(ms(n,r,e)),o=xs(ms(n,r,t));return i!==a&&s!==o||(!(0!==i||!vs(e,n,t))||(!(0!==a||!vs(e,r,t))||(!(0!==s||!vs(n,e,r))||!(0!==o||!vs(n,t,r)))))}function vs(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function xs(e){return e>0?1:e<0?-1:0}function _s(e,t){return ms(e.prev,e,e.next)<0?ms(e,t,e.next)>=0&&ms(e,e.prev,t)>=0:ms(e,t,e.prev)<0||ms(e,e.next,t)<0}function bs(e,t){const n=new Ss(e.i,e.x,e.y),r=new Ss(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ws(e,t,n,r){const i=new Ss(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ms(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ss(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Es={area:function(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Es.area(e)<0},triangulateShape:function(e,t){const n=[],r=[],i=[];Ts(e),Ls(n,e);let a=e.length;t.forEach(Ts);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,Ls(n,t[e]);const s=es(n,r);for(let e=0;e<s.length;e+=3)i.push(s.slice(e,e+3));return i}};function Ts(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ls(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class As extends pn{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){a(e[t])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,h=void 0!==t.bevelThickness?t.bevelThickness:6,u=void 0!==t.bevelSize?t.bevelSize:h-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ps;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,y,v,x,_,b=!1;f&&(g=f.getSpacedPoints(o),b=!0,c=!1,y=f.computeFrenetFrames(o,!1),v=new _e,x=new _e,_=new _e),c||(p=0,h=0,u=0,d=0);const w=e.extractPoints(s);let M=w.shape;const S=w.holes;if(!Es.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];Es.isClockWise(t)&&(S[e]=t.reverse())}}const E=Es.triangulateShape(M,S),T=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function L(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const A=M.length,P=E.length;function R(e,t,n){let r,i,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,h=s*s+o*o,u=s*c-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=t.x-o/u,f=t.y+s/u,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(s*c-o*l);r=p+s*m-e.x,i=f+o*m-e.y;const g=r*r+i*i;if(g<=2)return new he(r,i);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,i=s,a=Math.sqrt(h)):(r=s,i=o,a=Math.sqrt(h/2))}return new he(r/a,i/a)}const C=[];for(let e=0,t=T.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),C[e]=R(T[e],T[n],T[r]);const I=[];let D,N=C.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];D=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[e]=R(t[e],t[r],t[i]);I.push(D),N=N.concat(D)}for(let e=0;e<p;e++){const t=e/p,n=h*Math.cos(t*Math.PI/2),r=u*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=L(T[e],C[e],r);z(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];D=I[e];for(let e=0,i=t.length;e<i;e++){const i=L(t[e],D[e],r);z(i.x,i.y,-n)}}}const $=u+d;for(let e=0;e<A;e++){const t=c?L(M[e],N[e],$):M[e];b?(x.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(x).add(v),z(_.x,_.y,_.z)):z(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<A;t++){const n=c?L(M[t],N[t],$):M[t];b?(x.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(x).add(v),z(_.x,_.y,_.z)):z(n.x,n.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=h*Math.cos(t*Math.PI/2),r=u*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=L(T[e],C[e],r);z(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];D=I[e];for(let e=0,i=t.length;e<i;e++){const i=L(t[e],D[e],r);b?z(i.x,i.y+g[o-1].y,g[o-1].x+n):z(i.x,i.y,l+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=A*e,a=A*(e+1);H(t+r+n,t+i+n,t+i+a,t+r+a)}}}function z(e,t,n){a.push(e),a.push(t),a.push(n)}function B(e,t,i){F(e),F(t),F(i);const a=r.length/3,s=m.generateTopUV(n,r,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[2])}function H(e,t,i,a){F(e),F(t),F(a),F(t),F(i),F(a);const s=r.length/3,o=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);U(o[0]),U(o[1]),U(o[3]),U(o[1]),U(o[2]),U(o[3])}function F(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function U(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=A*e;for(let e=0;e<P;e++){const n=E[e];B(n[2]+t,n[1]+t,n[0]+t)}e=o+2*p,t=A*e;for(let e=0;e<P;e++){const n=E[e];B(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];B(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];B(t[0]+A*o,t[1]+A*o,t[2]+A*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;O(T,t),t+=T.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];O(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new nn(r,3)),this.setAttribute("uv",new nn(i,2)),this.computeVertexNormals()}toJSON(){const e=pn.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}const Ps={generateTopUV:function(e,t,n,r,i){const a=t[3*n],s=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*i],h=t[3*i+1];return[new he(a,s),new he(o,l),new he(c,h)]},generateSideWallUV:function(e,t,n,r,i,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],h=t[3*r+1],u=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],y=t[3*a+2];return Math.abs(o-h)<.01?[new he(s,1-l),new he(c,1-u),new he(d,1-f),new he(m,1-y)]:[new he(o,1-l),new he(h,1-u),new he(p,1-f),new he(g,1-y)]}};function Rs(e,t,n){pn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],a=[],s=[],o=1e-5,l=new _e,c=new _e,h=new _e,u=new _e,d=new _e;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=t+1;for(let r=0;r<=n;r++){const p=r/n;for(let n=0;n<=t;n++){const r=n/t;e(r,p,c),i.push(c.x,c.y,c.z),r-o>=0?(e(r-o,p,h),u.subVectors(c,h)):(e(r+o,p,h),u.subVectors(h,c)),p-o>=0?(e(r,p-o,h),d.subVectors(c,h)):(e(r,p+o,h),d.subVectors(h,c)),l.crossVectors(u,d).normalize(),a.push(l.x,l.y,l.z),s.push(r,p)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*p+n,i=e*p+n+1,a=(e+1)*p+n+1,s=(e+1)*p+n;r.push(t,i,s),r.push(i,a,s)}this.setIndex(r),this.setAttribute("position",new nn(i,3)),this.setAttribute("normal",new nn(a,3)),this.setAttribute("uv",new nn(s,2))}Rs.prototype=Object.create(pn.prototype),Rs.prototype.constructor=Rs;class Cs extends pn{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const h=l.holes;!1===Es.isClockWise(c)&&(c=c.reverse());for(let e=0,t=h.length;e<t;e++){const t=h[e];!0===Es.isClockWise(t)&&(h[e]=t.reverse())}const u=Es.triangulateShape(c,h);for(let e=0,t=h.length;e<t;e++){const t=h[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=u.length;e<t;e++){const t=u[e],r=t[0]+s,i=t[1]+s,a=t[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new nn(r,3)),this.setAttribute("normal",new nn(i,3)),this.setAttribute("uv",new nn(a,2))}toJSON(){const e=pn.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class Is extends pn{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],h=new _e,u=new _e,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],y=d/n;let v=0;0==d&&0==a?v=.5/t:d==n&&o==Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const o=n/t;h.x=-e*Math.cos(r+o*i)*Math.sin(a+y*s),h.y=e*Math.cos(a+y*s),h.z=e*Math.sin(r+o*i)*Math.sin(a+y*s),p.push(h.x,h.y,h.z),u.copy(h).normalize(),f.push(u.x,u.y,u.z),m.push(o+v,1-y),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],s=c[e+1][r],l=c[e+1][r+1];(0!==e||a>0)&&d.push(t,i,l),(e!==n-1||o<Math.PI)&&d.push(i,s,l)}this.setIndex(d),this.setAttribute("position",new nn(p,3)),this.setAttribute("normal",new nn(f,3)),this.setAttribute("uv",new nn(m,2))}}(class extends Ot{constructor(e){super(),this.type="ShadowMaterial",this.color=new Gt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;function Ds(e){Ot.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}function Ns(e){Ds.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=ce.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}(class extends zn{constructor(e){super(e),this.type="RawShaderMaterial"}}).prototype.isRawShaderMaterial=!0,Ds.prototype=Object.create(Ot.prototype),Ds.prototype.constructor=Ds,Ds.prototype.isMeshStandardMaterial=!0,Ds.prototype.copy=function(e){return Ot.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this},Ns.prototype=Object.create(Ds.prototype),Ns.prototype.constructor=Ns,Ns.prototype.isMeshPhysicalMaterial=!0,Ns.prototype.copy=function(e){return Ds.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Gt).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this};class $s extends Ot{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Gt(16777215),this.specular=new Gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}$s.prototype.isMeshPhongMaterial=!0;(class extends Ot{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshToonMaterial=!0;(class extends Ot{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends Ot{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}).prototype.isMeshLambertMaterial=!0;(class extends Ot{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends Oa{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Os={arraySlice:function(e,t,n){return Os.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,s=0;s!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(t.push(a.time),n.push(s)),a=e[i++]}while(void 0!==a)},subclip:function(e,t,n,r,i=30){const a=e.clone();a.name=t;const s=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*i;if(!(a<n||a>=r)){l.push(t.times[e]);for(let n=0;n<o;++n)c.push(t.values[e*o+n])}}0!==l.length&&(t.times=Os.convertArray(l,t.times.constructor),t.values=Os.convertArray(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const s=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===s)continue;let o=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);const u=r.times.length-1;let d;if(a<=r.times[0]){const e=o,t=l-o;d=Os.arraySlice(r.values,e,t)}else if(a>=r.times[u]){const e=u*l+o,t=e+l-o;d=Os.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=o,n=l-o;e.evaluate(a),d=Os.arraySlice(e.resultBuffer,t,n)}if("quaternion"===i){(new xe).fromArray(d).normalize().conjugate().toArray(d)}const p=s.times.length;for(let e=0;e<p;++e){const t=e*h+c;if("quaternion"===i)xe.multiplyQuaternionsFlat(s.values,t,d,0,s.values,t);else{const e=h-2*c;for(let n=0;n<e;++n)s.values[t+n]-=d[n]}}}return e.blendMode=2501,e}};function zs(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Bs(e,t,n,r){zs.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Hs(e,t,n,r){zs.call(this,e,t,n,r)}function Fs(e,t,n,r){zs.call(this,e,t,n,r)}Object.assign(zs.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=i)break e;{const s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(zs.prototype,{beforeStart_:zs.prototype.copySampleValue_,afterEnd_:zs.prototype.copySampleValue_}),Bs.prototype=Object.assign(Object.create(zs.prototype),{constructor:Bs,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:i=e,s=2*t-n;break;case 2402:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*n-t;break;case 2402:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=a*c},interpolate_:function(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,y=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let e=0;e!==s;++e)i[e]=g*a[c+e]+y*a[l+e]+v*a[o+e]+x*a[h+e];return i}}),Hs.prototype=Object.assign(Object.create(zs.prototype),{constructor:Hs,interpolate_:function(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(r-t),h=1-c;for(let e=0;e!==s;++e)i[e]=a[l+e]*h+a[o+e]*c;return i}}),Fs.prototype=Object.assign(Object.create(zs.prototype),{constructor:Fs,interpolate_:function(e){return this.copySampleValue_(e-1)}});class Us{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Os.convertArray(t,this.TimeBufferType),this.values=Os.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Os.convertArray(e.times,Array),values:Os.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Fs(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Hs(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Bs(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=Os.arraySlice(n,i,a),this.values=Os.arraySlice(this.values,i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&Os.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=Os.arraySlice(this.times),t=Os.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1;let a=1;for(let s=1;s<i;++s){let i=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}if(i){if(s!==a){e[a]=e[s];const r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=Os.arraySlice(e,0,a),this.values=Os.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=Os.arraySlice(this.times,0),t=Os.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Us.prototype.TimeBufferType=Float32Array,Us.prototype.ValueBufferType=Float32Array,Us.prototype.DefaultInterpolation=2301;class ks extends Us{}ks.prototype.ValueTypeName="bool",ks.prototype.ValueBufferType=Array,ks.prototype.DefaultInterpolation=2300,ks.prototype.InterpolantFactoryMethodLinear=void 0,ks.prototype.InterpolantFactoryMethodSmooth=void 0;class Gs extends Us{}Gs.prototype.ValueTypeName="color";class Vs extends Us{}function Ws(e,t,n,r){zs.call(this,e,t,n,r)}Vs.prototype.ValueTypeName="number",Ws.prototype=Object.assign(Object.create(zs.prototype),{constructor:Ws,interpolate_:function(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t);let l=e*s;for(let e=l+s;l!==e;l+=4)xe.slerpFlat(i,0,a,l-s,a,l,o);return i}});class js extends Us{InterpolantFactoryMethodLinear(e){return new Ws(this.times,this.values,this.getValueSize(),e)}}js.prototype.ValueTypeName="quaternion",js.prototype.DefaultInterpolation=2301,js.prototype.InterpolantFactoryMethodSmooth=void 0;class qs extends Us{}qs.prototype.ValueTypeName="string",qs.prototype.ValueBufferType=Array,qs.prototype.DefaultInterpolation=2300,qs.prototype.InterpolantFactoryMethodLinear=void 0,qs.prototype.InterpolantFactoryMethodSmooth=void 0;class Xs extends Us{}Xs.prototype.ValueTypeName="vector";class Ys{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=ce.generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Zs(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(Us.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let e=0;e<i;e++){let s=[],o=[];s.push((e+i-1)%i,e,(e+1)%i),o.push(0,1,0);const l=Os.getKeyframeOrder(s);s=Os.sortedArray(s,1,l),o=Os.sortedArray(o,1,l),r||0!==s[0]||(s.push(i),o.push(o[0])),a.push(new Vs(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(i);if(a&&a.length>1){const e=a[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const a=[];for(const e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],s=[];Os.flattenJSON(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new Vs(".morphTargetInfluence["+n+"]",e,a))}o=e.length*(a||1)}else{const a=".bones["+t[e].name+"]";n(Xs,a+".position",i,"pos",r),n(js,a+".quaternion",i,"rot",r),n(Xs,a+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,o,r,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Zs(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vs;case"vector":case"vector2":case"vector3":case"vector4":return Xs;case"color":return Gs;case"quaternion":return js;case"bool":case"boolean":return ks;case"string":return qs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Os.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Js={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const Qs=new function(e,t,n){const r=this;let i,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}};function Ks(e){this.manager=void 0!==e?e:Qs,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Ks.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const eo={};function to(e){Ks.call(this,e)}function no(e){Ks.call(this,e)}to.prototype=Object.assign(Object.create(Ks.prototype),{constructor:to,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=Js.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0!==eo[e])return void eo[e].push({onLoad:t,onProgress:n,onError:r});const s=e.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(s){const n=s[1],a=!!s[2];let o=s[3];o=decodeURIComponent(o),a&&(o=atob(o));try{let r;const a=(this.responseType||"").toLowerCase();switch(a){case"arraybuffer":case"blob":const e=new Uint8Array(o.length);for(let t=0;t<o.length;t++)e[t]=o.charCodeAt(t);r="blob"===a?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(o,n);break;case"json":r=JSON.parse(o);break;default:r=o}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{eo[e]=[],eo[e].push({onLoad:t,onProgress:n,onError:r}),o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",(function(t){const n=this.response,r=eo[e];if(delete eo[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Js.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){const n=eo[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),o.addEventListener("error",(function(t){const n=eo[e];delete eo[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){const n=eo[e];delete eo[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)o.setRequestHeader(e,this.requestHeader[e]);o.send(null)}return i.manager.itemStart(e),o},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),no.prototype=Object.assign(Object.create(Ks.prototype),{constructor:no,load:function(e,t,n,r){const i=this,a=[],s=new Ka,o=new to(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=1006),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else o.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=1006),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,r);return s}});class ro extends Ks{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=Js.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),Js.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class io extends Ks{constructor(e){super(e)}load(e,t,n,r){const i=new Un,a=new ro(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],(function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)o(t);return i}}function ao(e){Ks.call(this,e)}function so(e){Ks.call(this,e)}function oo(){this.type="Curve",this.arcLengthDivisions=200}ao.prototype=Object.assign(Object.create(Ks.prototype),{constructor:ao,load:function(e,t,n,r){const i=this,a=new Gn,s=new to(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:1001,a.wrapT=void 0!==n.wrapT?n.wrapT:1001,a.magFilter=void 0!==n.magFilter?n.magFilter:1006,a.minFilter=void 0!==n.minFilter?n.minFilter:1006,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=1008),1===n.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}),so.prototype=Object.assign(Object.create(Ks.prototype),{constructor:so,load:function(e,t,n,r){const i=new me,a=new ro(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(oo.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let s,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=n[r]-a,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)},getTangent:function(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),s=this.getPoint(i),o=t||(a.isVector2?new he:new _e);return o.copy(s).sub(a).normalize(),o},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new _e,r=[],i=[],a=[],s=new _e,o=new Xe;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new _e),r[t].normalize()}i[0]=new _e,a[0]=new _e;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),h=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(r[t-1],r[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(ce.clamp(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(ce.clamp(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});class lo extends oo{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,s=!1,o=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new he,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const s=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}lo.prototype.isEllipseCurve=!0;class co extends lo{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.type="ArcCurve"}}function ho(){let e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+o)+(r-n)/o;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}co.prototype.isArcCurve=!0;const uo=new _e,po=new ho,fo=new ho,mo=new ho;class go extends oo{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new _e){const n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(uo.subVectors(r[0],r[1]).add(r[0]),s=uo);const h=r[l%i],u=r[(l+1)%i];if(this.closed||l+2<i?o=r[(l+2)%i]:(uo.subVectors(r[i-1],r[i-2]).add(r[i-1]),o=uo),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),po.initNonuniformCatmullRom(s.x,h.x,u.x,o.x,t,n,r),fo.initNonuniformCatmullRom(s.y,h.y,u.y,o.y,t,n,r),mo.initNonuniformCatmullRom(s.z,h.z,u.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(po.initCatmullRom(s.x,h.x,u.x,o.x,this.tension),fo.initCatmullRom(s.y,h.y,u.y,o.y,this.tension),mo.initCatmullRom(s.z,h.z,u.z,o.z,this.tension));return n.set(po.calc(c),fo.calc(c),mo.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new _e).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function yo(e,t,n,r,i){const a=.5*(r-t),s=.5*(i-n),o=e*e;return(2*n-2*r+a+s)*(e*o)+(-3*n+3*r-2*a-s)*o+a*e+n}function vo(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function xo(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}go.prototype.isCatmullRomCurve3=!0;class _o extends oo{constructor(e=new he,t=new he,n=new he,r=new he){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new he){const n=t,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(xo(e,r.x,i.x,a.x,s.x),xo(e,r.y,i.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}_o.prototype.isCubicBezierCurve=!0;class bo extends oo{constructor(e=new _e,t=new _e,n=new _e,r=new _e){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new _e){const n=t,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(xo(e,r.x,i.x,a.x,s.x),xo(e,r.y,i.y,a.y,s.y),xo(e,r.z,i.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}bo.prototype.isCubicBezierCurve3=!0;class wo extends oo{constructor(e=new he,t=new he){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new he){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new he;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}wo.prototype.isLineCurve=!0;class Mo extends oo{constructor(e=new he,t=new he,n=new he){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new he){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(vo(e,r.x,i.x,a.x),vo(e,r.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Mo.prototype.isQuadraticBezierCurve=!0;class So extends oo{constructor(e=new _e,t=new _e,n=new _e){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new _e){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(vo(e,r.x,i.x,a.x),vo(e,r.y,i.y,a.y),vo(e,r.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}So.prototype.isQuadraticBezierCurve3=!0;class Eo extends oo{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new he){const n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),s=i-a,o=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(yo(s,o.x,l.x,c.x,h.x),yo(s,o.y,l.y,c.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new he).fromArray(n))}return this}}Eo.prototype.isSplineCurve=!0;var To=Object.freeze({__proto__:null,ArcCurve:co,CatmullRomCurve3:go,CubicBezierCurve:_o,CubicBezierCurve3:bo,EllipseCurve:lo,LineCurve:wo,LineCurve3:class extends oo{constructor(e=new _e,t=new _e){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new _e){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Mo,QuadraticBezierCurve3:So,SplineCurve:Eo});class Lo extends oo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wo(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],a=i.getLength(),s=0===a?0:1-e/a;return i.getPointAt(s)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],s=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new To[n.type]).fromJSON(n))}return this}}class Ao extends Lo{constructor(e){super(),this.type="Path",this.currentPoint=new he,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new wo(this.currentPoint.clone(),new he(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Mo(this.currentPoint.clone(),new he(e,t),new he(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const s=new _o(this.currentPoint.clone(),new he(e,t),new he(n,r),new he(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Eo(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,s,o),this}absellipse(e,t,n,r,i,a,s,o){const l=new lo(e,t,n,r,i,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Po extends Ao{constructor(e){super(e),this.uuid=ce.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Ao).fromJSON(n))}return this}}class Ro extends xt{constructor(e,t=1){super(),this.type="Light",this.color=new Gt(e),this.intensity=t}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ro.prototype.isLight=!0;(class extends Ro{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(xt.DefaultUp),this.updateMatrix(),this.groundColor=new Gt(t)}copy(e){return Ro.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const Co=new Xe,Io=new _e,Do=new _e;class No{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new Xe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jn,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new ye(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Io.setFromMatrixPosition(e.matrixWorld),t.position.copy(Io),Do.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Do),t.updateMatrixWorld(),Co.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Co),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $o extends No{constructor(){super(new Hn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*ce.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}}$o.prototype.isSpotLightShadow=!0;(class extends Ro{constructor(e,t,n=0,r=Math.PI/3,i=0,a=1){super(e,t),this.type="SpotLight",this.position.copy(xt.DefaultUp),this.updateMatrix(),this.target=new xt,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.shadow=new $o}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const Oo=new Xe,zo=new _e,Bo=new _e;class Ho extends No{constructor(){super(new Hn(90,1,.5,500)),this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new ye(2,1,1,1),new ye(0,1,1,1),new ye(3,1,1,1),new ye(1,1,1,1),new ye(3,0,1,1),new ye(1,0,1,1)],this._cubeDirections=[new _e(1,0,0),new _e(-1,0,0),new _e(0,0,1),new _e(0,0,-1),new _e(0,1,0),new _e(0,-1,0)],this._cubeUps=[new _e(0,1,0),new _e(0,1,0),new _e(0,1,0),new _e(0,1,0),new _e(0,0,1),new _e(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix;zo.setFromMatrixPosition(e.matrixWorld),n.position.copy(zo),Bo.copy(n.position),Bo.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Bo),n.updateMatrixWorld(),r.makeTranslation(-zo.x,-zo.y,-zo.z),Oo.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Oo)}}Ho.prototype.isPointLightShadow=!0;(class extends Ro{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Ho}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class Fo extends Bn{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=xt.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Fo.prototype.isOrthographicCamera=!0;class Uo extends No{constructor(){super(new Fo(-5,5,5,-5,.5,500))}}Uo.prototype.isDirectionalLightShadow=!0;(class extends Ro{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(xt.DefaultUp),this.updateMatrix(),this.target=new xt,this.shadow=new Uo}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends Ro{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends Ro{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class ko{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new _e)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}ko.prototype.isSphericalHarmonics3=!0;class Go extends Ro{constructor(e=new ko,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Go.prototype.isLightProbe=!0;const Vo=function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Wo(){pn.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function jo(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),qt.call(this,e,t,n),this.meshPerAttribute=r||1}function qo(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ks.call(this,e),this.options={premultiplyAlpha:"none"}}let Xo;Wo.prototype=Object.assign(Object.create(pn.prototype),{constructor:Wo,isInstancedBufferGeometry:!0,copy:function(e){return pn.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=pn.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),jo.prototype=Object.assign(Object.create(qt.prototype),{constructor:jo,isInstancedBufferAttribute:!0,copy:function(e){return qt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=qt.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),qo.prototype=Object.assign(Object.create(Ks.prototype),{constructor:qo,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=Js.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Js.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}});const Yo=function(){return void 0===Xo&&(Xo=new(window.AudioContext||window.webkitAudioContext)),Xo};class Zo extends Ks{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new to(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);Yo().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}(class extends Go{constructor(e,t,n=1){super(void 0,n);const r=(new Gt).set(e),i=(new Gt).set(t),a=new _e(r.r,r.g,r.b),s=new _e(i.r,i.g,i.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class extends Go{constructor(e,t=1){super(void 0,t);const n=(new Gt).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0,new Xe,new Xe;class Jo{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){s.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){xe.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;xe.multiplyQuaternionsFlat(e,a,e,t,e,n),xe.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*a+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const Qo=new RegExp("[\\[\\]\\.:\\/]","g"),Ko="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",el=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),tl=/(WCOD+)?/.source.replace("WCOD",Ko),nl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),rl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),il=new RegExp("^"+el+tl+nl+rl+"$"),al=["material","materials","bones"];function sl(e,t,n){const r=n||ol.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function ol(e,t,n){this.path=t,this.parsedPath=n||ol.parseTrackName(t),this.node=ol.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(sl.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(ol,{Composite:sl,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new ol.Composite(e,t,n):new ol(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Qo,"")},parseTrackName:function(e){const t=il.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==al.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}}),Object.assign(ol.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=ol.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(ol.prototype,{_getValue_unbound:ol.prototype.getValue,_setValue_unbound:ol.prototype.setValue});class ll{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,s=new Array(a),o={endingStart:2400,endingEnd:2400};for(let e=0;e!==a;++e){const t=i[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}}(class extends se{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let h=c[l];if(void 0!==h)a[e]=h;else{if(h=a[e],void 0!==h){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,o,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;h=new Jo(ol.create(n,l,r),i.ValueTypeName,i.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,o,l),a[e]=h}s[e].resultBuffer=h.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Hs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"==typeof e?Ys.findByName(r,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:2500),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new ll(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?Ys.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==n;++s){t[s]._update(r,e,i,a)}const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class cl{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new cl(void 0===this.value.clone?this.value:this.value.clone())}}function hl(e,t,n){ta.call(this,e,t),this.meshPerAttribute=n||1}function ul(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function dl(e,t,n=0,r=1/0){this.ray=new qe(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new at,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function pl(e,t){return e.distance-t.distance}function fl(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)fl(r[e],t,n,!0)}}hl.prototype=Object.assign(Object.create(ta.prototype),{constructor:hl,isInstancedInterleavedBuffer:!0,copy:function(e){return ta.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=ta.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=ta.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(ul.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ul.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(dl.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(e,t=!1,n=[]){return fl(e,this,n,t),n.sort(pl),n},intersectObjects:function(e,t=!1,n=[]){for(let r=0,i=e.length;r<i;r++)fl(e[r],this,n,t);return n.sort(pl),n}});class ml{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ce.clamp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}function gl(e){xt.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}gl.prototype=Object.create(xt.prototype),gl.prototype.constructor=gl,gl.prototype.isImmediateRenderObject=!0;const yl=new _e,vl=new Xe,xl=new Xe;function _l(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,_l(e.children[n]));return t}const bl=new Float32Array(1);new Int32Array(bl.buffer);const wl=new Vt({side:1,depthWrite:!1,depthTest:!1});new Cn(new Dn,wl),oo.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(oo.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Ao.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends Wa{constructor(e=10,t=10,n=4473924,r=8947848){n=new Gt(n),r=new Gt(r);const i=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,c=0,h=-s;e<=t;e++,h+=a){o.push(-s,0,h,s,0,h),o.push(h,0,-s,h,0,s);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new pn;c.setAttribute("position",new nn(o,3)),c.setAttribute("color",new nn(l,3));super(c,new Oa({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Wa{constructor(e){const t=_l(e),n=new pn,r=[],i=[],a=new Gt(0,0,1),s=new Gt(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new nn(r,3)),n.setAttribute("color",new nn(i,3));super(n,new Oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");xl.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(vl.multiplyMatrices(xl,i.matrixWorld),yl.setFromMatrixPosition(vl),r.setXYZ(n,yl.x,yl.y,yl.z),vl.multiplyMatrices(xl,i.parent.matrixWorld),yl.setFromMatrixPosition(vl),r.setXYZ(n+1,yl.x,yl.y,yl.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ks.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Vo(e)},Ks.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Me.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Me.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Me.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Me.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Me.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},He.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},jn.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},ce.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},ce.nearestPowerOfTwo=function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ce.floorPowerOfTwo(e)},ce.nextPowerOfTwo=function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ce.ceilPowerOfTwo(e)},ue.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},ue.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},ue.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ue.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},ue.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ue.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Xe.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Xe.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Xe.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new _e).setFromMatrixColumn(this,3)},Xe.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Xe.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Xe.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Xe.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Xe.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Xe.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Xe.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Xe.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Xe.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Xe.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Xe.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Xe.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Xe.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Xe.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Xe.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},Xe.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Mt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},xe.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},xe.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},qe.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},qe.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},qe.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Nt.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Nt.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Nt.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Nt.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Nt.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Nt.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Nt.getBarycoord(e,t,n,r,i)},Nt.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Nt.getNormal(e,t,n,r)},Po.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Po.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new As(this,e)},Po.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Cs(this,e)},he.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},he.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},he.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_e.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},_e.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},_e.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},_e.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},_e.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},_e.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},_e.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},_e.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},_e.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ye.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ye.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},xt.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},xt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},xt.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},xt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},xt.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(xt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Cn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Cn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(class extends xt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){xa.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(xa);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){xa.setFromMatrixPosition(e.matrixWorld),_a.setFromMatrixPosition(this.matrixWorld);const n=xa.distanceTo(_a)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ra.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ta.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(oo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Hn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ro.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(qt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),qt.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},qt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},qt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},pn.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},pn.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new qt(arguments[1],arguments[2])))},pn.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},pn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},pn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},pn.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},pn.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(pn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Wo.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(dl.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(ta.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),ta.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},ta.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},As.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},As.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},As.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ea.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(cl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ot.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Gt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties($s.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ns.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(zn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Ki.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Ki.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Ki.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Ki.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Ki.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Ki.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Ki.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Ki.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Ki.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Ki.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Ki.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Ki.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Ki.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Ki.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Ki.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Ki.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Ki.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Ki.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Ki.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Ki.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Ki.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Ki.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Ki.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Ki.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Ki.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Ki.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Vi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ve.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(class extends xt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Zo).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Fn.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Fn.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},pe.crossOrigin=void 0,pe.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new so;i.setCrossOrigin(this.crossOrigin);const a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},pe.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new io;i.setCrossOrigin(this.crossOrigin);const a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},pe.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},pe.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"126"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="126");const Ml=e=>({intersecting:2&e,entry:1&e,observer:4&e}),Sl=e=>({intersecting:e[1],entry:e[0],observer:e[2]});function El(e){let t;const n=e[9].default,c=r(n,e,e[8],Sl);return{c(){c&&c.c()},l(e){c&&c.l(e)},m(e,n){c&&c.m(e,n),t=!0},p(e,[r]){c&&c.p&&(!t||263&r)&&i(c,n,e,e[8],t?s(n,e[8],r,Ml):a(e[8]),Sl)},i(e){t||(o(c,e),t=!0)},o(e){l(c,e),t=!1},d(e){c&&c.d(e)}}}function Tl(e,t,n){let{$$slots:r={},$$scope:i}=t,{element:a=null}=t,{once:s=!1}=t,{root:o=null}=t,{rootMargin:l="0px"}=t,{threshold:p=0}=t,{entry:f=null}=t,{intersecting:m=!1}=t,{observer:g=null}=t;const y=c();let v=null;return h((async()=>{null!==f&&(y("observe",f),f.isIntersecting&&(y("intersect",f),s&&g.unobserve(f.target))),await u(),null!==a&&a!==v&&(g.observe(a),null!==v&&g.unobserve(v),v=a)})),d((()=>(n(2,g=new IntersectionObserver((e=>{e.forEach((e=>{n(0,f=e),n(1,m=e.isIntersecting)}))}),{root:o,rootMargin:l,threshold:p})),()=>{g&&g.disconnect()}))),e.$$set=e=>{"element"in e&&n(3,a=e.element),"once"in e&&n(4,s=e.once),"root"in e&&n(5,o=e.root),"rootMargin"in e&&n(6,l=e.rootMargin),"threshold"in e&&n(7,p=e.threshold),"entry"in e&&n(0,f=e.entry),"intersecting"in e&&n(1,m=e.intersecting),"observer"in e&&n(2,g=e.observer),"$$scope"in e&&n(8,i=e.$$scope)},[f,m,g,a,s,o,l,p,i,r]}var Ll=class extends e{constructor(e){super(),t(this,e,Tl,El,n,{element:3,once:4,root:5,rootMargin:6,threshold:7,entry:0,intersecting:1,observer:2})}},Al={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Pl={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Rl=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Cl={CSS:{},springs:{}};function Il(e,t,n){return Math.min(Math.max(e,t),n)}function Dl(e,t){return e.indexOf(t)>-1}function Nl(e,t){return e.apply(null,t)}var $l={arr:function(e){return Array.isArray(e)},obj:function(e){return Dl(Object.prototype.toString.call(e),"Object")},pth:function(e){return $l.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||$l.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return $l.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return $l.hex(e)||$l.rgb(e)||$l.hsl(e)},key:function(e){return!Al.hasOwnProperty(e)&&!Pl.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function Ol(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function zl(e,t){var n=Ol(e),r=Il($l.und(n[0])?1:n[0],.1,100),i=Il($l.und(n[1])?100:n[1],.1,100),a=Il($l.und(n[2])?10:n[2],.1,100),s=Il($l.und(n[3])?0:n[3],.1,100),o=Math.sqrt(i/r),l=a/(2*Math.sqrt(i*r)),c=l<1?o*Math.sqrt(1-l*l):0,h=l<1?(l*o-s)/c:-s+o;function u(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*o)*(1*Math.cos(c*n)+h*Math.sin(c*n)):(1+h*n)*Math.exp(-n*o),0===e||1===e?e:1-n}return t?u:function(){var t=Cl.springs[e];if(t)return t;for(var n=1/6,r=0,i=0;;)if(1===u(r+=n)){if(++i>=16)break}else i=0;var a=r*n*1e3;return Cl.springs[e]=a,a}}function Bl(e){return void 0===e&&(e=10),function(t){return Math.ceil(Il(t,1e-6,1)*e)*(1/e)}}var Hl,Fl,Ul=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,a){return((t(i,a)*e+n(i,a))*e+r(i))*e}function a(e,i,a){return 3*t(i,a)*e*e+2*n(i,a)*e+r(i)}return function(t,n,r,s){if(0<=t&&t<=1&&0<=r&&r<=1){var o=new Float32Array(11);if(t!==n||r!==s)for(var l=0;l<11;++l)o[l]=i(l*e,t,r);return function(e){return t===n&&r===s||0===e||1===e?e:i(c(e),n,s)}}function c(n){for(var s=0,l=1;10!==l&&o[l]<=n;++l)s+=e;--l;var c=s+(n-o[l])/(o[l+1]-o[l])*e,h=a(c,t,r);return h>=.001?function(e,t,n,r){for(var s=0;s<4;++s){var o=a(t,n,r);if(0===o)return t;t-=(i(t,n,r)-e)/o}return t}(n,c,t,r):0===h?c:function(e,t,n,r,a){var s,o,l=0;do{(s=i(o=t+(n-t)/2,r,a)-e)>0?n=o:t=o}while(Math.abs(s)>1e-7&&++l<10);return o}(n,s,s+e,t,r)}}}(),kl=(Hl={linear:function(){return function(e){return e}}},Fl={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=Il(e,1,10),r=Il(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){Fl[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(Fl).forEach((function(e){var t=Fl[e];Hl["easeIn"+e]=t,Hl["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},Hl["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}},Hl["easeOutIn"+e]=function(e,n){return function(r){return r<.5?(1-t(e,n)(1-2*r))/2:(t(e,n)(2*r-1)+1)/2}}})),Hl);function Gl(e,t){if($l.fnc(e))return e;var n=e.split("(")[0],r=kl[n],i=Ol(e);switch(n){case"spring":return zl(e,t);case"cubicBezier":return Nl(Ul,i);case"steps":return Nl(Bl,i);default:return Nl(r,i)}}function Vl(e){try{return document.querySelectorAll(e)}catch(e){return}}function Wl(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,i=[],a=0;a<n;a++)if(a in e){var s=e[a];t.call(r,s,a,e)&&i.push(s)}return i}function jl(e){return e.reduce((function(e,t){return e.concat($l.arr(t)?jl(t):t)}),[])}function ql(e){return $l.arr(e)?e:($l.str(e)&&(e=Vl(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Xl(e,t){return e.some((function(e){return e===t}))}function Yl(e){var t={};for(var n in e)t[n]=e[n];return t}function Zl(e,t){var n=Yl(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function Jl(e,t){var n=Yl(e);for(var r in t)n[r]=$l.und(e[r])?t[r]:e[r];return n}function Ql(e){return $l.rgb(e)?function(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):$l.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):$l.hsl(e)?function(e){var t,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(i[1],10)/360,s=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,l=i[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==s)t=n=r=o;else{var h=o<.5?o*(1+s):o+s-o*s,u=2*o-h;t=c(u,h,a+1/3),n=c(u,h,a),r=c(u,h,a-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+l+")"}(e):void 0}function Kl(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function ec(e,t){return $l.fnc(e)?e(t.target,t.id,t.total):e}function tc(e,t){return e.getAttribute(t)}function nc(e,t,n){if(Xl([n,"deg","rad","turn"],Kl(t)))return t;var r=Cl.CSS[t+n];if(!$l.und(r))return r;var i=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(i),i.style.position="absolute",i.style.width=100+n;var s=100/i.offsetWidth;a.removeChild(i);var o=s*parseFloat(t);return Cl.CSS[t+n]=o,o}function rc(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?nc(e,i,n):i}}function ic(e,t){return $l.dom(e)&&!$l.inp(e)&&(!$l.nil(tc(e,t))||$l.svg(e)&&e[t])?"attribute":$l.dom(e)&&Xl(Rl,t)?"transform":$l.dom(e)&&"transform"!==t&&rc(e,t)?"css":null!=e[t]?"object":void 0}function ac(e){if($l.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;t=r.exec(n);)i.set(t[1],t[2]);return i}}function sc(e,t,n,r){var i=Dl(t,"scale")?1:0+function(e){return Dl(e,"translate")||"perspective"===e?"px":Dl(e,"rotate")||Dl(e,"skew")?"deg":void 0}(t),a=ac(e).get(t)||i;return n&&(n.transforms.list.set(t,a),n.transforms.last=t),r?nc(e,a,r):a}function oc(e,t,n,r){switch(ic(e,t)){case"transform":return sc(e,t,r,n);case"css":return rc(e,t,n);case"attribute":return tc(e,t);default:return e[t]||0}}function lc(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=Kl(e)||0,i=parseFloat(t),a=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+a+r;case"-":return i-a+r;case"*":return i*a+r}}function cc(e,t){if($l.col(e))return Ql(e);if(/\s/g.test(e))return e;var n=Kl(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function hc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function uc(e){for(var t,n=e.points,r=0,i=0;i<n.numberOfItems;i++){var a=n.getItem(i);i>0&&(r+=hc(t,a)),t=a}return r}function dc(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*tc(e,"r")}(e);case"rect":return function(e){return 2*tc(e,"width")+2*tc(e,"height")}(e);case"line":return function(e){return hc({x:tc(e,"x1"),y:tc(e,"y1")},{x:tc(e,"x2"),y:tc(e,"y2")})}(e);case"polyline":return uc(e);case"polygon":return function(e){var t=e.points;return uc(e)+hc(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function pc(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;$l.svg(t)&&$l.svg(t.parentNode);)t=t.parentNode;return t}(e),i=r.getBoundingClientRect(),a=tc(r,"viewBox"),s=i.width,o=i.height,l=n.viewBox||(a?a.split(" "):[0,0,s,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s,h:o,vW:l[2],vH:l[3]}}function fc(e,t,n){function r(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var i=pc(e.el,e.svg),a=r(),s=r(-1),o=r(1),l=n?1:i.w/i.vW,c=n?1:i.h/i.vH;switch(e.property){case"x":return(a.x-i.x)*l;case"y":return(a.y-i.y)*c;case"angle":return 180*Math.atan2(o.y-s.y,o.x-s.x)/Math.PI}}function mc(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=cc($l.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:$l.str(e)||t?r.split(n):[]}}function gc(e){return Wl(e?jl($l.arr(e)?e.map(ql):ql(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function yc(e){var t=gc(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:ac(e)}}}))}function vc(e,t){var n=Yl(t);if(/^spring/.test(n.easing)&&(n.duration=zl(n.easing)),$l.arr(e)){var r=e.length;2===r&&!$l.obj(e[0])?e={value:e}:$l.fnc(t.duration)||(n.duration=t.duration/r)}var i=$l.arr(e)?e:[e];return i.map((function(e,n){var r=$l.obj(e)&&!$l.pth(e)?e:{value:e};return $l.und(r.delay)&&(r.delay=n?0:t.delay),$l.und(r.endDelay)&&(r.endDelay=n===i.length-1?t.endDelay:0),r})).map((function(e){return Jl(e,n)}))}function xc(e,t){var n=[],r=t.keyframes;for(var i in r&&(t=Jl(function(e){for(var t=Wl(jl(e.map((function(e){return Object.keys(e)}))),(function(e){return $l.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var i=t[r];n[i]=e.map((function(e){var t={};for(var n in e)$l.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t}))},i=0;i<t.length;i++)r(i);return n}(r),t)),t)$l.key(i)&&n.push({name:i,tweens:vc(t[i],e)});return n}function _c(e,t){var n;return e.tweens.map((function(r){var i=function(e,t){var n={};for(var r in e){var i=ec(e[r],t);$l.arr(i)&&1===(i=i.map((function(e){return ec(e,t)}))).length&&(i=i[0]),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),a=i.value,s=$l.arr(a)?a[1]:a,o=Kl(s),l=oc(t.target,e.name,o,t),c=n?n.to.original:l,h=$l.arr(a)?a[0]:c,u=Kl(h)||Kl(l),d=o||u;return $l.und(s)&&(s=c),i.from=mc(h,d),i.to=mc(lc(s,h),d),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Gl(i.easing,i.duration),i.isPath=$l.pth(a),i.isPathTargetInsideSVG=i.isPath&&$l.svg(t.target),i.isColor=$l.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}var bc={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){var a="";r.list.forEach((function(e,t){a+=t+"("+e+") "})),e.style.transform=a}}};function wc(e,t){yc(e).forEach((function(e){for(var n in t){var r=ec(t[n],e),i=e.target,a=Kl(r),s=oc(i,n,a,e),o=lc(cc(r,a||Kl(s)),s),l=ic(i,n);bc[l](i,n,o,e.transforms,!0)}}))}function Mc(e,t){return Wl(jl(e.map((function(e){return t.map((function(t){return function(e,t){var n=ic(e.target,t.name);if(n){var r=_c(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!$l.und(e)}))}function Sc(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,i.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,i.endDelay=n?i.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,i}var Ec=0;var Tc=[],Lc=function(){var e;function t(n){for(var r=Tc.length,i=0;i<r;){var a=Tc[i];a.paused?(Tc.splice(i,1),r--):(a.tick(n),i++)}e=i>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){Pc.suspendWhenDocumentHidden&&(Ac()?e=cancelAnimationFrame(e):(Tc.forEach((function(e){return e._onDocumentVisibility()})),Lc()))})),function(){e||Ac()&&Pc.suspendWhenDocumentHidden||!(Tc.length>0)||(e=requestAnimationFrame(t))}}();function Ac(){return!!document&&document.hidden}function Pc(e){void 0===e&&(e={});var t,n=0,r=0,i=0,a=0,s=null;function o(e){var t=window.Promise&&new Promise((function(e){return s=e}));return e.finished=t,t}var l=function(e){var t=Zl(Al,e),n=Zl(Pl,e),r=xc(n,e),i=yc(e.targets),a=Mc(i,r),s=Sc(a,n),o=Ec;return Ec++,Jl(t,{id:o,children:[],animatables:i,animations:a,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}(e);function c(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function h(e){return l.reversed?l.duration-e:e}function u(){n=0,r=h(l.currentTime)*(1/Pc.speed)}function d(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){for(var t=0,n=l.animations,r=n.length;t<r;){var i=n[t],a=i.animatable,s=i.tweens,o=s.length-1,c=s[o];o&&(c=Wl(s,(function(t){return e<t.end}))[0]||c);for(var h=Il(e-c.start-c.delay,0,c.duration)/c.duration,u=isNaN(h)?1:c.easing(h),d=c.to.strings,p=c.round,f=[],m=c.to.numbers.length,g=void 0,y=0;y<m;y++){var v=void 0,x=c.to.numbers[y],_=c.from.numbers[y]||0;v=c.isPath?fc(c.value,u*x,c.isPathTargetInsideSVG):_+u*(x-_),p&&(c.isColor&&y>2||(v=Math.round(v*p)/p)),f.push(v)}var b=d.length;if(b){g=d[0];for(var w=0;w<b;w++){d[w];var M=d[w+1],S=f[w];isNaN(S)||(g+=M?S+M:S+" ")}}else g=f[0];bc[i.type](a.target,i.property,g,a.transforms),i.currentValue=g,t++}}function f(e){l[e]&&!l.passThrough&&l[e](l)}function m(e){var u=l.duration,m=l.delay,g=u-l.endDelay,y=h(e);l.progress=Il(y/u*100,0,100),l.reversePlayback=y<l.currentTime,t&&function(e){if(l.reversePlayback)for(var n=a;n--;)d(e,t[n]);else for(var r=0;r<a;r++)d(e,t[r])}(y),!l.began&&l.currentTime>0&&(l.began=!0,f("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,f("loopBegin")),y<=m&&0!==l.currentTime&&p(0),(y>=g&&l.currentTime!==u||!u)&&p(u),y>m&&y<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,f("changeBegin")),f("change"),p(y)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,f("changeComplete")),l.currentTime=Il(y,0,u),l.began&&f("update"),e>=u&&(r=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(n=i,f("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&c()):(l.paused=!0,l.completed||(l.completed=!0,f("loopComplete"),f("complete"),!l.passThrough&&"Promise"in window&&(s(),o(l)))))}return o(l),l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var n=a=t.length;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=u,l.set=function(e,t){return wc(e,t),l},l.tick=function(e){i=e,n||(n=i),m((i+(r-n))*Pc.speed)},l.seek=function(e){m(h(e))},l.pause=function(){l.paused=!0,u()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Tc.push(l),u(),Lc())},l.reverse=function(){c(),l.completed=!l.reversed,u()},l.restart=function(){l.reset(),l.play()},l.remove=function(e){Cc(gc(e),l)},l.reset(),l.autoplay&&l.play(),l}function Rc(e,t){for(var n=t.length;n--;)Xl(e,t[n].animatable.target)&&t.splice(n,1)}function Cc(e,t){var n=t.animations,r=t.children;Rc(e,n);for(var i=r.length;i--;){var a=r[i],s=a.animations;Rc(e,s),s.length||a.children.length||r.splice(i,1)}n.length||r.length||t.pause()}Pc.version="3.2.1",Pc.speed=1,Pc.suspendWhenDocumentHidden=!0,Pc.running=Tc,Pc.remove=function(e){for(var t=gc(e),n=Tc.length;n--;){Cc(t,Tc[n])}},Pc.get=oc,Pc.set=wc,Pc.convertPx=nc,Pc.path=function(e,t){var n=$l.str(e)?Vl(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:pc(n),totalLength:dc(n)*(r/100)}}},Pc.setDashoffset=function(e){var t=dc(e);return e.setAttribute("stroke-dasharray",t),t},Pc.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?Gl(t.easing):null,i=t.grid,a=t.axis,s=t.from||0,o="first"===s,l="center"===s,c="last"===s,h=$l.arr(e),u=h?parseFloat(e[0]):parseFloat(e),d=h?parseFloat(e[1]):0,p=Kl(h?e[1]:e)||0,f=t.start||0+(h?u:0),m=[],g=0;return function(e,t,y){if(o&&(s=0),l&&(s=(y-1)/2),c&&(s=y-1),!m.length){for(var v=0;v<y;v++){if(i){var x=l?(i[0]-1)/2:s%i[0],_=l?(i[1]-1)/2:Math.floor(s/i[0]),b=x-v%i[0],w=_-Math.floor(v/i[0]),M=Math.sqrt(b*b+w*w);"x"===a&&(M=-b),"y"===a&&(M=-w),m.push(M)}else m.push(Math.abs(s-v));g=Math.max.apply(Math,m)}r&&(m=m.map((function(e){return r(e/g)*g}))),"reverse"===n&&(m=m.map((function(e){return a?e<0?-1*e:-e:Math.abs(g-e)})))}return f+(h?(d-u)/g:u)*(Math.round(100*m[t])/100)+p}},Pc.timeline=function(e){void 0===e&&(e={});var t=Pc(e);return t.duration=0,t.add=function(n,r){var i=Tc.indexOf(t),a=t.children;function s(e){e.passThrough=!0}i>-1&&Tc.splice(i,1);for(var o=0;o<a.length;o++)s(a[o]);var l=Jl(n,Zl(Pl,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=$l.und(r)?c:lc(r,c),s(t),t.seek(l.timelineOffset);var h=Pc(l);s(h),a.push(h);var u=Sc(a,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Pc.easing=Gl,Pc.penner=kl,Pc.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Ic=[{year:"2491",name:"เจ้าพระยาศรีธรรมาธิเบศ"},{year:"2491",name:"พระยาเทพวิทุร"},{year:"2491",name:"พล. โท. พระยาเทพหัสดิน"},{year:"2491",name:"หลวงประกอบนิติสาร"},{year:"2491",name:"พระชัยปัญญา"},{year:"2491",name:"พระยากฤตราชทรงสวัสดิ์"},{year:"2491",name:"พระยาสาริกพงศ์ธรรมพิลาส"},{year:"2491",name:"หม่อมเจ้าเฉลิมศรีจันทรทัต จันทรทัต"},{year:"2491",name:"พระยาปรีดานฤเบศร์"},{year:"2491",name:"พระยาศรีธรรมราช"},{year:"2491",name:"หม่อมราชวงศ์เสนีย์ ปราโมช"},{year:"2491",name:"หม่อมเจ้าสิทธิพร กฤดากร"},{year:"2491",name:"นายเกษม บุญศรี"},{year:"2491",name:"ขุนคงฤทธิ์ศึกษากร"},{year:"2491",name:"หลวงอังคณานุรักษ์"},{year:"2491",name:"นายบุญเท่ง ทองสวัสดิ์"},{year:"2491",name:"นายเพียร ราชธรรมนิเทศ"},{year:"2491",name:"นายชวลิต อภัยวงศ์"},{year:"2491",name:"ร้อยโท สมพันธุ์ ขันธะชวนะ"},{year:"2491",name:"นายเทพ โชตินุชิต"},{year:"2491",name:"นายเกษม ดำรงบุล"},{year:"2491",name:"พระยาอรรถพิทย์พิศาล"},{year:"2491",name:"หม่อมเจ้ามงคลอุดม ชยางกูร"},{year:"2491",name:"นายหลุย คีรีวัต"},{year:"2491",name:"นายจงใจภักดิ์"},{year:"2491",name:"พระยาอรรถการีย์นิพนธ์"},{year:"2491",name:"พระยาศรีวิสารวาจา"},{year:"2491",name:"นาวาเอก พระยาศราภัยพิพัฒ"},{year:"2491",name:"พันเอก ก้าน จำนงภูมิเวท"},{year:"2491",name:"พล. โท. จิระ วิชิตสงคราม"},{year:"2491",name:"พล. โท. ชิต มั่นศิลป์ สินาดโยธารักษ์"},{year:"2491",name:"นายสุวิชช พันธเศรษฐ์"},{year:"2491",name:"นายอินทร สิงหเนตร์"},{year:"2491",name:"พลเรือตรี เล็ก สุมิตร"},{year:"2491",name:"นายทองม้วน อัตถากร"},{year:"2491",name:"นายหยุด แสงอุทัย"},{year:"2491",name:"นายโชติ คุ้มพันธ์"},{year:"2491",name:"หม่อมราชวงศ์สุมนชาติ สวัสดิกุล"},{year:"2491",name:"พันตรี หลวงสรสิทธยานุการ"},{year:"2491",name:"ขุนประเสริฐศุภมาตรา"},{year:"2502",name:"นายกมล พหลโยธิน\r"},{year:"2502",name:"พันโท กมล พิจิตรคดีพล\r"},{year:"2502",name:"นายกมล วรรณประภา\r"},{year:"2502",name:"พลเรือตรี กมล สีตะกลิน\r"},{year:"2502",name:"นาวาเอก กวี สิงหะ"},{year:"2502",name:"พันตรี กระวี สุทัศน์ ณ อยุธยา"},{year:"2502",name:"นายเกษม ศรีพยัคฆ์"},{year:"2502",name:"นายเกษม อุทยานิน\r"},{year:"2502",name:"นายพลตำรวจจัตวา กระเษียร ศรุตานนท์\r"},{year:"2502",name:"นาวาอากาศเอก กระแสร์ อินทรัตน์\r"},{year:"2502",name:"พลโท กฤช ปุณณกันต์"},{year:"2502",name:"นาวาอากาศตรี กฤตยา สังขพิชัย\r"},{year:"2502",name:"พลตรี กฤษณ์ สีวะรา"},{year:"2502",name:"พันเอก เกรียงไกร อัตตะนันทน์\r"},{year:"2502",name:"พลจัตวา โกศล อ่อนสุวรรณ"},{year:"2502",name:"นาวาอากาศเอก ไกวัลย์ ถาวรธาร"},{year:"2502",name:"พลโท หลวงกัมปนาทแสนยากร"},{year:"2502",name:"พันตรี ขุนทะยานราญรอน"},{year:"2502",name:"พลตรี ขุนเสนาทิพ\r"},{year:"2502",name:"หม่อมราชวงศ์คึกฤทธิ์ ปราโมช"},{year:"2502",name:"พลเอก ครวญ สุทธานินทร์\r"},{year:"2502",name:"พลเรือตรี จรัส บุญบงการ"},{year:"2502",name:"พลเรือตรี จรูญ เฉลิมเตียรณ\r"},{year:"2502",name:"นาวาโท เจริญ รัชตชาติ"},{year:"2502",name:"นายเจริญ ปัณฑโร"},{year:"2502",name:"พันเอก จินดา ณ สงขลา\r"},{year:"2502",name:"พลจัตวา จิตต์ สุนทานนท์"},{year:"2502",name:"พันเอก จิตต์ ธนะโชติ"},{year:"2502",name:"พันโท จิตต์กวี เกษะโกมล"},{year:"2502",name:"พลโท จิตติ นาวีเสถียร"},{year:"2502",name:"นายจิตติ สุจริตกุล\r"},{year:"2502",name:"พลตรี จำเป็น จารุเสถียร"},{year:"2502",name:"นายพลตำรวจตรี จำรัส มัณฑุกานนท์"},{year:"2502",name:"นายจำลอง หะรินสุต\r"},{year:"2502",name:"นายจ่าง รัตนะรัต\r"},{year:"2502",name:"พลโท เจียม ญาโณทัย\r"},{year:"2502",name:"พลเอก หลวงจุลยุทธ์ยรรยง"},{year:"2502",name:"พันเอก จุมพล ทองทาบ\r"},{year:"2502",name:"นายพลตำรวจตรี ฉัตร หนุนภักดี"},{year:"2502",name:"พลโท ฉลอง อุชุโกมล\r"},{year:"2502",name:"นายฉลอง ปึงตระกูล\r"},{year:"2502",name:"นายเฉลิม พรมมาศ\r"},{year:"2502",name:"พลอากาศเอก เฉลิมเกียรติ วัฒนางกูร"},{year:"2502",name:"พันเอก เฉลิมชัย จารุวัสตร์"},{year:"2502",name:"พลโท ชลอ จารุกลัส\r"},{year:"2502",name:"พลเรือตรี ชลี สินธุโสภณ\r"},{year:"2502",name:"นายพลตำรวจจัตวา ชาญ อังศุโชติ\r"},{year:"2502",name:"นาวาอากาศโท ชาญชาย สังขเนตร"},{year:"2502",name:"พันตรี ชาญชัย วิเศษกุล\r"},{year:"2502",name:"พลเรือเอก หลวงชำนาญอรรถยุทธ์"},{year:"2502",name:"พันตรี ชำนาญ มณีวัตร"},{year:"2502",name:"นายชำนาญ ยุวบูรณ์\r"},{year:"2502",name:"นายพลตำรวจเอก หลวงชาติตระการโกศล\r"},{year:"2502",name:"พลเรือตรี ชื้น สนแจ้ง"},{year:"2502",name:"พันเอก เชิดชัย ทองสิงห์"},{year:"2502",name:"นาวาเอก เฉิดชาย ถมยา"},{year:"2502",name:"พันเอก โชติ หิรัณยัษฐิติ"},{year:"2502",name:"นาวาอากาศเอก ชู สุทธิโชติ"},{year:"2502",name:"นายชู ณ ลำปาง\r"},{year:"2502",name:"นายชู ประภาสถิต"},{year:"2502",name:"นาวาอากาศเอก ชูเดช ดวงอุดม"},{year:"2502",name:"พันตรี ชูวิทย์ เก่งถนอมม้า\r"},{year:"2502",name:"พลเรือจัตวา ดาว เพชรชาติ"},{year:"2502",name:"นายดิเรก ชัยนาม"},{year:"2502",name:"นายเดชชาติ วงศ์โกมลเชษฐ"},{year:"2502",name:"หลวงดำรงดุริตเรข"},{year:"2502",name:"นายพันตำรวจเอก ต่อศักดิ์ ยมนาค"},{year:"2502",name:"พลตรี ถนอม ปัทมานนท์\r"},{year:"2502",name:"นายถวิล สุนทรศารทูล"},{year:"2502",name:"นายแถบ นีละนิธิ"},{year:"2502",name:"พลจัตวา ธงเจิม ศังขวณิช\r"},{year:"2502",name:"นายทวี แรงขำ"},{year:"2502",name:"นายทวี บุณยเกตุ"},{year:"2502",name:"พลตรี ทวิช เสนีวงศ์ ณ อยุธยา\r"},{year:"2502",name:"พลอากาศตรี เทพ เกษมุติ\r"},{year:"2502",name:"พันตรี เทียนชัย ศิริสัมพันธ์"},{year:"2502",name:"พลจัตวา ทวนชัย โกศินานนท์\r"},{year:"2502",name:"หม่อมราชวงศ์ทองแท่ง ทองแถม"},{year:"2502",name:"พลอากาศโท นักรบ บิณษรี"},{year:"2502",name:"พันโท นิลนนท์ กระหม่อมทอง\r"},{year:"2502",name:"พลเรือตรี นัย นพคุณ\r"},{year:"2502",name:"พลตรี เนตร เขมะโยธิน"},{year:"2502",name:"พลอากาศเอก บุญชู จันทรุเบกษา"},{year:"2502",name:"พลจัตวา บุญชัย บำรุงพงศ์"},{year:"2502",name:"พันเอก บุญมาก เทศบุตร"},{year:"2502",name:"พันเอก บุญเรือน บัวจรูญ\r"},{year:"2502",name:"นาวาอากาศตรี บุญเปรียบ ดวงอุไร\r"},{year:"2502",name:"นายบุญชนะ อัตถากร"},{year:"2502",name:"นายบุญรอด บิณฑสันต์"},{year:"2502",name:"นายบรรเจิด ชลวิจารณ์"},{year:"2502",name:"นายพลตำรวจตรี บันลือ เรืองตระกูล"},{year:"2502",name:"พลโท บัญญัติ เทพหัสดิน ณ อยุธยา"},{year:"2502",name:"นายพลตำรวจตรี ประจวบ กีรติบุตร"},{year:"2502",name:"พันเอก ประจวบ สุนทรางกูร"},{year:"2502",name:"พลเอก พระประจนปัจจนึก\r"},{year:"2502",name:"นายพลตำรวจตรี ประชา บูรณธนิต"},{year:"2502",name:"พลตรี ประทักษ์ จันทราภา"},{year:"2502",name:"พันตรี ประเทียบ เทศวิศาล\r"},{year:"2502",name:"พันเอก ประเทือง อารีนิจ"},{year:"2502",name:"พลโท ประพันธ์ กุลพิจิตร"},{year:"2502",name:"พลตรี ประมาณ อดิเรกสาร"},{year:"2502",name:"พันเอก ประลอง วีระปรีย\r"},{year:"2502",name:"พันตรี ประหยัด รอดโพธิ์ทอง"},{year:"2502",name:"พันโท ประยุทธ จารุมณี"},{year:"2502",name:"นาวาโท ประสาท พรหมประวัติ\r"},{year:"2502",name:"พลจัตวา ประยูร หนุนภักดี"},{year:"2502",name:"พันตรี ประสงค์ กรีกุล\r"},{year:"2502",name:"นายประสงค์ บุญเจิม\r"},{year:"2502",name:"นายพลตำรวจโท ประเสริฐ รุจิรวงศ์"},{year:"2502",name:"พันเอก ประเสริฐ ธรรมศิริ"},{year:"2502",name:"พันเอก ประเสริฐ วงษ์สุวรรณ"},{year:"2502",name:"พันเอก เปรม ติณสูลานนท์"},{year:"2502",name:"หม่อมหลวงปืนไทย มาลากุล"},{year:"2502",name:"พลโท ปรุง รังสิยานนท์"},{year:"2502",name:"พลตรี ปุ่น ปุณยฤทธิเสนีย์"},{year:"2502",name:"นายป๋วย อึ๊งภากรณ์"},{year:"2502",name:"พลตรี ผเชิญ นิมิบุตร"},{year:"2502",name:"พลเรือโท ผิว มีคุณเอี่ยม\r"},{year:"2502",name:"จอมพล ผิน ชุณหะวัณ"},{year:"2502",name:"พลโท พจน์ บูรณศิลปิน"},{year:"2502",name:"พลจัตวา พร พิศกนก"},{year:"2502",name:"พันเอก พร ธนะภูมิ\r"},{year:"2502",name:"พันตรี ไพศาล รุ่งแสง"},{year:"2502",name:"พันเอก พงษ์ เภกะนันทน์"},{year:"2502",name:"พันเอก พึ่ง พินทุโยธิน"},{year:"2502",name:"พลอากาศตรี พิชิต บุณยเสนา"},{year:"2502",name:"นาวาอากาศเอก พโยม เย็นสุดใจ"},{year:"2502",name:"นาวาอากาศโท พิน เจริญสุข"},{year:"2502",name:"นายพันตำรวจเอก พจน์ เภกะนันทน์"},{year:"2502",name:"นายพันตำรวจเอก พยงค์ สมิติ"},{year:"2502",name:"นายพ่วง สุวรรณรัฐ"},{year:"2502",name:"นายพงษ์สวัสดิ์ สุริโยทัย"},{year:"2502",name:"นายพิศ ปัญญาลักษณ์"},{year:"2502",name:"พลตรี ฟอง ประมวญรัตน์\r"},{year:"2502",name:"พลจัตวา เฟื้อ ฤทธาคนี\r"},{year:"2502",name:"นาวาอากาศโท มานะ สังขวิจิตร"},{year:"2502",name:"นายพันตำรวจเอก ไมตรี บัณเย็น"},{year:"2502",name:"นายมนูญ บริสุทธิ์"},{year:"2502",name:"พลอากาศโท มุนี มหาสันทนะ เวชยันตรังสฤษฏ์\r"},{year:"2502",name:"นายมาลัย หุวะนันทน์"},{year:"2502",name:"นายมาลัย ชูพินิจ"},{year:"2502",name:"พันเอก ยศ เทพหัสดิน ณ อยุธยา"},{year:"2502",name:"พันตรี ยุทธศักดิ์ คล่องตรวจโรค\r"},{year:"2502",name:"นายพลตำรวจตรี เยื้อน ประภาวัต\r"},{year:"2502",name:"พลโท รัศมี รัชนิวัต"},{year:"2502",name:"พลตรี ละม้าย อุทยานานนท์"},{year:"2502",name:"นายเล็ก จุณณานนท์\r"},{year:"2502",name:"นายเล้ง ศรีสมวงศ์"},{year:"2502",name:"พลตรี วิชัย พงศ์อนันต์"},{year:"2502",name:"พันโท วิชัย สังขทัต ณ อยุธยา"},{year:"2502",name:"พลเรือตรี วิเชียร พันธุ์โภคา\r"},{year:"2502",name:"พลอากาศตรี วงศ์ พุ่มพูลผล\r"},{year:"2502",name:"นาวาอากาศตรี วิเทพ จิตตะเสนีย์"},{year:"2502",name:"หลวงวุฒิศักดิ์เนตินาท"},{year:"2502",name:"พันเอก วิรัช เพ็ชรโยธิน\r"},{year:"2502",name:"นายวิสูตร อรรถยุกติ"},{year:"2502",name:"นายวิทย์ ศิวะศริยานนท์"},{year:"2502",name:"พันเอก หลวงวิจิตรวาทการ"},{year:"2502",name:"นายวัฒนา อิศรภักดี"},{year:"2502",name:"พันเอก นายวรการบัญชา"},{year:"2502",name:"พันตรี วิลาส โอสถานนท์"},{year:"2502",name:"นายวิบูลย์ ธรรมบุตร"},{year:"2502",name:"นายวีกิจ วีรานุวัตติ์"},{year:"2502",name:"พันเอก ศักดิ์ พิศิษฏพงศ์"},{year:"2502",name:"พันโท ศิริ ถิรพัฒน์"},{year:"2502",name:"พลเรือตรี ศรี ดาวราย"},{year:"2502",name:"พลอากาศตรี ศิริ เมืองมณี\r"},{year:"2502",name:"นายพันตำรวจเอก ศรีสุข มหินทรเทพ"},{year:"2502",name:"พลเอก สุทธิ์ สุทธิสารรณกร"},{year:"2502",name:"นายพลตำรวจเอก ไสว ไสวแสนยากร\r"},{year:"2502",name:"พลโท สุรใจ พูลทรัพย์"},{year:"2502",name:"พลเรือโท สนอง ธนศักดิ์"},{year:"2502",name:"พลโท สุรจิต จารุเศรนี"},{year:"2502",name:"พลจัตวา สุรกิจ มัยลาภ"},{year:"2502",name:"พลตรี เสถียร พจนานนท์"},{year:"2502",name:"พลโท สนิท สนิทยุทธการ ไทยานนท์"},{year:"2502",name:"พลเอก หลวงสวัสดิ์กลยุทธ"},{year:"2502",name:"พลเอก หลวงสถิตยุทธการ"},{year:"2502",name:"พันตรี สิงห์ นาควัชระ\r"},{year:"2502",name:"พันโท แสวง ขมะสุนทร"},{year:"2502",name:"พันตรี สัมผัส พาสนยงภิญโญ"},{year:"2502",name:"พันเอก สมศักดิ์ ปัญจมานนท์\r"},{year:"2502",name:"พันตรี สุรินทร์ ผลประไพ"},{year:"2502",name:"พันตรี สันต์ ศรแมน"},{year:"2502",name:"พันโท แสวง จามรจันทร์"},{year:"2502",name:"พันเอก สิทธิ ศิลปสุขุม"},{year:"2502",name:"พันเอก สัมฤทธิ์ แพทย์เจริญ"},{year:"2502",name:"พลจัตวา สุภชัย สุรวรรธนะ"},{year:"2502",name:"พันตรี สำราญ ศิริณรงค์"},{year:"2502",name:"พลเรือตรี สวัสดิ์ ภูติอนันต์\r"},{year:"2502",name:"พลเรือจัตวา สนิท โปษะกฤษณะ\r"},{year:"2502",name:"นาวาเอก สงัด ชลออยู่"},{year:"2502",name:"นาวาเอก สนอง นิสาลักษณ์\r"},{year:"2502",name:"พลเรือตรี เสงี่ยม บุญมา\r"},{year:"2502",name:"นาวาตรี สวัสดิ์ พูลสุข"},{year:"2502",name:"นาวาตรี สมาน กอนแก้ว"},{year:"2502",name:"พลอากาศตรี สวัสดิ์ พรชำนิ"},{year:"2502",name:"นาวาอากาศเอก สุรยุทธ รุ่งสว่าง"},{year:"2502",name:"ว่าที่นาวาอากาศตรี สุพจน์ เทพกาญจนา"},{year:"2502",name:"ว่าที่นายพันตำรวจเอก สำราญ กรัดศิริ"},{year:"2502",name:"พลโท ไสว ดวงมณี"},{year:"2502",name:"พันเอก สุข เปรุนาวิน"},{year:"2502",name:"นายสัญญา ธรรมศักดิ์"},{year:"2502",name:"นายเสกล บุณยัษฐิติ"},{year:"2502",name:"นายสมพร โหตระกิตย์"},{year:"2502",name:"พันโท สนอง ถมังรักษ์สัตว์\r"},{year:"2502",name:"นายเสริม วินิจฉัยกุล\r"},{year:"2502",name:"นายพันตำรวจโท สง่า กิตติขจร"},{year:"2502",name:"พลเรือจัตวา จวบ หงสกุล\r"},{year:"2502",name:"นายสิริ ปกาสิต"},{year:"2502",name:"พันเอก แสวง เสนาณรงค์"},{year:"2502",name:"พันตรี สุรินทร์ ชลประเสริฐ"},{year:"2502",name:"พันตรี สม ขัตพันธุ์\r"},{year:"2502",name:"นายสงวน จันทรสาขา"},{year:"2502",name:"นายสุกิจ นิมมานเหมินทร์"},{year:"2502",name:"หลวงสัมฤทธิ์วิศวกรรม"},{year:"2502",name:"พระยาสุนทรพิพิธ\r"},{year:"2502",name:"นายสมัย เรืองไกร"},{year:"2502",name:"นายสุรจิตต์ จันทรสาขา"},{year:"2502",name:"พันเอก อร่าม เมนะคงคา"},{year:"2502",name:"พลตรี อัมพร จินตกานนท์"},{year:"2502",name:"พลตรี อำนวย ไชยโรจน์"},{year:"2502",name:"พลจัตวา อรรถ ศศิประภา\r"},{year:"2502",name:"พันโท เอื้อม จิรพงศ์"},{year:"2502",name:"พันโท อรุณ ทวาทศิน"},{year:"2502",name:"พันตรี อัมพร ศรีแสง"},{year:"2502",name:"พลจัตวา อัครเดช ยงยุทธ"},{year:"2502",name:"พลเรือตรี อนันต์ เนตรโรจน์"},{year:"2502",name:"นาวาโท โอภาศ จามิกรณ์"},{year:"2502",name:"นาวาอากาศเอก เอกชัย มุสิกบุตร\r"},{year:"2502",name:"ว่าที่นาวาอากาศโท อุทัย วัฒนวิจารณ์\r"},{year:"2502",name:"หลวงอรรถปรีชาชนูปการ\r"},{year:"2502",name:"หลวงอรรถโกวิทวที"},{year:"2502",name:"หลวงอรรถไกวัลวที"},{year:"2502",name:"นายอินทรี จันทรสถิตย์\r"},{year:"2502",name:"พลเรือตรี ถวัลย์ ธำรงนาวาสวัสดิ์"},{year:"2502",name:"นาวาอากาศเอก ชิตชัย สุวรรณพฤกษ์"},{year:"2502",name:"พระตีรณสารวิศวกรรม\r"},{year:"2502",name:"หลวงถวิลเศรษฐพณิชยการ\r"},{year:"2502",name:"หลวงประกอบนิติสาร"},{year:"2539",name:"นายกมล สุขคะสมบัติ"},{year:"2539",name:"ศาสตราจารย์กระมล ทองธรรมชาติ"},{year:"2539",name:"ศาสตราจารย์เกริกเกียรติ พิพัฒน์เสรีธรรม"},{year:"2539",name:"นายเกษม พันธุรัตน์\r"},{year:"2539",name:"นายเกษม ศิริสัมพันธ์"},{year:"2539",name:"นายแก้วสรร อติโพธิ"},{year:"2539",name:"นายโกเมศ ขวัญเมือง"},{year:"2539",name:"นายโกศล ศรีสังข์"},{year:"2539",name:"ศาสตราจารย์เขียน ธีระวิทย์"},{year:"2539",name:"ศาสตราจารย์คณิต ณ นคร"},{year:"2539",name:"นายคณิน บุญสุวรรณ"},{year:"2539",name:"นายครรชิต สุขุมินท\r"},{year:"2539",name:"นายแคล้ว นรปติ"},{year:"2539",name:"นายจรัส ง๊ะสมัน"},{year:"2539",name:"นายจัตวา กลิ่นสุนทร"},{year:"2539",name:"นายจำนงค์ พิณสาย\r"},{year:"2539",name:"นายเฉลิม พรหมเลิศ"},{year:"2539",name:"นายชงค์ วงษ์ขันธ์"},{year:"2539",name:"พลตำรวจเอก ชาญ รัตนธรรม\r"},{year:"2539",name:"นายชานนท์ สุวสิน\r"},{year:"2539",name:"นายเดโช สวนานนท์"},{year:"2539",name:"นายถาวร จันทร์สม"},{year:"2539",name:"นายทวิช กลิ่นประทุม"},{year:"2539",name:"นายทองใบ ทองเปาด์"},{year:"2539",name:"นายธงชาติ รัตนวิชา"},{year:"2539",name:"รองศาสตราจารย์ธงทอง จันทรางศุ"},{year:"2539",name:"นายธรรมนูญ มงคล"},{year:"2539",name:"ศาสตราจารย์ธรรมนูญ ลัดพลี"},{year:"2539",name:"นายธีรวัฒน์ ร่มไทรทอง"},{year:"2539",name:"นายธีรศักดิ์ กีฬา"},{year:"2539",name:"นายนัจมุดดีน อูมา"},{year:"2539",name:"นายนิตินัย นาครทรรพ"},{year:"2539",name:"นายนิเวศ พันธ์เจริญวรกุล"},{year:"2539",name:"ศาสตราจารย์บวรศักดิ์ อุวรรณโณ"},{year:"2539",name:"นายบัวพรม ธีรกัลยาณพันธุ์"},{year:"2539",name:"นายบุญเลิศ คชายุทธเดช\r"},{year:"2539",name:"นายประชุม ทองมี\r"},{year:"2539",name:"นายประดัง ปรีชญางกูร"},{year:"2539",name:"ศาสตราจารย์ประดิษฐ์ เจริญไทยทวี\r"},{year:"2539",name:"นายประเทือง คำประกอบ"},{year:"2539",name:"พลตำรวจเอก ประมาณ อดิเรกสาร"},{year:"2539",name:"นายประวิทย์ เจนวีระนนท์"},{year:"2539",name:"นายประวิทย์ ทองศรีนุ่น"},{year:"2539",name:"นายประสพพร พาทยกุล"},{year:"2539",name:"นางปราณี วชิราศรีศิริกุล"},{year:"2539",name:"พันตรีปรีดา นิสสัยเจริญ"},{year:"2539",name:"พลเอก ปัญญา สิงห์ศักดา\r"},{year:"2539",name:"นายเปลี่ยน เกตุทอง\r"},{year:"2539",name:"นายพงศ์เทพ เทพกาญจนา"},{year:"2539",name:"นายพนัส จันทรสุรินทร์\r"},{year:"2539",name:"นายพนัส ทัศนียานนท์"},{year:"2539",name:"นางพวงเล็ก บุญเชียง"},{year:"2539",name:"นางพินทิพย์ ลีลาภรณ์"},{year:"2539",name:"นายพินิจ อัศวโกวิทกรณ์"},{year:"2539",name:"นายพูนสวัสดิ์ พุทธศิริ\r"},{year:"2539",name:"นายเพชร แก่นเมือง"},{year:"2539",name:"นายไพบูลย์ ชมาฤกษ์"},{year:"2539",name:"นางยุพา อุดมศักดิ์"},{year:"2539",name:"ศาสตราจารย์ลิขิต ธีรเวคิน"},{year:"2539",name:"นายวรพจน์ ณ นคร"},{year:"2539",name:"นายวรพจน์ วงศ์สง่า"},{year:"2539",name:"นายวิศัลย์ โฆษิตานนท์"},{year:"2539",name:"รองศาสตราจารย์วิสุทธิ์ โพธิแท่น"},{year:"2539",name:"นายวุฒิพงศ์ ฉายแสง\r"},{year:"2539",name:"นายสงวน พงษ์มณี"},{year:"2539",name:"นายสนั่น อินทรประเสริฐ"},{year:"2539",name:"นายสมเกียรติ อ่อนวิมล\r"},{year:"2539",name:"รองศาสตราจารย์สมคิด เลิศไพฑูรย์"},{year:"2539",name:"พันเอก สมคิด ศรีสังคม\r"},{year:"2539",name:"ร้อยตรี สมนึก ชูวิเชียร"},{year:"2539",name:"นายสมรรค ศิริจันทร์\r"},{year:"2539",name:"นายสวัสดิ์ คำประกอบ"},{year:"2539",name:"พลตำรวจเอก สวัสดิ์ อมรวิวัฒน์ "},{year:"2539",name:"นายสามารถ แก้วมีชัย"},{year:"2539",name:"นายสำรวย ฉิมทวี"},{year:"2539",name:"ศาสตราจารย์สุจิต บุญบงการ"},{year:"2539",name:"นายสุทธินันท์ จันทระ\r"},{year:"2539",name:"นายสุนทร ทิพย์มณี"},{year:"2539",name:"นางสุนี ไชยรส"},{year:"2539",name:"นายสุบิน สินไชย"},{year:"2539",name:"นาวาโท สุรินทร์ แสงสนิท"},{year:"2539",name:"นายเสรี สุวรรณภานนท์"},{year:"2539",name:"นายเหม สุไลมาน\r"},{year:"2539",name:"นายเหลื่อม พันธ์ฤกษ์"},{year:"2539",name:"นายองอาจ หลำอุบล\r"},{year:"2539",name:"นายอนันต์ บูรณวนิช\r"},{year:"2539",name:"นายอนันต์ ผลอำนวย"},{year:"2539",name:"นายอภินันท์ เมตตาริกานนท์"},{year:"2539",name:"ศาสตราจารย์อมร รักษาสัตย์"},{year:"2539",name:"นายอานันท์ ปันยารชุน"},{year:"2539",name:"ร้อยตรี อำนวย ไทยานนท์"},{year:"2539",name:"นายอำนวย นาครัชตะอมร\r"},{year:"2539",name:"ศาสตราจารย์อุกฤษ มงคลนาวิน"},{year:"2539",name:"พันเอก (พิเศษ) อุดม ทวีวัฒน์"},{year:"2539",name:"นายอุดร กามา"},{year:"2539",name:"นายอุทัย พิมพ์ใจชน"},{year:"2539",name:"นางสาวอุทัยวรรณ ดำรงกิจการวงศ์"},{year:"2539",name:"นายเอก วรรณทอง\r"},{year:"2539",name:"นายเอนก สิทธิประศาสน์"},{year:"2550",name:"นายกนก โตสุรัตน์"},{year:"2550",name:"นางกรรณิการ์ บันเทิงจิตร"},{year:"2550",name:"นายกฤษฎา ให้วัฒนานุกูล"},{year:"2550",name:"นายกล้านรงค์ จันทิก\r"},{year:"2550",name:"นายการุณ ใสงาม"},{year:"2550",name:"นายกิตติ ตรีเศรษฐ "},{year:"2550",name:"นายเกริกเกียรติ พิพัฒน์เสรีธรรม"},{year:"2550",name:"นายเกียรติชัย พงษ์พาณิชย์"},{year:"2550",name:"นายคมสัน โพธิ์คง\r"},{year:"2550",name:"นายจรัญ ภักดีธนากุล"},{year:"2550",name:"นายจรัส สุวรรณมาลา"},{year:"2550",name:"นายจุตินันท์ ภิรมย์ภักดี"},{year:"2550",name:"นายเจริญศักดิ์ โรจนฤทธิ์พิเชษฐ์ "},{year:"2550",name:"นายเจิมศักดิ์ ปิ่นทอง"},{year:"2550",name:"นายช.ชัยนาท ศรีเสมาเมือง"},{year:"2550",name:"นายชนินทร์ บัวประเสริฐ"},{year:"2550",name:"นายชวลิต หมื่นนุช\r"},{year:"2550",name:"นายชาติชาย เจียมศรีพงษ์"},{year:"2550",name:"นายชาติชาย แสงสุข"},{year:"2550",name:"นายชาลี กางอิ่ม"},{year:"2550",name:"นายชำนาญ ภูวิลัย\r"},{year:"2550",name:"นายชูชัย ศุภวงศ์"},{year:"2550",name:"นายโชคชัย อักษรนันท์"},{year:"2550",name:"นายไชยยศ เหมะรัชตะ"},{year:"2550",name:"นางดวงสุดา เตโชติรส "},{year:"2550",name:"นายเดโช สวนานนท์"},{year:"2550",name:"นายธนพิชญ์ มูลพฤกษ์\r"},{year:"2550",name:"พลตำรวจโท ธรรมนิตย์ ปิตะนีละบุตร"},{year:"2550",name:"นายธวัช บวรวนิชยกูร"},{year:"2550",name:"นายธิติพันธุ์ เชื้อบุญชัย"},{year:"2550",name:"นายธีรวัฒน์ ร่มไทรทอง"},{year:"2550",name:"นายนครินทร์ เมฆไตรรัตน์"},{year:"2550",name:"นายนรนิติ เศรษฐบุตร"},{year:"2550",name:"นายนิตย์ วังวิวัฒน์\r"},{year:"2550",name:"นายนิมิตร ชัยจีระธิกุล"},{year:"2550",name:"นายนุรักษ์ มาประณีต"},{year:"2550",name:"นายปกรณ์ ปรียากร"},{year:"2550",name:"นายประดิษฐ์ เหลืองอร่าม"},{year:"2550",name:"นายประพันธ์ นัยโกวิท"},{year:"2550",name:"นายประวิทย์ อัครชิโนเรศ"},{year:"2550",name:"นายประสงค์ พิทูรกิจจา"},{year:"2550",name:"นายปริญญา ศิริสารการ"},{year:"2550",name:"นางพรรณราย แสงวิเชียร "},{year:"2550",name:"นางสาวพวงเพชร สารคุณ"},{year:"2550",name:"นายพิเชียร อำนาจวรประเสริฐ"},{year:"2550",name:"นายพิสิฐ ลี้อาธรรม"},{year:"2550",name:"พลเรือเอก พีรศักดิ์ วัชรมูล"},{year:"2550",name:"นายไพบูลย์ วราหะไพฑูรย์\r"},{year:"2550",name:"นายไพโรจน์ พรหมสาส์น\r"},{year:"2550",name:"นายมนตรี เพชรขุ้ม"},{year:"2550",name:"นางมนูญศรี โชติเทวัญ"},{year:"2550",name:"นายมานิจ สุขสมจิตร"},{year:"2550",name:"พลตำรวจเอก มีชัย นุกูลกิจ"},{year:"2550",name:"นายรัฐ ชูกลิ่น"},{year:"2550",name:"นางรุจิรา เตชางกูร "},{year:"2550",name:"นายวรากรณ์ สามโกเศศ"},{year:"2550",name:"นายวัชรา หงส์ประภัศร\r"},{year:"2550",name:"นายวิชัย รูปขำดี"},{year:"2550",name:"นายวิชัย เรืองเริงกุลฤทธิ์"},{year:"2550",name:"นายวิชัย ศรีขวัญ"},{year:"2550",name:"นายวิชา มหาคุณ"},{year:"2550",name:"นายวิทธยา บริบูรณ์ทรัพย์\r"},{year:"2550",name:"นายวิทยา คชเขื่อน\r"},{year:"2550",name:"นายวิทยา งานทวี"},{year:"2550",name:"นายวิทวัส บุญญสถิตย์"},{year:"2550",name:"นายวีนัส ม่านมุงศิลป์"},{year:"2550",name:"นายวุฒิชาติ กัลยาณมิตร\r"},{year:"2550",name:"นายวุฒิสาร ตันไชย"},{year:"2550",name:"นายศรีราชา เจริญพานิช"},{year:"2550",name:"นายศักดิ์ชัย อุ่นจิตติกุล\r"},{year:"2550",name:"นายศักดิ์นรินทร์ เขื่อนอ้น\r"},{year:"2550",name:"นายศิวะ แสงมณี"},{year:"2550",name:"นายเศวต ทินกูล\r"},{year:"2550",name:"นางสดศรี สัตยธรรม"},{year:"2550",name:"นายสนั่น อินทรประเสริฐ"},{year:"2550",name:"นายสมเกียรติ รอดเจริญ\r"},{year:"2550",name:"นายสมคิด เลิศไพฑูรย์ "},{year:"2550",name:"นายสมชัย ฤชุพันธุ์\r"},{year:"2550",name:"นายสมยศ สมวิวัฒน์ชัย"},{year:"2550",name:"นายสวัสดิ์ โชติพานิช\r"},{year:"2550",name:"นายสว่าง ภู่พัฒน์วิบูลย์"},{year:"2550",name:"นายสวิง ตันอุด\r"},{year:"2550",name:"นายสามขวัญ พนมขวัญ"},{year:"2550",name:"นายสุนทร จันทร์รังสี"},{year:"2550",name:"นายสุรชัย เลี้ยงบุญเลิศชัย"},{year:"2550",name:"นายสุรพล พงษ์ทัดศิริกุล\r"},{year:"2550",name:"นายเสริมเกียรติ วรดิษฐ์"},{year:"2550",name:"นายเสรี นิมะยุ"},{year:"2550",name:"นายเสรี สุวรรณภานนท์"},{year:"2550",name:"นายหลักชัย กิตติพล"},{year:"2550",name:"นายอนุศาสน์ สุวรรณมงคล"},{year:"2550",name:"นายอภิชาติ ดำดี"},{year:"2550",name:"นายอรรครัตน์ รัตนจันทร์"},{year:"2550",name:"นายอรัญ ธรรมโน\r"},{year:"2550",name:"นางสาวอลิสา พันธุศักดิ์"},{year:"2550",name:"นายอัครวิทย์ สุมาวงศ์"},{year:"2550",name:"นางอังคณา นีละไพจิตร"},{year:"2550",name:"นางสาวอาภา อรรถบูรณ์วงศ์"},{year:"2550",name:"นายอุทิศ ชูช่วย\r"},{year:"2550",name:"นายโอภาส เตพละกุล"}];const Dc=[...new Set(Ic.map((({year:e})=>e)))].sort(),Nc=Ic.reduce(((e,{year:t})=>(e[t]++,e)),Dc.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:0})),{})),$c=new Gt("#C8C8C8"),Oc=new Gt("#EEEEEE"),zc=[new Gt("#588B8B"),new Gt("#FF7D00"),new Gt("#A394FF"),new Gt("#B8B08D"),new Gt("#C8553D"),new Gt("#9CC9FF"),new Gt("#4A769F"),new Gt("#F39B8E"),new Gt("#68C2CC")],Bc=zc.map((e=>e.clone().multiplyScalar(1.1))),Hc=e=>new Array(3).fill(e),Fc=[Hc(1.5),Hc(2.5)],Uc=[Hc(1/1.5),Hc(.4)];class kc extends Cn{constructor({primaryColor:e,hoveredColor:t,selectedColor:n,group:r,data:i=null,isIndividual:a=!1}){const s=a?8:4;super(new Is(s,32,32),new Vt),this.type="SphereMesh",this.colorMap=new Map([["normal",e||$c],["hovered",t||e||$c],["selected",n||t||e||$c]]),this.group=r,this.isIndividual=a,this.state="normal",this.isEnabled=!0,this.data=i,this.isSelectable=null!==i,this.material.color=this.colorMap.get("normal"),a&&(this.haloMesh=new Cn(new Is(s,32,32),new Vt({color:this.colorMap.get("hovered")})),this.haloMesh.material.transparent=!0,this.haloMesh.material.opacity=0,this.add(this.haloMesh))}is(e){return this.uuid===(null==e?void 0:e.uuid)}isInTheSameGroupWith(e){return this.group&&(null==e?void 0:e.group)&&this.group===e.group}toState(e){if(this.isSelectable&&this.state!==e){if(this.isIndividual)switch(e){case"normal":this.scaleMesh("down");break;case"selected":if("hovered"===this.state)break;case"hovered":this.scaleMesh("up")}this.state=e,this.updateMeshColor()}}setIsEnabled(e){this.isEnabled=e,this.updateMeshColor()}updateMeshColor(){const e=this.isEnabled||"hovered"===this.state?this.colorMap.get(this.state):Oc;this.material.color=e,this.isIndividual&&(this.haloMesh.material.color=e)}scaleMesh(e){const[t,n]="up"===e?Fc:Uc;this.geometry.scale(...t),this.isIndividual&&(this.haloMesh.material.opacity="up"===e?.2:0,this.haloMesh.geometry.scale(...n))}}const Gc=Math.PI/2e3;class Vc extends Yi{constructor(e){super();const t=12*e.length/(2*Math.PI),n=2*Math.PI/e.length;e.forEach(((e,r)=>{const i=new kc(e);i.position.setFromSpherical(new ml(t,r*n)),this.add(i)}))}spin(){this.rotateX(Gc)}}function Wc(e){let t,n;return{c(){t=p("div"),n=f(e[2]),this.h()},l(r){t=m(r,"DIV",{class:!0,style:!0});var i=g(t);n=y(i,e[2]),i.forEach(v),this.h()},h(){x(t,"class","absolute transform hidden md:block -translate-x-1/2 -translate-y-1/2 text-white svelte-enhypx"),_(t,"top",e[1]+"px"),_(t,"left",e[0]+"px")},m(e,r){b(e,t,r),w(t,n)},p(e,[r]){4&r&&M(n,e[2]),2&r&&_(t,"top",e[1]+"px"),1&r&&_(t,"left",e[0]+"px")},i:S,o:S,d(e){e&&v(t)}}}function jc(e,t,n){let{x:r}=t,{y:i}=t,{number:a}=t;return e.$$set=e=>{"x"in e&&n(0,r=e.x),"y"in e&&n(1,i=e.y),"number"in e&&n(2,a=e.number)},[r,i,a]}class qc extends e{constructor(e){super(),t(this,e,jc,Wc,n,{x:0,y:1,number:2})}}function Xc(e){let t,n,r;return{c(){t=p("object"),n=p("img"),this.h()},l(e){t=m(e,"OBJECT",{title:!0,data:!0,style:!0,type:!0,class:!0});var r=g(t);n=m(r,"IMG",{src:!0,alt:!0}),r.forEach(v),this.h()},h(){E(n.src,r="images/people-default.png")||x(n,"src","images/people-default.png"),x(n,"alt",e[2]),x(t,"title",e[2]),x(t,"data",e[3]),_(t,"top",e[1]-Yc+"px"),_(t,"left",e[0]+"px"),x(t,"type","image/png"),x(t,"class","absolute transform -translate-x-1/2 -translate-y-full p-1 rounded-full shadow object-cover bg-white")},m(e,r){b(e,t,r),w(t,n)},p(e,[r]){4&r&&x(n,"alt",e[2]),4&r&&x(t,"title",e[2]),8&r&&x(t,"data",e[3]),2&r&&_(t,"top",e[1]-Yc+"px"),1&r&&_(t,"left",e[0]+"px")},i:S,o:S,d(e){e&&v(t)}}}const Yc=16;function Zc(e,t,n){let{x:r}=t,{y:i}=t,{alt:a}=t,{image:s}=t;return e.$$set=e=>{"x"in e&&n(0,r=e.x),"y"in e&&n(1,i=e.y),"alt"in e&&n(2,a=e.alt),"image"in e&&n(3,s=e.image)},[r,i,a,s]}class Jc extends e{constructor(e){super(),t(this,e,Zc,Xc,n,{x:0,y:1,alt:2,image:3})}}function Qc(e,t,n){const r=e.slice();return r[4]=t[n],r}function Kc(e){let t,n,r,i,a,s=e[4]+"";return{c(){t=p("div"),n=p("span"),r=f("พ.ศ. "),i=f(s),a=T(),this.h()},l(e){t=m(e,"DIV",{class:!0});var o=g(t);n=m(o,"SPAN",{});var l=g(n);r=y(l,"พ.ศ. "),i=y(l,s),l.forEach(v),a=L(o),o.forEach(v),this.h()},h(){A(n,"opacity-20",e[0].length>0&&!e[0].includes(e[4])),x(t,"class","year-axis-label font-bold rounded px-2 py-1 text-center")},m(e,s){b(e,t,s),w(t,n),w(n,r),w(n,i),w(t,a)},p(e,t){1&t&&A(n,"opacity-20",e[0].length>0&&!e[0].includes(e[4]))},d(e){e&&v(t)}}}function eh(e){let t,n=Dc,r=[];for(let t=0;t<n.length;t+=1)r[t]=Kc(Qc(e,n,t));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=m(e,"DIV",{class:!0});var n=g(t);for(let e=0;e<r.length;e+=1)r[e].l(n);n.forEach(v),this.h()},h(){x(t,"class","flex flex-col justify-around py-14")},m(n,i){b(n,t,i);for(let e=0;e<r.length;e+=1)r[e].m(t,null);e[3](t)},p(e,[i]){if(1&i){let a;for(n=Dc,a=0;a<n.length;a+=1){const s=Qc(e,n,a);r[a]?r[a].p(s,i):(r[a]=Kc(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:S,o:S,d(n){n&&v(t),P(r,n),e[3](null)}}}function th(e,t,n){let r,{selectedYears:i=[]}=t,{labelElements:a}=t;return e.$$set=e=>{"selectedYears"in e&&n(0,i=e.selectedYears),"labelElements"in e&&n(2,a=e.labelElements)},e.$$.update=()=>{2&e.$$.dirty&&n(2,a=r?r.querySelectorAll("div"):null)},[i,r,a,function(e){R[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class nh extends e{constructor(e){super(),t(this,e,th,eh,n,{selectedYears:0,labelElements:2})}}function rh(e){let t,n,r,i,a,s,o,l,c,h,u,d;return{c(){t=p("button"),n=C("svg"),r=C("g"),i=C("rect"),a=C("rect"),s=C("rect"),o=C("g"),l=C("g"),c=C("path"),this.h()},l(e){t=m(e,"BUTTON",{class:!0});var h=g(t);n=I(h,"svg",{xmlns:!0,"enable-background":!0,viewBox:!0,class:!0});var u=g(n);r=I(u,"g",{});var d=g(r);i=I(d,"rect",{fill:!0,height:!0,width:!0}),g(i).forEach(v),a=I(d,"rect",{fill:!0,height:!0,width:!0}),g(a).forEach(v),s=I(d,"rect",{fill:!0,height:!0,width:!0}),g(s).forEach(v),d.forEach(v),o=I(u,"g",{});var p=g(o);l=I(p,"g",{}),g(l).forEach(v),c=I(p,"path",{d:!0}),g(c).forEach(v),p.forEach(v),u.forEach(v),h.forEach(v),this.h()},h(){x(i,"fill","none"),x(i,"height","24"),x(i,"width","24"),x(a,"fill","none"),x(a,"height","24"),x(a,"width","24"),x(s,"fill","none"),x(s,"height","24"),x(s,"width","24"),x(c,"d","M12,5V1L7,6l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6H4c0,4.42,3.58,8,8,8s8-3.58,8-8S16.42,5,12,5z"),x(n,"xmlns","http://www.w3.org/2000/svg"),x(n,"enable-background","new 0 0 24 24"),x(n,"viewBox","0 0 24 24"),x(n,"class","fill-current w-5 h-5 md:w-6 md:h-6"),x(t,"class",h="opacity-30 hover:opacity-100 focus:ring ring-gold focus:outline-none "+(e[0].class||""))},m(h,p){b(h,t,p),w(t,n),w(n,r),w(r,i),w(r,a),w(r,s),w(n,o),w(o,l),w(o,c),u||(d=D(t,"click",e[1]),u=!0)},p(e,[n]){1&n&&h!==(h="opacity-30 hover:opacity-100 focus:ring ring-gold focus:outline-none "+(e[0].class||""))&&x(t,"class",h)},i:S,o:S,d(e){e&&v(t),u=!1,d()}}}function ih(e,t,n){return e.$$set=e=>{n(0,t=N(N({},t),$(e)))},[t=$(t),function(t){O.call(this,e,t)}]}class ah extends e{constructor(e){super(),t(this,e,ih,rh,n,{})}}function sh(e){let t,n,c;const h=e[2].default,u=r(h,e,e[1],null);return{c(){t=p("div"),u&&u.c(),this.h()},l(e){t=m(e,"DIV",{class:!0});var n=g(t);u&&u.l(n),n.forEach(v),this.h()},h(){x(t,"class",n="flex flex-col w-full max-w-screen-xl mx-auto "+(e[0].class||""))},m(e,n){b(e,t,n),u&&u.m(t,null),c=!0},p(e,[r]){u&&u.p&&(!c||2&r)&&i(u,h,e,e[1],c?s(h,e[1],r,null):a(e[1]),null),(!c||1&r&&n!==(n="flex flex-col w-full max-w-screen-xl mx-auto "+(e[0].class||"")))&&x(t,"class",n)},i(e){c||(o(u,e),c=!0)},o(e){l(u,e),c=!1},d(e){e&&v(t),u&&u.d(e)}}}function oh(e,t,n){let{$$slots:r={},$$scope:i}=t;return e.$$set=e=>{n(0,t=N(N({},t),$(e))),"$$scope"in e&&n(1,i=e.$$scope)},[t=$(t),i,r]}class lh extends e{constructor(e){super(),t(this,e,oh,sh,n,{})}}function ch(e,t,n){const r=e.slice();return r[35]=t[n],r}function hh(e){let t,n,r,i=e[1].data.image&&uh(e),a=e[7]&&dh(e);return{c(){i&&i.c(),t=T(),a&&a.c(),n=G()},l(e){i&&i.l(e),t=L(e),a&&a.l(e),n=G()},m(e,s){i&&i.m(e,s),b(e,t,s),a&&a.m(e,s),b(e,n,s),r=!0},p(e,r){e[1].data.image?i?(i.p(e,r),2&r[0]&&o(i,1)):(i=uh(e),i.c(),o(i,1),i.m(t.parentNode,t)):i&&(j(),l(i,1,1,(()=>{i=null})),q()),e[7]?a?(a.p(e,r),128&r[0]&&o(a,1)):(a=dh(e),a.c(),o(a,1),a.m(n.parentNode,n)):a&&(j(),l(a,1,1,(()=>{a=null})),q())},i(e){r||(o(i),o(a),r=!0)},o(e){l(i),l(a),r=!1},d(e){i&&i.d(e),e&&v(t),a&&a.d(e),e&&v(n)}}}function uh(e){let t,n;const r=[e[6],{image:e[1].data.image},{alt:e[1].data.name}];let i={};for(let e=0;e<r.length;e+=1)i=N(i,r[e]);return t=new Jc({props:i}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const i=66&n[0]?V(r,[64&n[0]&&W(e[6]),2&n[0]&&{image:e[1].data.image},2&n[0]&&{alt:e[1].data.name}]):{};t.$set(i)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function dh(e){let t,n;const r=[e[6],{number:e[1].data.number}];let i={};for(let e=0;e<r.length;e+=1)i=N(i,r[e]);return t=new qc({props:i}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const i=66&n[0]?V(r,[64&n[0]&&W(e[6]),2&n[0]&&{number:e[1].data.number}]):{};t.$set(i)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function ph(e){let t,n;const r=[e[10](e[35]),{number:e[35].data.number}];let i={};for(let e=0;e<r.length;e+=1)i=N(i,r[e]);return t=new qc({props:i}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const i=1056&n[0]?V(r,[W(e[10](e[35])),32&n[0]&&{number:e[35].data.number}]):{};t.$set(i)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function fh(e){let t,n,c,h,u,d,f,y,_,M,S,E,C;function I(t){e[20](t)}t=new ah({props:{class:"absolute top-0 right-0"}}),t.$on("click",e[13]);let N={selectedYears:e[0]};void 0!==e[3]&&(N.labelElements=e[3]),h=new nh({props:N}),R.push((()=>z(h,"labelElements",I)));let $=e[8]&&hh(e),O=e[5],G=[];for(let t=0;t<O.length;t+=1)G[t]=ph(ch(e,O,t));const V=e=>l(G[e],1,1,(()=>{G[e]=null})),W=e[19].default,Y=r(W,e,e[23],null);return{c(){B(t.$$.fragment),n=T(),c=p("div"),B(h.$$.fragment),d=T(),f=p("div"),$&&$.c(),y=T();for(let e=0;e<G.length;e+=1)G[e].c();_=T(),M=p("div"),Y&&Y.c(),this.h()},l(e){H(t.$$.fragment,e),n=L(e),c=m(e,"DIV",{class:!0});var r=g(c);H(h.$$.fragment,r),r.forEach(v),d=L(e),f=m(e,"DIV",{});var i=g(f);$&&$.l(i),y=L(i);for(let e=0;e<G.length;e+=1)G[e].l(i);i.forEach(v),_=L(e),M=m(e,"DIV",{class:!0});var a=g(M);Y&&Y.l(a),a.forEach(v),this.h()},h(){x(c,"class","hidden md:flex absolute left-0 top-0 bottom-0 z-10"),A(f,"cursor-pointer",e[1]&&e[1].isSelectable),x(M,"class","md:absolute md:bottom-12 md:right-0 z-10 flex flex-col space-y-2 w-full max-w-md justify-end mt-8")},m(r,i){F(t,r,i),b(r,n,i),b(r,c,i),F(h,c,null),b(r,d,i),b(r,f,i),$&&$.m(f,null),w(f,y);for(let e=0;e<G.length;e+=1)G[e].m(f,null);e[21](f),b(r,_,i),b(r,M,i),Y&&Y.m(M,null),S=!0,E||(C=[D(f,"mousemove",e[11]),D(f,"click",e[12])],E=!0)},p(e,t){const n={};if(1&t[0]&&(n.selectedYears=e[0]),!u&&8&t[0]&&(u=!0,n.labelElements=e[3],U((()=>u=!1))),h.$set(n),e[8]?$?($.p(e,t),256&t[0]&&o($,1)):($=hh(e),$.c(),o($,1),$.m(f,y)):$&&(j(),l($,1,1,(()=>{$=null})),q()),1056&t[0]){let n;for(O=e[5],n=0;n<O.length;n+=1){const r=ch(e,O,n);G[n]?(G[n].p(r,t),o(G[n],1)):(G[n]=ph(r),G[n].c(),o(G[n],1),G[n].m(f,null))}for(j(),n=O.length;n<G.length;n+=1)V(n);q()}2&t[0]&&A(f,"cursor-pointer",e[1]&&e[1].isSelectable),Y&&Y.p&&(!S||8388608&t[0])&&i(Y,W,e,e[23],S?s(W,e[23],t,null):a(e[23]),null)},i(e){if(!S){o(t.$$.fragment,e),o(h.$$.fragment,e),o($);for(let e=0;e<O.length;e+=1)o(G[e]);o(Y,e),S=!0}},o(e){l(t.$$.fragment,e),l(h.$$.fragment,e),l($),G=G.filter(Boolean);for(let e=0;e<G.length;e+=1)l(G[e]);l(Y,e),S=!1},d(r){k(t,r),r&&v(n),r&&v(c),k(h),r&&v(d),r&&v(f),$&&$.d(),P(G,r),e[21](null),r&&v(_),r&&v(M),Y&&Y.d(r),E=!1,X(C)}}}function mh(e){let t,n;return t=new lh({props:{class:"relative",$$slots:{default:[fh]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};8389115&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function gh(e){let t,n,r,i,a;function s(t){e[22](t)}let c={element:e[4],threshold:.5,$$slots:{default:[mh]},$$scope:{ctx:e}};return void 0!==e[2]&&(c.intersecting=e[2]),t=new Ll({props:c}),R.push((()=>z(t,"intersecting",s))),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(n,s){F(t,n,s),r=!0,i||(a=D(window,"resize",e[9]),i=!0)},p(e,r){const i={};16&r[0]&&(i.element=e[4]),8389115&r[0]&&(i.$$scope={dirty:r,ctx:e}),!n&&4&r[0]&&(n=!0,i.intersecting=e[2],U((()=>n=!1))),t.$set(i)},i(e){r||(o(t.$$.fragment,e),r=!0)},o(e){l(t.$$.fragment,e),r=!1},d(e){k(t,e),i=!1,a()}}}function yh(e,t,n){let r,i,a,s,o,l,h,{$$slots:u={},$$scope:p}=t,{data:f}=t,{nodes:m=[]}=t,{selectedNodes:g=[]}=t,{selectedYears:y=[]}=t,{isFreeze:v=!1}=t,{transitionConfig:x={delay:500,duration:1e3}}=t,_=new he(1,1),b=null,w=!1;const M=c(),S=e=>({delay:500+e*x.delay,duration:x.duration}),{scene:E,initRenderer:T,renderScene:L,updateCanvasSize:A,getMouseIntersections:P,getObjectCanvasOffset:C}=(()=>{let e,t;const n=new ea;n.background=new Gt("#ffffff");const r=new Fo(0,0,0,0,0,1e4);r.position.set(700,-2e3,0),r.lookAt(n.position);const i=new dl,a=()=>{const{clientWidth:n}=e;r.left=-875,r.right=875,r.top=500,r.bottom=-500,r.zoom=n>768?1.5:1.8,r.updateProjectionMatrix(),t.setSize(n,n/1.75)};return{scene:n,renderScene:()=>t.render(n,r),initRenderer:n=>{e=n,t=new Ki,t.setPixelRatio(window.devicePixelRatio),e.appendChild(t.domElement),a()},updateCanvasSize:a,getMouseIntersections:(e,t)=>(i.setFromCamera(e,r),i.intersectObjects(t)),getObjectCanvasOffset:t=>{if(!t)return{x:0,y:0};const n=new _e;return t.updateWorldMatrix(!0,!1),t.getWorldPosition(n),n.project(r),{x:(.5*n.x+.5)*e.clientWidth,y:(-.5*n.y+.5)*e.clientHeight}}}})();l=f.map((e=>new Vc(e))),l.forEach(((e,t)=>{e.position.x=150*((f.length-1)/2-t)})),E.add(...l),m=l.reduce(((e,t)=>[...e,...t.children]),[]),m.forEach((e=>{e.material.transparent=!0,e.material.opacity=0}));const I=e=>{const t=0===e.length?[]:l.reduce(((t,{children:n},r)=>n.some((t=>e.some((e=>t.is(e)))))?[...t,r]:t),[]);n(0,y=t.map((e=>Dc[e]))),l.forEach((({children:n},r)=>{const i=t.includes(r);n.forEach((t=>{e.some((e=>t.is(e)))?t.toState("selected"):t.is(b)||!t.isIndividual&&t.isInTheSameGroupWith(b)?t.toState("hovered"):t.toState("normal"),t.setIsEnabled(0===e.length||(t.isIndividual?t.isInTheSameGroupWith(e[0]):i))}))}))};d((()=>{T(o);const e=()=>{requestAnimationFrame(e);const[t]=P(_,m);b&&!b.is(null==t?void 0:t.object)?(n(1,b=null),I(g)):!b&&t&&"SphereMesh"===t.object.type&&t.object.isSelectable&&(n(1,b=t.object),I(g)),v||0!==g.length||b||l.forEach((e=>e.spin())),L()};e()}));const D=()=>{M("transitionstart"),l.forEach((({children:e},t)=>{Pc(Object.assign({targets:[...e.map((({material:e})=>e)),h[t]],opacity:[0,1],easing:"linear"},S(t))),Pc(Object.assign({targets:e.map((({position:e})=>e)),x:[-100,0],easing:"easeOutCubic"},S(t)))}))};return e.$$set=e=>{"data"in e&&n(16,f=e.data),"nodes"in e&&n(15,m=e.nodes),"selectedNodes"in e&&n(14,g=e.selectedNodes),"selectedYears"in e&&n(0,y=e.selectedYears),"isFreeze"in e&&n(17,v=e.isFreeze),"transitionConfig"in e&&n(18,x=e.transitionConfig),"$$scope"in e&&n(23,p=e.$$scope)},e.$$.update=()=>{16384&e.$$.dirty[0]&&I(g),2&e.$$.dirty[0]&&n(8,r=null==b?void 0:b.isIndividual),16386&e.$$.dirty[0]&&n(7,i=!g.some((e=>e.is(b)))),2&e.$$.dirty[0]&&n(6,a=C(b)),16384&e.$$.dirty[0]&&n(5,s=g.filter((({isIndividual:e})=>e))),8&e.$$.dirty[0]&&h&&h.forEach((e=>{e.style.opacity="0"})),4&e.$$.dirty[0]&&w&&D()},[y,b,w,h,o,s,a,i,r,A,C,e=>{e.preventDefault();const{offsetX:t,offsetY:n}=e;_.x=t/o.clientWidth*2-1,_.y=-n/o.clientHeight*2+1},()=>{n(14,g=(null==b?void 0:b.isSelectable)?b.group?m.filter((e=>e.isInTheSameGroupWith(b))):[b]:[])},()=>{n(14,g=[]),D()},g,m,f,v,x,u,function(e){h=e,n(3,h)},function(e){R[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},function(e){w=e,n(2,w)},p]}class vh extends e{constructor(e){super(),t(this,e,yh,gh,n,{data:16,nodes:15,selectedNodes:14,selectedYears:0,isFreeze:17,transitionConfig:18},null,[-1,-1])}}function xh(e){let t,n,c,h,u;const d=e[3].default,f=r(d,e,e[2],null);return{c(){t=p("div"),f&&f.c(),this.h()},l(e){t=m(e,"DIV",{class:!0});var n=g(t);f&&f.l(n),n.forEach(v),this.h()},h(){x(t,"class",n="border border-black rounded py-2 px-4 text-h6 font-bold "+(e[0]?"bg-black text-white":"bg-white")+" "+(e[1].class||""))},m(n,r){b(n,t,r),f&&f.m(t,null),c=!0,h||(u=D(t,"click",e[4]),h=!0)},p(e,[r]){f&&f.p&&(!c||4&r)&&i(f,d,e,e[2],c?s(d,e[2],r,null):a(e[2]),null),(!c||3&r&&n!==(n="border border-black rounded py-2 px-4 text-h6 font-bold "+(e[0]?"bg-black text-white":"bg-white")+" "+(e[1].class||"")))&&x(t,"class",n)},i(e){c||(o(f,e),c=!0)},o(e){l(f,e),c=!1},d(e){e&&v(t),f&&f.d(e),h=!1,u()}}}function _h(e,t,n){let{$$slots:r={},$$scope:i}=t,{dark:a=!1}=t;return e.$$set=e=>{n(1,t=N(N({},t),$(e))),"dark"in e&&n(0,a=e.dark),"$$scope"in e&&n(2,i=e.$$scope)},t=$(t),[a,t,i,r,function(t){O.call(this,e,t)}]}class bh extends e{constructor(e){super(),t(this,e,_h,xh,n,{dark:0})}}function wh(e){let t,n,r,i;return{c(){t=p("div"),n=p("span"),r=f(e[1]),this.h()},l(i){t=m(i,"DIV",{class:!0,style:!0});var a=g(t);n=m(a,"SPAN",{class:!0,style:!0});var s=g(n);r=y(s,e[1]),s.forEach(v),a.forEach(v),this.h()},h(){x(n,"class","m-auto leading-none font-semibold"),_(n,"font-size",e[2]+"px"),x(t,"class",i="flex justify-center text-center w-4 h-4 rounded-full text-white text-xs m-1 "+(!e[0]&&"border-black border")),_(t,"background-color","#"+(e[0]?e[0].getHexString():"ffffff"))},m(e,i){b(e,t,i),w(t,n),w(n,r)},p(e,[a]){2&a&&M(r,e[1]),4&a&&_(n,"font-size",e[2]+"px"),1&a&&i!==(i="flex justify-center text-center w-4 h-4 rounded-full text-white text-xs m-1 "+(!e[0]&&"border-black border"))&&x(t,"class",i),1&a&&_(t,"background-color","#"+(e[0]?e[0].getHexString():"ffffff"))},i:S,o:S,d(e){e&&v(t)}}}function Mh(e,t,n){let r,{color:i}=t,{number:a=""}=t;return e.$$set=e=>{"color"in e&&n(0,i=e.color),"number"in e&&n(1,a=e.number)},e.$$.update=()=>{2&e.$$.dirty&&n(2,r=a>=100?8:a>=10?10:12)},[i,a,r]}class Sh extends e{constructor(e){super(),t(this,e,Mh,wh,n,{color:0,number:1})}}function Eh(e){const t=e-1;return t*t*t+1}function Th(e,{delay:t=0,duration:n=400,easing:r=Eh}={}){const i=getComputedStyle(e),a=+i.opacity,s=parseFloat(i.height),o=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),h=parseFloat(i.marginBottom),u=parseFloat(i.borderTopWidth),d=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*a};height: ${e*s}px;padding-top: ${e*o}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*h}px;border-top-width: ${e*u}px;border-bottom-width: ${e*d}px;`}}function Lh(e){let t,n,c,h,u;const d=e[2].default,f=r(d,e,e[1],null);return{c(){t=p("div"),f&&f.c(),this.h()},l(e){t=m(e,"DIV",{style:!0,class:!0});var n=g(t);f&&f.l(n),n.forEach(v),this.h()},h(){x(t,"style",n=e[0].style),x(t,"class",c="border border-gray-400 bg-white rounded p-2 "+(e[0].class||""))},m(e,n){b(e,t,n),f&&f.m(t,null),u=!0},p(e,[r]){f&&f.p&&(!u||2&r)&&i(f,d,e,e[1],u?s(d,e[1],r,null):a(e[1]),null),(!u||1&r&&n!==(n=e[0].style))&&x(t,"style",n),(!u||1&r&&c!==(c="border border-gray-400 bg-white rounded p-2 "+(e[0].class||"")))&&x(t,"class",c)},i(e){u||(o(f,e),Y((()=>{h||(h=Z(t,Th,{},!0)),h.run(1)})),u=!0)},o(e){l(f,e),h||(h=Z(t,Th,{},!1)),h.run(0),u=!1},d(e){e&&v(t),f&&f.d(e),e&&h&&h.end()}}}function Ah(e,t,n){let{$$slots:r={},$$scope:i}=t;return e.$$set=e=>{n(0,t=N(N({},t),$(e))),"$$scope"in e&&n(1,i=e.$$scope)},[t=$(t),i,r]}class Ph extends e{constructor(e){super(),t(this,e,Ah,Lh,n,{})}}function Rh(e){let t,n,c,h,u,d;const _=e[2].default,M=r(_,e,e[1],null);return{c(){t=p("button"),n=f("พ.ศ. "),M&&M.c(),this.h()},l(e){t=m(e,"BUTTON",{class:!0});var r=g(t);n=y(r,"พ.ศ. "),M&&M.l(r),r.forEach(v),this.h()},h(){x(t,"class",c="rounded-full px-2 border border-black font-semibold focus:ring ring-gold focus:outline-none "+(e[0]?"bg-black text-white":"hover:bg-gold underline"))},m(r,i){b(r,t,i),w(t,n),M&&M.m(t,null),h=!0,u||(d=D(t,"click",e[3]),u=!0)},p(e,[n]){M&&M.p&&(!h||2&n)&&i(M,_,e,e[1],h?s(_,e[1],n,null):a(e[1]),null),(!h||1&n&&c!==(c="rounded-full px-2 border border-black font-semibold focus:ring ring-gold focus:outline-none "+(e[0]?"bg-black text-white":"hover:bg-gold underline")))&&x(t,"class",c)},i(e){h||(o(M,e),h=!0)},o(e){l(M,e),h=!1},d(e){e&&v(t),M&&M.d(e),u=!1,d()}}}function Ch(e,t,n){let{$$slots:r={},$$scope:i}=t,{isActive:a=!1}=t;return e.$$set=e=>{"isActive"in e&&n(0,a=e.isActive),"$$scope"in e&&n(1,i=e.$$scope)},[a,i,r,function(t){O.call(this,e,t)}]}class Ih extends e{constructor(e){super(),t(this,e,Ch,Rh,n,{isActive:0})}}function Dh(e,t,n){const r=e.slice();return r[6]=t[n],r}function Nh(e){let t,n=e[6]+"";return{c(){t=f(n)},l(e){t=y(e,n)},m(e,n){b(e,t,n)},p(e,r){4&r&&n!==(n=e[6]+"")&&M(t,n)},d(e){e&&v(t)}}}function $h(e){let t,n;return t=new Ih({props:{isActive:e[3]&&e[3].includes(e[6]),$$slots:{default:[Nh]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[5](e[6])})),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(n,r){e=n;const i={};12&r&&(i.isActive=e[3]&&e[3].includes(e[6])),516&r&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Oh(e){let t,n,r,i,a,s,c,h,u;n=new Sh({props:{color:e[1]}});let d=e[2],_=[];for(let t=0;t<d.length;t+=1)_[t]=$h(Dh(e,d,t));const S=e=>l(_[e],1,1,(()=>{_[e]=null}));return{c(){t=p("div"),B(n.$$.fragment),r=T(),i=p("div"),a=p("div"),s=f(e[0]),c=T(),h=p("div");for(let e=0;e<_.length;e+=1)_[e].c();this.h()},l(o){t=m(o,"DIV",{class:!0});var l=g(t);H(n.$$.fragment,l),r=L(l),i=m(l,"DIV",{class:!0});var u=g(i);a=m(u,"DIV",{class:!0});var d=g(a);s=y(d,e[0]),d.forEach(v),c=L(u),h=m(u,"DIV",{class:!0});var p=g(h);for(let e=0;e<_.length;e+=1)_[e].l(p);p.forEach(v),u.forEach(v),l.forEach(v),this.h()},h(){x(a,"class","font-semibold"),x(h,"class","flex flex-row space-x-1"),x(i,"class","flex flex-col space-y-1"),x(t,"class","flex flex-row space-x-1")},m(e,o){b(e,t,o),F(n,t,null),w(t,r),w(t,i),w(i,a),w(a,s),w(i,c),w(i,h);for(let e=0;e<_.length;e+=1)_[e].m(h,null);u=!0},p(e,t){const r={};if(2&t&&(r.color=e[1]),n.$set(r),(!u||1&t)&&M(s,e[0]),28&t){let n;for(d=e[2],n=0;n<d.length;n+=1){const r=Dh(e,d,n);_[n]?(_[n].p(r,t),o(_[n],1)):(_[n]=$h(r),_[n].c(),o(_[n],1),_[n].m(h,null))}for(j(),n=d.length;n<_.length;n+=1)S(n);q()}},i(e){if(!u){o(n.$$.fragment,e);for(let e=0;e<d.length;e+=1)o(_[e]);u=!0}},o(e){l(n.$$.fragment,e),_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)l(_[e]);u=!1},d(e){e&&v(t),k(n),P(_,e)}}}function zh(e){let t,n;return t=new Ph({props:{$$slots:{default:[Oh]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,[n]){const r={};527&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Bh(e,t,n){let{description:r}=t,{color:i}=t,{years:a}=t,{selectedYears:s}=t;const o=c();return e.$$set=e=>{"description"in e&&n(0,r=e.description),"color"in e&&n(1,i=e.color),"years"in e&&n(2,a=e.years),"selectedYears"in e&&n(3,s=e.selectedYears)},[r,i,a,s,o,e=>o("select",e)]}class Hh extends e{constructor(e){super(),t(this,e,Bh,zh,n,{description:0,color:1,years:2,selectedYears:3})}}function Fh(e){let t,n,c,h,u;const d=e[2].default,f=r(d,e,e[1],null);return{c(){t=p("div"),f&&f.c(),this.h()},l(e){t=m(e,"DIV",{class:!0});var n=g(t);f&&f.l(n),n.forEach(v),this.h()},h(){x(t,"class",n="rounded border border-gray-300 p-2 space-y-1 "+(e[0].class||""))},m(n,r){b(n,t,r),f&&f.m(t,null),c=!0,h||(u=D(t,"click",e[3]),h=!0)},p(e,[r]){f&&f.p&&(!c||2&r)&&i(f,d,e,e[1],c?s(d,e[1],r,null):a(e[1]),null),(!c||1&r&&n!==(n="rounded border border-gray-300 p-2 space-y-1 "+(e[0].class||"")))&&x(t,"class",n)},i(e){c||(o(f,e),c=!0)},o(e){l(f,e),c=!1},d(e){e&&v(t),f&&f.d(e),h=!1,u()}}}function Uh(e,t,n){let{$$slots:r={},$$scope:i}=t;return e.$$set=e=>{n(0,t=N(N({},t),$(e))),"$$scope"in e&&n(1,i=e.$$scope)},[t=$(t),i,r,function(t){O.call(this,e,t)}]}class kh extends e{constructor(e){super(),t(this,e,Uh,Fh,n,{})}}function Gh(e){let t,n;return t=new Sh({props:{color:e[2]}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.color=e[2]),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Vh(e){let t,n,r,i,a,s,c,h,u,d,_,S,E=e[2]&&Gh(e);return{c(){t=p("div"),E&&E.c(),n=T(),r=p("div"),i=f(e[0]),a=T(),s=p("div"),c=f(e[1]),h=T(),u=p("div"),d=f("คน"),this.h()},l(o){t=m(o,"DIV",{class:!0});var l=g(t);E&&E.l(l),n=L(l),r=m(l,"DIV",{});var p=g(r);i=y(p,e[0]),p.forEach(v),a=L(l),s=m(l,"DIV",{class:!0});var f=g(s);c=y(f,e[1]),f.forEach(v),h=L(l),u=m(l,"DIV",{});var x=g(u);d=y(x,"คน"),x.forEach(v),l.forEach(v),this.h()},h(){x(s,"class","flex-1 text-right"),A(s,"text-h6",e[3]),x(t,"class",_="flex flex-row space-x-1 "+(e[4].class||"")),A(t,"font-semibold",e[3])},m(e,o){b(e,t,o),E&&E.m(t,null),w(t,n),w(t,r),w(r,i),w(t,a),w(t,s),w(s,c),w(t,h),w(t,u),w(u,d),S=!0},p(e,[r]){e[2]?E?(E.p(e,r),4&r&&o(E,1)):(E=Gh(e),E.c(),o(E,1),E.m(t,n)):E&&(j(),l(E,1,1,(()=>{E=null})),q()),(!S||1&r)&&M(i,e[0]),(!S||2&r)&&M(c,e[1]),8&r&&A(s,"text-h6",e[3]),(!S||16&r&&_!==(_="flex flex-row space-x-1 "+(e[4].class||"")))&&x(t,"class",_),24&r&&A(t,"font-semibold",e[3])},i(e){S||(o(E),S=!0)},o(e){l(E),S=!1},d(e){e&&v(t),E&&E.d()}}}function Wh(e,t,n){let{label:r}=t,{amount:i}=t,{color:a=null}=t,{isLarge:s=!1}=t;return e.$$set=e=>{n(4,t=N(N({},t),$(e))),"label"in e&&n(0,r=e.label),"amount"in e&&n(1,i=e.amount),"color"in e&&n(2,a=e.color),"isLarge"in e&&n(3,s=e.isLarge)},t=$(t),[r,i,a,s,t]}class jh extends e{constructor(e){super(),t(this,e,Wh,Vh,n,{label:0,amount:1,color:2,isLarge:3})}}function qh(e){let t,n,r;return{c(){t=p("object"),n=p("img"),this.h()},l(e){t=m(e,"OBJECT",{title:!0,data:!0,type:!0,class:!0});var r=g(t);n=m(r,"IMG",{src:!0,alt:!0}),r.forEach(v),this.h()},h(){E(n.src,r="images/people-default.png")||x(n,"src","images/people-default.png"),x(n,"alt",e[2]),x(t,"title",e[2]),x(t,"data",e[4]),x(t,"type","image/png"),x(t,"class","rounded-full border border-black w-12 h-12 object-cover my-auto")},m(e,r){b(e,t,r),w(t,n)},p(e,r){4&r&&x(n,"alt",e[2]),4&r&&x(t,"title",e[2]),16&r&&x(t,"data",e[4])},d(e){e&&v(t)}}}function Xh(e){let t,n;return{c(){t=p("p"),n=f(e[3]),this.h()},l(r){t=m(r,"P",{class:!0});var i=g(t);n=y(i,e[3]),i.forEach(v),this.h()},h(){x(t,"class","text-body2")},m(e,r){b(e,t,r),w(t,n)},p(e,t){8&t&&M(n,e[3])},d(e){e&&v(t)}}}function Yh(e){let t,n,r,i,a,s,c,h,u,d,_=e[4]&&qh(e);a=new Sh({props:{color:e[0],number:e[1]}});let S=e[3]&&Xh(e);return{c(){t=p("div"),_&&_.c(),n=T(),r=p("div"),i=p("div"),B(a.$$.fragment),s=T(),c=p("div"),h=f(e[2]),u=T(),S&&S.c(),this.h()},l(o){t=m(o,"DIV",{class:!0});var l=g(t);_&&_.l(l),n=L(l),r=m(l,"DIV",{class:!0});var d=g(r);i=m(d,"DIV",{class:!0});var p=g(i);H(a.$$.fragment,p),s=L(p),c=m(p,"DIV",{class:!0});var f=g(c);h=y(f,e[2]),f.forEach(v),p.forEach(v),u=L(d),S&&S.l(d),d.forEach(v),l.forEach(v),this.h()},h(){x(c,"class","flex-1 font-semibold"),x(i,"class","flex flex-row space-x-1"),x(r,"class","flex-1 flex flex-col space-y-1 my-auto"),x(t,"class","flex flex-row space-x-2")},m(e,o){b(e,t,o),_&&_.m(t,null),w(t,n),w(t,r),w(r,i),F(a,i,null),w(i,s),w(i,c),w(c,h),w(r,u),S&&S.m(r,null),d=!0},p(e,[i]){e[4]?_?_.p(e,i):(_=qh(e),_.c(),_.m(t,n)):_&&(_.d(1),_=null);const s={};1&i&&(s.color=e[0]),2&i&&(s.number=e[1]),a.$set(s),(!d||4&i)&&M(h,e[2]),e[3]?S?S.p(e,i):(S=Xh(e),S.c(),S.m(r,null)):S&&(S.d(1),S=null)},i(e){d||(o(a.$$.fragment,e),d=!0)},o(e){l(a.$$.fragment,e),d=!1},d(e){e&&v(t),_&&_.d(),k(a),S&&S.d()}}}function Zh(e,t,n){let{color:r=null}=t,{number:i}=t,{name:a}=t,{description:s=null}=t,{image:o=null}=t;return e.$$set=e=>{"color"in e&&n(0,r=e.color),"number"in e&&n(1,i=e.number),"name"in e&&n(2,a=e.name),"description"in e&&n(3,s=e.description),"image"in e&&n(4,o=e.image)},[r,i,a,s,o]}class Jh extends e{constructor(e){super(),t(this,e,Zh,Yh,n,{color:0,number:1,name:2,description:3,image:4})}}function Qh(e){let t,n;return{c(){t=C("svg"),n=C("path"),this.h()},l(e){t=I(e,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var r=g(t);n=I(r,"path",{d:!0,class:!0}),g(n).forEach(v),r.forEach(v),this.h()},h(){x(n,"d","M12.6668 4.2735L11.7268 3.3335L8.00016 7.06016L4.2735 3.3335L3.3335 4.2735L7.06016 8.00016L3.3335 11.7268L4.2735 12.6668L8.00016 8.94016L11.7268 12.6668L12.6668 11.7268L8.94016 8.00016L12.6668 4.2735Z"),x(n,"class","fill-current"),x(t,"width","16"),x(t,"height","16"),x(t,"viewBox","0 0 16 16"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"class","svelte-180tdc7")},m(e,r){b(e,t,r),w(t,n)},d(e){e&&v(t)}}}function Kh(e){let t,n,r,i,a;return{c(){t=C("svg"),n=C("path"),r=T(),i=p("p"),a=f("ซ่อนรายชื่อ"),this.h()},l(e){t=I(e,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var s=g(t);n=I(s,"path",{d:!0,class:!0}),g(n).forEach(v),s.forEach(v),r=L(e),i=m(e,"P",{});var o=g(i);a=y(o,"ซ่อนรายชื่อ"),o.forEach(v),this.h()},h(){x(n,"d","M6.6665 4.2832V15.9499L15.8332 10.1165L6.6665 4.2832Z"),x(n,"class","fill-current"),x(t,"width","20"),x(t,"height","20"),x(t,"viewBox","0 0 20 20"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"class","svelte-180tdc7")},m(e,s){b(e,t,s),w(t,n),b(e,r,s),b(e,i,s),w(i,a)},d(e){e&&v(t),e&&v(r),e&&v(i)}}}function eu(e){let t,n,r,i,a;return{c(){t=C("svg"),n=C("path"),r=T(),i=p("p"),a=f("ดูรายชื่อ"),this.h()},l(e){t=I(e,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var s=g(t);n=I(s,"path",{d:!0,class:!0}),g(n).forEach(v),s.forEach(v),r=L(e),i=m(e,"P",{});var o=g(i);a=y(o,"ดูรายชื่อ"),o.forEach(v),this.h()},h(){x(n,"d","M11.6667 15.8332H15V4.1665H11.6667V15.8332ZM5 15.8332H8.33333V4.1665H5V15.8332Z"),x(n,"class","fill-current"),x(t,"width","20"),x(t,"height","20"),x(t,"viewBox","0 0 20 20"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"class","svelte-180tdc7")},m(e,s){b(e,t,s),w(t,n),b(e,r,s),b(e,i,s),w(i,a)},d(e){e&&v(t),e&&v(r),e&&v(i)}}}function tu(e){let t,n,r,i;function a(e,t){return"hidden"===e[0]?eu:"expanded"===e[0]?Kh:Qh}let s=a(e),o=s(e);return{c(){t=p("button"),o.c(),this.h()},l(e){t=m(e,"BUTTON",{class:!0});var n=g(t);o.l(n),n.forEach(v),this.h()},h(){x(t,"class",n="rounded-full flex p-1 font-semobold space-x-1 focus:ring ring-gold focus:outline-none "+("selected"===e[0]?"bg-white border border-black":"bg-black text-white px-3"))},m(n,a){b(n,t,a),o.m(t,null),r||(i=D(t,"click",e[1]),r=!0)},p(e,[r]){s!==(s=a(e))&&(o.d(1),o=s(e),o&&(o.c(),o.m(t,null))),1&r&&n!==(n="rounded-full flex p-1 font-semobold space-x-1 focus:ring ring-gold focus:outline-none "+("selected"===e[0]?"bg-white border border-black":"bg-black text-white px-3"))&&x(t,"class",n)},i:S,o:S,d(e){e&&v(t),o.d(),r=!1,i()}}}function nu(e,t,n){let{state:r}=t;return e.$$set=e=>{"state"in e&&n(0,r=e.state)},[r,function(t){O.call(this,e,t)}]}class ru extends e{constructor(e){super(),t(this,e,nu,tu,n,{state:0})}}function iu(e,t,n){const r=e.slice();return r[12]=t[n].name,r[14]=n,r}function au(e,t,n){const r=e.slice();return r[15]=t[n].primaryColor,r[16]=t[n].description,r[17]=t[n].years,r}function su(e){let t,n,r;return n=new ru({props:{state:"selected"}}),n.$on("click",e[7]),{c(){t=p("div"),B(n.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var r=g(t);H(n.$$.fragment,r),r.forEach(v),this.h()},h(){x(t,"class","flex justify-end")},m(e,i){b(e,t,i),F(n,t,null),r=!0},p:S,i(e){r||(o(n.$$.fragment,e),r=!0)},o(e){l(n.$$.fragment,e),r=!1},d(e){e&&v(t),k(n)}}}function ou(e){let t;return{c(){t=f("ที่มาของ สสร.")},l(e){t=y(e,"ที่มาของ สสร.")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function lu(e){let t,n;return t=new Hh({props:{description:e[16],years:e[17],color:e[15],selectedYears:e[1]}}),t.$on("select",e[6]),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};16&n&&(r.description=e[16]),16&n&&(r.years=e[17]),16&n&&(r.color=e[15]),2&n&&(r.selectedYears=e[1]),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function cu(e){let t,r,i=e[1][0],a=pu(e);return{c(){a.c(),t=G()},l(e){a.l(e),t=G()},m(e,n){a.m(e,n),b(e,t,n),r=!0},p(e,r){2&r&&n(i,i=e[1][0])?(j(),l(a,1,1,S),q(),a=pu(e),a.c(),o(a),a.m(t.parentNode,t)):a.p(e,r)},i(e){r||(o(a),r=!0)},o(e){l(a),r=!1},d(e){e&&v(t),a.d(e)}}}function hu(e){let t,n;return t=new Jh({props:{name:e[12],number:e[14]+1,color:e[4][0].primaryColor}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.name=e[12]),16&n&&(r.color=e[4][0].primaryColor),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function uu(e){let t,n,r=e[3],i=[];for(let t=0;t<r.length;t+=1)i[t]=hu(iu(e,r,t));const a=e=>l(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=G()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);t=G()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);b(e,t,r),n=!0},p(e,n){if(24&n){let s;for(r=e[3],s=0;s<r.length;s+=1){const a=iu(e,r,s);i[s]?(i[s].p(a,n),o(i[s],1)):(i[s]=hu(a),i[s].c(),o(i[s],1),i[s].m(t.parentNode,t))}for(j(),s=r.length;s<i.length;s+=1)a(s);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)o(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)l(i[e]);n=!1},d(e){P(i,e),e&&v(t)}}}function du(e){let t,n,r,i;return t=new jh({props:{isLarge:!0,label:"จำนวน สสร.",amount:e[3].length}}),r=new kh({props:{class:"max-h-64 md:max-h-96 overflow-y-auto",$$slots:{default:[uu]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment),n=T(),B(r.$$.fragment)},l(e){H(t.$$.fragment,e),n=L(e),H(r.$$.fragment,e)},m(e,a){F(t,e,a),b(e,n,a),F(r,e,a),i=!0},p(e,n){const i={};8&n&&(i.amount=e[3].length),t.$set(i);const a={};1048600&n&&(a.$$scope={dirty:n,ctx:e}),r.$set(a)},i(e){i||(o(t.$$.fragment,e),o(r.$$.fragment,e),i=!0)},o(e){l(t.$$.fragment,e),l(r.$$.fragment,e),i=!1},d(e){k(t,e),e&&v(n),k(r,e)}}}function pu(e){let t,n;return t=new Ph({props:{class:"flex flex-col space-y-2",$$slots:{default:[du]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};1048600&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function fu(e){let t,n,r,i,a,s,c=e[0].length>0&&su(e);n=new bh({props:{dark:!0,$$slots:{default:[ou]},$$scope:{ctx:e}}});let h=e[4],u=[];for(let t=0;t<h.length;t+=1)u[t]=lu(au(e,h,t));const d=e=>l(u[e],1,1,(()=>{u[e]=null}));let p=e[1].length>0&&cu(e);return{c(){c&&c.c(),t=T(),B(n.$$.fragment),r=T();for(let e=0;e<u.length;e+=1)u[e].c();i=T(),p&&p.c(),a=G()},l(e){c&&c.l(e),t=L(e),H(n.$$.fragment,e),r=L(e);for(let t=0;t<u.length;t+=1)u[t].l(e);i=L(e),p&&p.l(e),a=G()},m(e,o){c&&c.m(e,o),b(e,t,o),F(n,e,o),b(e,r,o);for(let t=0;t<u.length;t+=1)u[t].m(e,o);b(e,i,o),p&&p.m(e,o),b(e,a,o),s=!0},p(e,r){e[0].length>0?c?(c.p(e,r),1&r&&o(c,1)):(c=su(e),c.c(),o(c,1),c.m(t.parentNode,t)):c&&(j(),l(c,1,1,(()=>{c=null})),q());const s={};if(1048576&r&&(s.$$scope={dirty:r,ctx:e}),n.$set(s),82&r){let t;for(h=e[4],t=0;t<h.length;t+=1){const n=au(e,h,t);u[t]?(u[t].p(n,r),o(u[t],1)):(u[t]=lu(n),u[t].c(),o(u[t],1),u[t].m(i.parentNode,i))}for(j(),t=h.length;t<u.length;t+=1)d(t);q()}e[1].length>0?p?(p.p(e,r),2&r&&o(p,1)):(p=cu(e),p.c(),o(p,1),p.m(a.parentNode,a)):p&&(j(),l(p,1,1,(()=>{p=null})),q())},i(e){if(!s){o(c),o(n.$$.fragment,e);for(let e=0;e<h.length;e+=1)o(u[e]);o(p),s=!0}},o(e){l(c),l(n.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)l(u[e]);l(p),s=!1},d(e){c&&c.d(e),e&&v(t),k(n,e),e&&v(r),P(u,e),e&&v(i),p&&p.d(e),e&&v(a)}}}function mu(e){let t,n,r,i,a;function s(t){e[8](t)}function c(t){e[9](t)}function h(t){e[10](t)}let u={data:e[5],$$slots:{default:[fu]},$$scope:{ctx:e}};return void 0!==e[2]&&(u.nodes=e[2]),void 0!==e[0]&&(u.selectedNodes=e[0]),void 0!==e[1]&&(u.selectedYears=e[1]),t=new vh({props:u}),R.push((()=>z(t,"nodes",s))),R.push((()=>z(t,"selectedNodes",c))),R.push((()=>z(t,"selectedYears",h))),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,n){F(t,e,n),a=!0},p(e,[a]){const s={};1048603&a&&(s.$$scope={dirty:a,ctx:e}),!n&&4&a&&(n=!0,s.nodes=e[2],U((()=>n=!1))),!r&&1&a&&(r=!0,s.selectedNodes=e[0],U((()=>r=!1))),!i&&2&a&&(i=!0,s.selectedYears=e[1],U((()=>i=!1))),t.$set(s)},i(e){a||(o(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){k(t,e)}}}function gu(e,t,n){let r,i;const a=[{name:"election",description:"มีที่มาจากการเลือกตั้งโดยรัฐสภา 100%",primaryColor:zc[0],hoveredColor:Bc[0],years:["2491","2539"]},{name:"king",description:"มีที่มาจากการแต่งตั้งโดยพระมหากษัตริย์ 100%",primaryColor:zc[1],hoveredColor:Bc[1],years:["2502","2550"]}],s=Dc.map((e=>{const t=a.findIndex((({years:t})=>t.includes(e))),{primaryColor:n,hoveredColor:r}=a[t];return new Array(Nc[e]).fill({primaryColor:n,hoveredColor:r,group:e,data:{groupIndex:t}})}));let o=[],l=[],c=[];return e.$$.update=()=>{3&e.$$.dirty&&n(4,r=c.length>0&&l.length>0?[a[l[0].data.groupIndex]]:a),2&e.$$.dirty&&n(3,i=c?Ic.filter((({year:e})=>c.includes(e))):[])},[l,c,o,i,r,s,({detail:e})=>{n(0,l=o.filter((({group:t})=>t===e)))},()=>{n(0,l=[])},function(e){o=e,n(2,o)},function(e){l=e,n(0,l)},function(e){c=e,n(1,c)}]}class yu extends e{constructor(e){super(),t(this,e,gu,mu,n,{})}}var vu=[{year:"2491 2502",name:"หลวงประกอบนิติสาร"},{year:"2502 2539",name:"ประมาณ อดิเรกสาร"},{year:"2539 2550",name:"สมคิด เลิศไพฑูรย์"},{year:"2539 2550",name:"เสรี สุวรรณภานนท์"},{year:"2539 2550",name:"เดโช สวนานนท์"}],xu=J((function(e,t){!function(t){const n=2*Math.PI;var r;r=function(e,t){var r=Math.random(),i=Math.random();return Math.sqrt(-2*Math.log(r))*Math.cos(n*i)*t+e},e.exports=r}()})),_u=J((function(e,t){!function(t){const n=xu;var r=function(e){var t=Math.abs(e),n=1/(1+t/2),r=n*Math.exp(-t*t-1.26551223+n*(1.00002368+n*(.37409196+n*(.09678418+n*(n*(.27886807+n*(n*(1.48851587+n*(.17087277*n-.82215223))-1.13520398))-.18628806)))));return e>=0?r:2-r},i=function(e,t){if(t<=0)throw new Error("Variance must be > 0 (but was "+t+")");this.mean=e,this.variance=t,this.standardDeviation=Math.sqrt(t)};i.prototype.pdf=function(e){var t=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(e-this.mean,2)/(2*this.variance))/t},i.prototype.cdf=function(e){return.5*r(-(e-this.mean)/(this.standardDeviation*Math.sqrt(2)))},i.prototype.ppf=function(e){return this.mean-this.standardDeviation*Math.sqrt(2)*function(e){if(e>=2)return-100;if(e<=0)return 100;for(var t=e<1?e:2-e,n=Math.sqrt(-2*Math.log(t/2)),i=-.70711*((2.30753+.27061*n)/(1+n*(.99229+.04481*n))-n),a=0;a<2;a++){var s=r(i)-t;i+=s/(1.1283791670955126*Math.exp(-i*i)-i*s)}return e<1?i:-i}(2*e)},i.prototype.mul=function(e){if("number"==typeof e)return this.scale(e);var t=1/this.variance,n=1/e.variance;return o(t+n,t*this.mean+n*e.mean)},i.prototype.div=function(e){if("number"==typeof e)return this.scale(1/e);var t=1/this.variance,n=1/e.variance;return o(t-n,t*this.mean-n*e.mean)},i.prototype.add=function(e){return s(this.mean+e.mean,this.variance+e.variance)},i.prototype.sub=function(e){return s(this.mean-e.mean,this.variance+e.variance)},i.prototype.scale=function(e){return s(this.mean*e,this.variance*e*e)},i.prototype.random=function(e){let t=this.mean,r=this.standardDeviation;return Array(e).fill(0).map((()=>n(t,r)))};var a,s=function(e,t){return new i(e,t)},o=function(e,t){return s(t/e,1/e)};a=s,e.exports=a}()}));function bu(e,t,n){const r=e.slice();return r[19]=t[n].index,r[20]=t[n].category,r[21]=t[n].group,r[22]=t[n].years,r[23]=K(t[n],["index","category","group","years"]),r[25]=n,r}function wu(e){let t,n,r,i,a,s,o,l,c=e[1].length+"";return{c(){t=p("div"),n=f(e[0]),r=T(),i=p("div"),a=f(c),s=T(),o=p("div"),l=f("คน"),this.h()},l(h){t=m(h,"DIV",{class:!0});var u=g(t);n=y(u,e[0]),u.forEach(v),r=L(h),i=m(h,"DIV",{class:!0});var d=g(i);a=y(d,c),d.forEach(v),s=L(h),o=m(h,"DIV",{class:!0});var p=g(o);l=y(p,"คน"),p.forEach(v),this.h()},h(){x(t,"class","flex-1 my-auto"),x(i,"class","text-h4 font-bold"),x(o,"class","my-auto")},m(e,c){b(e,t,c),w(t,n),b(e,r,c),b(e,i,c),w(i,a),b(e,s,c),b(e,o,c),w(o,l)},p(e,t){1&t&&M(n,e[0]),2&t&&c!==(c=e[1].length+"")&&M(a,c)},d(e){e&&v(t),e&&v(r),e&&v(i),e&&v(s),e&&v(o)}}}function Mu(e){let t,n,r=e[2].get(e[20])+"";return{c(){t=p("div"),n=f(r),this.h()},l(e){t=m(e,"DIV",{class:!0});var i=g(t);n=y(i,r),i.forEach(v),this.h()},h(){x(t,"class","font-semibold mb-2")},m(e,r){b(e,t,r),w(t,n)},p(e,t){132&t&&r!==(r=e[2].get(e[20])+"")&&M(n,r)},d(e){e&&v(t)}}}function Su(e){let t,n;const r=[e[23]];let i={};for(let e=0;e<r.length;e+=1)i=N(i,r[e]);return t=new Jh({props:i}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const i=128&n?V(r,[W(e[23])]):{};t.$set(i)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Eu(e){let t,n,r,i,a,s,c,h,u,d=e[20]&&(0===e[25]||e[20]!==e[7][e[25]-1].category)&&Mu(e);function f(){return e[16](e[21])}return i=new kh({props:{class:"text-left",$$slots:{default:[Su]},$$scope:{ctx:e}}}),{c(){t=p("div"),d&&d.c(),n=T(),r=p("button"),B(i.$$.fragment),a=T(),this.h()},l(e){t=m(e,"DIV",{});var s=g(t);d&&d.l(s),n=L(s),r=m(s,"BUTTON",{class:!0});var o=g(r);H(i.$$.fragment,o),o.forEach(v),a=L(s),s.forEach(v),this.h()},h(){x(r,"class","w-full rounded focus:ring ring-gold focus:outline-none")},m(e,s){b(e,t,s),d&&d.m(t,null),w(t,n),w(t,r),F(i,r,null),w(t,a),c=!0,h||(u=D(r,"click",f),h=!0)},p(r,a){!(e=r)[20]||0!==e[25]&&e[20]===e[7][e[25]-1].category?d&&(d.d(1),d=null):d?d.p(e,a):(d=Mu(e),d.c(),d.m(t,n));const s={};67108992&a&&(s.$$scope={dirty:a,ctx:e}),i.$set(s)},i(e){c||(o(i.$$.fragment,e),Y((()=>{s||(s=Z(t,Th,{},!0)),s.run(1)})),c=!0)},o(e){l(i.$$.fragment,e),s||(s=Z(t,Th,{},!1)),s.run(0),c=!1},d(e){e&&v(t),d&&d.d(),k(i),e&&s&&s.end(),h=!1,u()}}}function Tu(e){let t,n,r=e[7],i=[];for(let t=0;t<r.length;t+=1)i[t]=Eu(bu(e,r,t));const a=e=>l(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=G()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);t=G()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);b(e,t,r),n=!0},p(e,n){if(1156&n){let s;for(r=e[7],s=0;s<r.length;s+=1){const a=bu(e,r,s);i[s]?(i[s].p(a,n),o(i[s],1)):(i[s]=Eu(a),i[s].c(),o(i[s],1),i[s].m(t.parentNode,t))}for(j(),s=r.length;s<i.length;s+=1)a(s);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)o(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)l(i[e]);n=!1},d(e){P(i,e),e&&v(t)}}}function Lu(e){let t,n,r,i,a,s,c,h,u,d,f,y,_,M,S;function E(t){e[13](t)}r=new ru({props:{state:e[8]}}),r.$on("click",e[12]);let A={class:"flex flex-row space-x-2 text-left",$$slots:{default:[wu]},$$scope:{ctx:e}};return void 0!==e[6]&&(A.clientHeight=e[6]),c=new bh({props:A}),R.push((()=>z(c,"clientHeight",E))),y=new Ph({props:{style:"min-height: "+e[6]+"px;",class:"flex-1 overflow-y-auto space-y-2 max-h-64 md:max-h-96 transition-transform duration-200 ease-in-out "+(e[4]?"":"transform translate-x-2 md:translate-x-2"),$$slots:{default:[Tu]},$$scope:{ctx:e}}}),{c(){t=p("div"),n=p("div"),B(r.$$.fragment),i=T(),a=p("div"),s=p("button"),B(c.$$.fragment),f=T(),B(y.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0,style:!0});var o=g(t);n=m(o,"DIV",{class:!0});var l=g(n);H(r.$$.fragment,l),l.forEach(v),i=L(o),a=m(o,"DIV",{});var h=g(a);s=m(h,"BUTTON",{class:!0});var u=g(s);H(c.$$.fragment,u),u.forEach(v),h.forEach(v),o.forEach(v),f=L(e),H(y.$$.fragment,e),this.h()},h(){x(n,"class","flex justify-end"),x(s,"class","w-full rounded focus:ring ring-gold focus:outline-none"),Y((()=>e[15].call(a))),x(t,"class","space-y-2 transition-transform duration-200 ease-in-out z-20"),x(t,"style",d=e[4]?"":`transform: translateY(${e[6]}px);`)},m(o,l){b(o,t,l),w(t,n),F(r,n,null),w(t,i),w(t,a),w(a,s),F(c,s,null),u=Q(a,e[15].bind(a)),b(o,f,l),F(y,o,l),_=!0,M||(S=D(s,"click",e[14]),M=!0)},p(e,n){const i={};256&n&&(i.state=e[8]),r.$set(i);const a={};67108867&n&&(a.$$scope={dirty:n,ctx:e}),!h&&64&n&&(h=!0,a.clientHeight=e[6],U((()=>h=!1))),c.$set(a),(!_||80&n&&d!==(d=e[4]?"":`transform: translateY(${e[6]}px);`))&&x(t,"style",d);const s={};64&n&&(s.style="min-height: "+e[6]+"px;"),16&n&&(s.class="flex-1 overflow-y-auto space-y-2 max-h-64 md:max-h-96 transition-transform duration-200 ease-in-out "+(e[4]?"":"transform translate-x-2 md:translate-x-2")),67108996&n&&(s.$$scope={dirty:n,ctx:e}),y.$set(s)},i(e){_||(o(r.$$.fragment,e),o(c.$$.fragment,e),o(y.$$.fragment,e),_=!0)},o(e){l(r.$$.fragment,e),l(c.$$.fragment,e),l(y.$$.fragment,e),_=!1},d(e){e&&v(t),k(r),k(c),u(),e&&v(f),k(y,e),M=!1,S()}}}function Au(e){let t,n,r,i;function a(t){e[17](t)}function s(t){e[18](t)}let c={data:e[9],isFreeze:e[4],$$slots:{default:[Lu]},$$scope:{ctx:e}};return void 0!==e[5]&&(c.nodes=e[5]),void 0!==e[3]&&(c.selectedNodes=e[3]),t=new vh({props:c}),R.push((()=>z(t,"nodes",a))),R.push((()=>z(t,"selectedNodes",s))),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,n){F(t,e,n),i=!0},p(e,[i]){const a={};16&i&&(a.isFreeze=e[4]),67109335&i&&(a.$$scope={dirty:i,ctx:e}),!n&&32&i&&(n=!0,a.nodes=e[5],U((()=>n=!1))),!r&&8&i&&(r=!0,a.selectedNodes=e[3],U((()=>r=!1))),t.$set(a)},i(e){i||(o(t.$$.fragment,e),i=!0)},o(e){l(t.$$.fragment,e),i=!1},d(e){k(t,e)}}}function Pu(e,t,n){let r,i,{title:a}=t,{membersData:s}=t,{categoriesLabel:o=null}=t;const l=Dc.map((e=>{const t=s.filter((t=>t.years.includes(e))),n=((e,t,n)=>{const r=(t-e)/n;return _u(0,r/3).random(n).map(((n,i)=>{const a=Math.round(i*r+n);return a<e?t+a-e:a>t?e+a-t:a})).sort()})(0,Nc[e],t.length),r=new Array(Nc[e]).fill({});return t.forEach((({color:e,index:t,name:i,number:a,image:s,group:o},l)=>{r[n[l]]={primaryColor:e,data:{index:t,number:a,name:i,image:s},group:o,isIndividual:!0}})),r}));let c,h,u=!1,d=0;const p=e=>{n(3,h=c.filter((({group:t})=>t===e)))},f=()=>{switch(r){case"hidden":n(4,u=!0);break;case"selected":n(3,h=[]);case"expanded":n(4,u=!1)}};return e.$$set=e=>{"title"in e&&n(0,a=e.title),"membersData"in e&&n(1,s=e.membersData),"categoriesLabel"in e&&n(2,o=e.categoriesLabel)},e.$$.update=()=>{8&e.$$.dirty&&h&&h.length>0&&n(4,u=!0),24&e.$$.dirty&&n(8,r=u?(null==h?void 0:h.length)>0?"selected":"expanded":"hidden"),26&e.$$.dirty&&n(7,i=u?h&&h.length>0?[...new Set(h.map((({data:e})=>s.find((({index:t})=>e.index===t)))))]:s:[])},[a,s,o,h,u,c,d,i,r,l,p,f,()=>f(),function(e){d=e,n(6,d)},()=>f(),function(){d=this.clientHeight,n(6,d)},e=>p(e),function(e){c=e,n(5,c)},function(e){h=e,n(3,h)}]}class Ru extends e{constructor(e){super(),t(this,e,Pu,Au,n,{title:0,membersData:1,categoriesLabel:2})}}function Cu(e){let t,n;return t=new Ru({props:{title:"สสร. มากกว่า 1 ครั้ง",membersData:e[0]}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p:S,i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Iu(e){var t=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};return[vu.map(((e,n)=>{var{year:r}=e,i=t(e,["year"]);const a=r.split(" ");return Object.assign({index:n,years:a,number:n+1,color:zc[n],description:`เป็นสมาชิกของสภาร่างรัฐธรรมนูญ พ.ศ. ${a[0]} และสภาร่างรัฐธรรมนูญ พ.ศ. ${a[1]}`,image:`images/people/04_no${n+1}_${a.join("-")}.png`,group:n+1},i)}))]}class Du extends e{constructor(e){super(),t(this,e,Iu,Cu,n,{})}}function Nu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $u(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const a=r+i>>>1;n(e[a],t)<0?r=a+1:i=a}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Nu(e(t),n)}(e)),{left:r,center:function(e,n,i,a){null==i&&(i=0),null==a&&(a=e.length);const s=r(e,n,i,a-1);return s>i&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const a=r+i>>>1;n(e[a],t)>0?i=a:r=a+1}return r}}}const Ou=$u(Nu).right;$u((function(e){return null===e?NaN:+e})).center;var zu=Ou,Bu=Math.sqrt(50),Hu=Math.sqrt(10),Fu=Math.sqrt(2);function Uu(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Bu?10:a>=Hu?5:a>=Fu?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Bu?10:a>=Hu?5:a>=Fu?2:1)}var ku={value:()=>{}};function Gu(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Vu(r)}function Vu(e){this._=e}function Wu(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function ju(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function qu(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ku,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function Xu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zu(){}Vu.prototype=Gu.prototype={constructor:Vu,on:function(e,t){var n,r=this._,i=Wu(e+"",r),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=qu(r[n],e.name,t);else if(null==t)for(n in r)r[n]=qu(r[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=ju(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vu(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var Ju=1/.7,Qu="\\s*([+-]?\\d+)\\s*",Ku="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ed="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",td=/^#([0-9a-f]{3,8})$/,nd=new RegExp("^rgb\\("+[Qu,Qu,Qu]+"\\)$"),rd=new RegExp("^rgb\\("+[ed,ed,ed]+"\\)$"),id=new RegExp("^rgba\\("+[Qu,Qu,Qu,Ku]+"\\)$"),ad=new RegExp("^rgba\\("+[ed,ed,ed,Ku]+"\\)$"),sd=new RegExp("^hsl\\("+[Ku,ed,ed]+"\\)$"),od=new RegExp("^hsla\\("+[Ku,ed,ed,Ku]+"\\)$"),ld={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cd(){return this.rgb().formatHex()}function hd(){return this.rgb().formatRgb()}function ud(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=td.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?dd(t):3===n?new gd(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?pd(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?pd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=nd.exec(e))?new gd(t[1],t[2],t[3],1):(t=rd.exec(e))?new gd(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=id.exec(e))?pd(t[1],t[2],t[3],t[4]):(t=ad.exec(e))?pd(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=sd.exec(e))?_d(t[1],t[2]/100,t[3]/100,1):(t=od.exec(e))?_d(t[1],t[2]/100,t[3]/100,t[4]):ld.hasOwnProperty(e)?dd(ld[e]):"transparent"===e?new gd(NaN,NaN,NaN,0):null}function dd(e){return new gd(e>>16&255,e>>8&255,255&e,1)}function pd(e,t,n,r){return r<=0&&(e=t=n=NaN),new gd(e,t,n,r)}function fd(e){return e instanceof Zu||(e=ud(e)),e?new gd((e=e.rgb()).r,e.g,e.b,e.opacity):new gd}function md(e,t,n,r){return 1===arguments.length?fd(e):new gd(e,t,n,null==r?1:r)}function gd(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function yd(){return"#"+xd(this.r)+xd(this.g)+xd(this.b)}function vd(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function xd(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function _d(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wd(e,t,n,r)}function bd(e){if(e instanceof wd)return new wd(e.h,e.s,e.l,e.opacity);if(e instanceof Zu||(e=ud(e)),!e)return new wd;if(e instanceof wd)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(s=t===a?(n-r)/o+6*(n<r):n===a?(r-t)/o+2:(t-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new wd(s,o,l,e.opacity)}function wd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Md(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Xu(Zu,ud,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:cd,formatHex:cd,formatHsl:function(){return bd(this).formatHsl()},formatRgb:hd,toString:hd}),Xu(gd,md,Yu(Zu,{brighter:function(e){return e=null==e?Ju:Math.pow(Ju,e),new gd(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new gd(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yd,formatHex:yd,formatRgb:vd,toString:vd})),Xu(wd,(function(e,t,n,r){return 1===arguments.length?bd(e):new wd(e,t,n,null==r?1:r)}),Yu(Zu,{brighter:function(e){return e=null==e?Ju:Math.pow(Ju,e),new wd(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new wd(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new gd(Md(e>=240?e-240:e+120,i,r),Md(e,i,r),Md(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Sd=e=>()=>e;function Ed(e){return 1==(e=+e)?Td:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Sd(isNaN(t)?n:t)}}function Td(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Sd(isNaN(e)?t:e)}var Ld=function e(t){var n=Ed(t);function r(e,t){var r=n((e=md(e)).r,(t=md(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),s=Td(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function Ad(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function Pd(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=Od(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=a[n](e);return s}}function Rd(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Cd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Id(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Od(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Dd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nd=new RegExp(Dd.source,"g");function $d(e,t){var n,r,i,a=Dd.lastIndex=Nd.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=Dd.exec(e))&&(r=Nd.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Cd(n,r)})),a=Nd.lastIndex;return a<t.length&&(i=t.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function Od(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?Sd(t):("number"===i?Cd:"string"===i?(n=ud(t))?(t=n,Ld):$d:t instanceof ud?Ld:t instanceof Date?Rd:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Pd:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Id:Cd:Ad))(e,t)}function zd(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Bd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Hd(e){return(e=Bd(Math.abs(e)))?e[1]:NaN}Gu("start","end","cancel","interrupt");var Fd,Ud=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kd(e){if(!(t=Ud.exec(e)))throw new Error("invalid format: "+e);var t;return new Gd({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Gd(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Vd(e,t){var n=Bd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}kd.prototype=Gd.prototype,Gd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Wd={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Vd(100*e,t),r:Vd,s:function(e,t){var n=Bd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Fd=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Bd(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jd(e){return e}var qd,Xd,Yd,Zd=Array.prototype.map,Jd=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qd(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?jd:(t=Zd.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(e.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?jd:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Zd.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",h=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=kd(e)).fill,n=e.align,u=e.sign,d=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Wd[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===d?a:/[%p]/.test(v)?l:"",b=Wd[v],w=/[defgprs%]/.test(v);function M(e){var i,a,l,d=x,M=_;if("c"===v)M=b(e)+M,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?h:b(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==u&&(S=!1),d=(S?"("===u?u:c:"-"===u||"("===u?"":u)+d,M=("s"===v?Jd[8+Fd/3]:"")+M+(S&&"("===u?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){M=(46===l?s+e.slice(i+1):e.slice(i))+M,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var E=d.length+e.length+M.length,T=E<f?new Array(f-E+1).join(t):"";switch(m&&p&&(e=r(T+e,T.length?f-M.length:1/0),T=""),n){case"<":e=d+e+M+T;break;case"=":e=d+T+e+M;break;case"^":e=T.slice(0,E=T.length>>1)+d+e+M+T.slice(E);break;default:e=T+d+e+M}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return e+""},M}return{format:u,formatPrefix:function(e,t){var n=u(((e=kd(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Hd(t)/3))),i=Math.pow(10,-r),a=Jd[8+r/3];return function(e){return n(i*e)+a}}}}function Kd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ep(e){return+e}qd=Qd({thousands:",",grouping:[3],currency:["$",""]}),Xd=qd.format,Yd=qd.formatPrefix;var tp=[0,1];function np(e){return e}function rp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ip(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=rp(i,r),a=n(s,a)):(r=rp(r,i),a=n(a,s)),function(e){return a(r(e))}}function ap(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=rp(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=zu(e,t,1,r)-1;return a[n](i[n](t))}}function sp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function op(){var e,t,n,r,i,a,s=tp,o=tp,l=Od,c=np;function h(){var e,t,n,l=Math.min(s.length,o.length);return c!==np&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?ap:ip,i=a=null,u}function u(t){return null==t||isNaN(t=+t)?n:(i||(i=r(s.map(e),o,l)))(e(c(t)))}return u.invert=function(n){return c(t((a||(a=r(o,s.map(e),Cd)))(n)))},u.domain=function(e){return arguments.length?(s=Array.from(e,ep),h()):s.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),h()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=zd,h()},u.clamp=function(e){return arguments.length?(c=!!e||np,h()):c!==np},u.interpolate=function(e){return arguments.length?(l=e,h()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,h()}}function lp(){return op()(np,np)}function cp(e,t,n,r){var i,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Bu?i*=10:a>=Hu?i*=5:a>=Fu&&(i*=2),t<e?-i:i}(e,t,n);switch((r=kd(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hd(t)/3)))-Hd(Math.abs(e)))}(a,s))||(r.precision=i),Yd(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hd(t)-Hd(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Hd(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return Xd(r)}function hp(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(s=Uu(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),r=Math.round(t/s);for(n*s<e&&++n,r*s>t&&--r,a=new Array(i=r-n+1);++o<i;)a[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),r=Math.round(t*s);for(n/s<e&&++n,r/s>t&&--r,a=new Array(i=r-n+1);++o<i;)a[o]=(n+o)/s}return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return cp(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),s=0,o=a.length-1,l=a[s],c=a[o],h=10;for(c<l&&(i=l,l=c,c=i,i=s,s=o,o=i);h-- >0;){if((i=Uu(l,c,n))===r)return a[s]=l,a[o]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function up(){var e=lp();return e.copy=function(){return sp(e,up())},Kd.apply(e,arguments),hp(e)}var dp,pp;!function(e){e[e.pre_start=0]="pre_start",e[e.start=1]="start",e[e.drafted=2]="drafted",e[e.done=3]="done",e[e.post_done=4]="post_done"}(dp||(dp={})),function(e){e[e.hide=0]="hide",e[e.fade=1]="fade",e[e.show=2]="show"}(pp||(pp={}));const fp={[dp.pre_start]:{firstPin:pp.hide,draftPhase:pp.hide,donePhase:pp.hide,lastPin:pp.hide},[dp.start]:{firstPin:pp.show,draftPhase:pp.hide,donePhase:pp.hide,lastPin:pp.hide},[dp.drafted]:{firstPin:pp.fade,draftPhase:pp.show,donePhase:pp.hide,lastPin:pp.hide},[dp.done]:{firstPin:pp.fade,draftPhase:pp.fade,donePhase:pp.show,lastPin:pp.show},[dp.post_done]:{firstPin:pp.show,draftPhase:pp.show,donePhase:pp.show,lastPin:pp.show}};function mp(e){return"[object Date]"===Object.prototype.toString.call(e)}function gp(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>gp(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(mp(e)&&mp(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach((n=>{r[n]=gp(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=r[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function yp(e,t={}){const n=ee(e);let r,i=e;function a(a,s){if(null==e)return n.set(e=a),Promise.resolve();i=a;let o=r,l=!1,{delay:c=0,duration:h=400,easing:u=re,interpolate:d=gp}=N(N({},t),s);if(0===h)return o&&(o.abort(),o=null),n.set(e=i),Promise.resolve();const p=te()+c;let f;return r=ne((t=>{if(t<p)return!0;l||(f=d(e,a),"function"==typeof h&&(h=h(e,a)),l=!0),o&&(o.abort(),o=null);const r=t-p;return r>h?(n.set(e=a),!1):(n.set(e=f(u(r/h))),!0)})),r.promise}return{set:a,update:(t,n)=>a(t(i,e),n),subscribe:n.subscribe}}function vp(e){let t,n,r;return{c(){t=C("rect"),this.h()},l(e){t=I(e,"rect",{x:!0,y:!0,opacity:!0,width:!0,height:!0,fill:!0}),g(t).forEach(v),this.h()},h(){x(t,"x",e[0]),x(t,"y",e[1]),x(t,"opacity",n=e[6].opacity),x(t,"width",r=e[6].width),x(t,"height",e[2]),x(t,"fill",e[3])},m(n,r){b(n,t,r),e[13](t)},p(e,[i]){1&i&&x(t,"x",e[0]),2&i&&x(t,"y",e[1]),64&i&&n!==(n=e[6].opacity)&&x(t,"opacity",n),64&i&&r!==(r=e[6].width)&&x(t,"width",r),4&i&&x(t,"height",e[2]),8&i&&x(t,"fill",e[3])},i:S,o:S,d(n){n&&v(t),e[13](null)}}}function xp(e,t,n){let r,i,a=S;e.$$.on_destroy.push((()=>a()));let s,{x:o,y:l,width:c,height:h,fill:u,appearance:d={from:pp.hide,to:pp.show},duration:p,delay:f}=t,m={[pp.hide]:{opacity:0,width:0},[pp.fade]:{opacity:.5,width:c},[pp.show]:{opacity:1,width:c}};return e.$$set=e=>{"x"in e&&n(0,o=e.x),"y"in e&&n(1,l=e.y),"width"in e&&n(7,c=e.width),"height"in e&&n(2,h=e.height),"fill"in e&&n(3,u=e.fill),"appearance"in e&&n(8,d=e.appearance),"duration"in e&&n(9,p=e.duration),"delay"in e&&n(10,f=e.delay)},e.$$.update=()=>{128&e.$$.dirty&&n(12,m={[pp.hide]:{opacity:0,width:0},[pp.fade]:{opacity:.5,width:c},[pp.show]:{opacity:1,width:c}}),5888&e.$$.dirty&&(n(5,r=yp(Object.assign({},m[d.from]),{delay:f,duration:p})),a(),a=ie(r,(e=>n(6,i=e))))},[o,l,h,u,s,r,i,c,d,p,f,function(){r.set(Object.assign({},m[d.from]),{duration:0}),ae(r,i=Object.assign({},m[d.to]),i)},m,function(e){R[e?"unshift":"push"]((()=>{s=e,n(4,s)}))}]}class _p extends e{constructor(e){super(),t(this,e,xp,vp,n,{x:0,y:1,width:7,height:2,fill:3,appearance:8,duration:9,delay:10,replay:11})}get replay(){return this.$$.ctx[11]}}function bp(e){let t,n,r,i;return{c(){t=C("g"),n=C("circle"),r=C("line"),this.h()},l(e){t=I(e,"g",{opacity:!0});var i=g(t);n=I(i,"circle",{r:!0}),g(n).forEach(v),r=I(i,"line",{y2:!0,stroke:!0}),g(r).forEach(v),i.forEach(v),this.h()},h(){x(n,"r",e[0]),x(r,"y2",e[1]),x(r,"stroke",e[2]),x(t,"opacity",i=e[5].opacity)},m(i,a){b(i,t,a),w(t,n),w(t,r),e[10](t)},p(e,[a]){1&a&&x(n,"r",e[0]),2&a&&x(r,"y2",e[1]),4&a&&x(r,"stroke",e[2]),32&a&&i!==(i=e[5].opacity)&&x(t,"opacity",i)},i:S,o:S,d(n){n&&v(t),e[10](null)}}}function wp(e,t,n){let r,i,a=S;e.$$.on_destroy.push((()=>a()));let s={[pp.hide]:{opacity:0},[pp.fade]:{opacity:.5},[pp.show]:{opacity:1}},{radius:o=5,height:l=20,fill:c="black",appearance:h={from:pp.hide,to:pp.show},delay:u,duration:d}=t,p=null;return e.$$set=e=>{"radius"in e&&n(0,o=e.radius),"height"in e&&n(1,l=e.height),"fill"in e&&n(2,c=e.fill),"appearance"in e&&n(6,h=e.appearance),"delay"in e&&n(7,u=e.delay),"duration"in e&&n(8,d=e.duration)},e.$$.update=()=>{448&e.$$.dirty&&(n(4,r=yp(Object.assign({},s[h.from]),{delay:u,duration:d})),a(),a=ie(r,(e=>n(5,i=e))))},[o,l,c,p,r,i,h,u,d,function(){r.set(Object.assign({},s[h.from]),{duration:0}),ae(r,i=Object.assign({},s[h.to]),i)},function(e){R[e?"unshift":"push"]((()=>{p=e,n(3,p)}))}]}class Mp extends e{constructor(e){super(),t(this,e,wp,bp,n,{radius:0,height:1,fill:2,appearance:6,delay:7,duration:8,replay:9})}get replay(){return this.$$.ctx[9]}}function Sp(e,t,n){const r=e.slice();return r[16]=t[n],r[17]=t,r[18]=n,r}function Ep(e){let t,n,r=e[18];const i=()=>e[12](t,r),a=()=>e[12](null,r);let s={x:e[3](e[2][e[18]].x),y:e[5]-Lp-e[0].bottom,width:e[3](e[16].x)-e[3](e[2][e[18]].x),height:Lp,fill:e[16].fill,duration:1e3,delay:1e3*(e[18]+1),appearance:{from:e[18]?e[1].from.donePhase:e[1].from.draftPhase,to:e[18]?e[1].to.donePhase:e[1].to.draftPhase}};return t=new _p({props:s}),i(),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){r!==e[18]&&(a(),r=e[18],i());const s={};12&n&&(s.x=e[3](e[2][e[18]].x)),32&n&&(s.y=e[5]-Lp-e[0].bottom),524&n&&(s.width=e[3](e[16].x)-e[3](e[2][e[18]].x)),512&n&&(s.fill=e[16].fill),2&n&&(s.appearance={from:e[18]?e[1].from.donePhase:e[1].from.draftPhase,to:e[18]?e[1].to.donePhase:e[1].to.draftPhase}),t.$set(s)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){a(),k(t,e)}}}function Tp(e){let t,n,r,i,a,s,c,h,u,d={radius:Ap,height:e[5]-e[0].top-e[0].bottom+.5*e[0].top,fill:"black",appearance:{from:e[1].from.firstPin,to:e[1].to.firstPin},duration:1e3,delay:0};i=new Mp({props:d}),e[11](i);let f=e[9],y=[];for(let t=0;t<f.length;t+=1)y[t]=Ep(Sp(e,f,t));const _=e=>l(y[e],1,1,(()=>{y[e]=null}));let M={radius:Ap,height:e[5]-e[0].top-e[0].bottom+.5*e[0].top,fill:"black",appearance:{from:e[1].from.lastPin,to:e[1].to.lastPin},duration:1e3,delay:3e3};return s=new Mp({props:M}),e[13](s),{c(){t=p("div"),n=C("svg"),r=C("g"),B(i.$$.fragment);for(let e=0;e<y.length;e+=1)y[e].c();a=C("g"),B(s.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var o=g(t);n=I(o,"svg",{class:!0});var l=g(n);r=I(l,"g",{transform:!0});var c=g(r);H(i.$$.fragment,c),c.forEach(v);for(let e=0;e<y.length;e+=1)y[e].l(l);a=I(l,"g",{transform:!0});var h=g(a);H(s.$$.fragment,h),h.forEach(v),l.forEach(v),o.forEach(v),this.h()},h(){x(r,"transform",`translate(${.5*e[0].left}, ${.5*e[0].top})`),x(a,"transform",c=`translate(${e[3](e[2].reduce(Pp,0))+.5*e[0].right}, ${.5*e[0].top})`),x(n,"class","w-full h-full"),x(t,"class","w-full h-full"),Y((()=>e[14].call(t)))},m(o,l){b(o,t,l),w(t,n),w(n,r),F(i,r,null);for(let e=0;e<y.length;e+=1)y[e].m(n,null);w(n,a),F(s,a,null),h=Q(t,e[14].bind(t)),u=!0},p(e,[t]){const r={};if(32&t&&(r.height=e[5]-e[0].top-e[0].bottom+.5*e[0].top),2&t&&(r.appearance={from:e[1].from.firstPin,to:e[1].to.firstPin}),i.$set(r),815&t){let r;for(f=e[9],r=0;r<f.length;r+=1){const i=Sp(e,f,r);y[r]?(y[r].p(i,t),o(y[r],1)):(y[r]=Ep(i),y[r].c(),o(y[r],1),y[r].m(n,a))}for(j(),r=f.length;r<y.length;r+=1)_(r);q()}const l={};32&t&&(l.height=e[5]-e[0].top-e[0].bottom+.5*e[0].top),2&t&&(l.appearance={from:e[1].from.lastPin,to:e[1].to.lastPin}),s.$set(l),(!u||12&t&&c!==(c=`translate(${e[3](e[2].reduce(Pp,0))+.5*e[0].right}, ${.5*e[0].top})`))&&x(a,"transform",c)},i(e){if(!u){o(i.$$.fragment,e);for(let e=0;e<f.length;e+=1)o(y[e]);o(s.$$.fragment,e),u=!0}},o(e){l(i.$$.fragment,e),y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)l(y[e]);l(s.$$.fragment,e),u=!1},d(n){n&&v(t),e[11](null),k(i),P(y,n),e[13](null),k(s),h()}}}const Lp=12,Ap=6,Pp=(e,t)=>e+t.x;function Rp(e,t,n){let r,i=700,a=80;const s={top:20,right:20,bottom:20,left:20};let o,l,{appearance:c={from:{firstPin:pp.show,draftPhase:pp.show,donePhase:pp.show,lastPin:pp.show},to:{firstPin:pp.show,draftPhase:pp.show,donePhase:pp.show,lastPin:pp.show}}}=t,{data:h=[{x:0,event:"start",fill:"black"}]}=t,u=0,{X:d=up().domain([0,Math.max(...h.map((({x:e})=>e)))]).range([s.left,i-s.right])}=t,p=[];return e.$$set=e=>{"appearance"in e&&n(1,c=e.appearance),"data"in e&&n(2,h=e.data),"X"in e&&n(3,d=e.X)},e.$$.update=()=>{32772&e.$$.dirty&&n(9,r=h.reduce(((e,t,n)=>0===n?e:[...e,Object.assign(Object.assign({},t),{x:u+=t.x})]),[]))},[s,c,h,d,i,a,o,l,p,r,function(){o.replay(),l.replay(),p.forEach((e=>e.replay()))},function(e){R[e?"unshift":"push"]((()=>{o=e,n(6,o)}))},function(e,t){R[e?"unshift":"push"]((()=>{p[t]=e,n(8,p)}))},function(e){R[e?"unshift":"push"]((()=>{l=e,n(7,l)}))},function(){a=this.clientHeight,i=this.clientWidth,n(5,a),n(4,i)}]}class Cp extends e{constructor(e){super(),t(this,e,Rp,Tp,n,{margin:0,appearance:1,data:2,X:3,replay:10})}get margin(){return this.$$.ctx[0]}get replay(){return this.$$.ctx[10]}}const Ip=e=>({}),Dp=e=>({}),Np=e=>({}),$p=e=>({});function Op(e){let t,n,c,h,u,d,_,S,E,A,P,R,C,I;const D=e[2].topic,N=r(D,e,e[1],$p),$=e[2].description,O=r($,e,e[1],Dp);return{c(){t=p("div"),n=p("div"),c=f("หัวข้อที่ "),h=f(e[0]),u=T(),d=p("div"),_=p("div"),S=T(),E=p("h2"),N&&N.c(),A=T(),P=p("div"),R=T(),C=p("p"),O&&O.c(),this.h()},l(r){t=m(r,"DIV",{class:!0});var i=g(t);n=m(i,"DIV",{class:!0});var a=g(n);c=y(a,"หัวข้อที่ "),h=y(a,e[0]),a.forEach(v),u=L(i),d=m(i,"DIV",{class:!0});var s=g(d);_=m(s,"DIV",{class:!0}),g(_).forEach(v),S=L(s),E=m(s,"H2",{class:!0});var o=g(E);N&&N.l(o),o.forEach(v),A=L(s),P=m(s,"DIV",{class:!0}),g(P).forEach(v),s.forEach(v),R=L(i),C=m(i,"P",{class:!0});var l=g(C);O&&O.l(l),l.forEach(v),i.forEach(v),this.h()},h(){x(n,"class","font-semibold"),x(_,"class","separator svelte-8kqcdg"),x(E,"class","font-heading font-semibold text-h3"),x(P,"class","separator svelte-8kqcdg"),x(d,"class","relative flex flex-col w-full mt-4 space-y-4"),x(C,"class","max-w-4xl w-full mx-auto px-3 md:px-8 text-h6 mt-6 leading-normal"),x(t,"class","flex flex-col justify-center items-center my-9 text-center -mx-3 md:-mx-8")},m(e,r){b(e,t,r),w(t,n),w(n,c),w(n,h),w(t,u),w(t,d),w(d,_),w(d,S),w(d,E),N&&N.m(E,null),w(d,A),w(d,P),w(t,R),w(t,C),O&&O.m(C,null),I=!0},p(e,[t]){(!I||1&t)&&M(h,e[0]),N&&N.p&&(!I||2&t)&&i(N,D,e,e[1],I?s(D,e[1],t,Np):a(e[1]),$p),O&&O.p&&(!I||2&t)&&i(O,$,e,e[1],I?s($,e[1],t,Ip):a(e[1]),Dp)},i(e){I||(o(N,e),o(O,e),I=!0)},o(e){l(N,e),l(O,e),I=!1},d(e){e&&v(t),N&&N.d(e),O&&O.d(e)}}}function zp(e,t,n){let{$$slots:r={},$$scope:i}=t,{number:a=0}=t;return e.$$set=e=>{"number"in e&&n(0,a=e.number),"$$scope"in e&&n(1,i=e.$$scope)},[a,i,r]}class Bp extends e{constructor(e){super(),t(this,e,zp,Op,n,{number:0})}}function Hp(e,t,n){const r=e.slice();return r[13]=t[n],r[14]=t,r[15]=n,r}function Fp(e){let t,n,r=e[1].description.topic+"";return{c(){t=p("span"),n=f(r),this.h()},l(e){t=m(e,"SPAN",{slot:!0});var i=g(t);n=y(i,r),i.forEach(v),this.h()},h(){x(t,"slot","topic")},m(e,r){b(e,t,r),w(t,n)},p(e,t){2&t&&r!==(r=e[1].description.topic+"")&&M(n,r)},d(e){e&&v(t)}}}function Up(e){let t,n,r=e[1].description.description+"";return{c(){t=p("span"),n=f(r),this.h()},l(e){t=m(e,"SPAN",{slot:!0});var i=g(t);n=y(i,r),i.forEach(v),this.h()},h(){x(t,"slot","description")},m(e,r){b(e,t,r),w(t,n)},p(e,t){2&t&&r!==(r=e[1].description.description+"")&&M(n,r)},d(e){e&&v(t)}}}function kp(e){let t,n,r,i,a,s,c,h,u,d,_,S,E,A,P,R,C,I,D,N,$,O,z=Dc[e[15]]+"",U=e[15],G=Dc[e[15]]+"",V=e[1].description.highlights[e[15]]+"",W=e[1].description.texts[e[15]]+"";const j=()=>e[9](u,U),q=()=>e[9](null,U);let X={X:e[2],data:e[13],appearance:e[7]};return u=new Cp({props:X}),j(),{c(){t=p("div"),n=p("div"),r=p("h3"),i=f("พ.ศ. "),a=f(z),s=T(),c=p("div"),h=p("div"),B(u.$$.fragment),_=T(),S=p("div"),E=p("div"),A=p("span"),P=f("พ.ศ. "),R=f(G),C=T(),I=f(V),D=T(),N=f(W),$=T(),this.h()},l(e){t=m(e,"DIV",{class:!0});var o=g(t);n=m(o,"DIV",{class:!0});var l=g(n);r=m(l,"H3",{class:!0});var d=g(r);i=y(d,"พ.ศ. "),a=y(d,z),d.forEach(v),l.forEach(v),s=L(o),c=m(o,"DIV",{class:!0});var p=g(c);h=m(p,"DIV",{class:!0});var f=g(h);H(u.$$.fragment,f),f.forEach(v),_=L(p),S=m(p,"DIV",{});var x=g(S);E=m(x,"DIV",{class:!0});var b=g(E);A=m(b,"SPAN",{class:!0});var w=g(A);P=y(w,"พ.ศ. "),R=y(w,G),w.forEach(v),C=L(b),I=y(b,V),b.forEach(v),D=L(x),N=y(x,W),x.forEach(v),p.forEach(v),$=L(o),o.forEach(v),this.h()},h(){x(r,"class","font-semibold px-2 border border-black rounded"),x(n,"class","w-28 hidden md:flex"),x(h,"class","w-full h-20"),Y((()=>e[10].call(h))),x(A,"class","md:hidden text-white bg-black rounded px-1 mr-1"),x(E,"class","mr-auto font-bold md:inline mb-2"),x(c,"class","flex-1 flex flex-col"),x(t,"class","w-full flex flex-row items-center")},m(o,l){b(o,t,l),w(t,n),w(n,r),w(r,i),w(r,a),w(t,s),w(t,c),w(c,h),F(u,h,null),d=Q(h,e[10].bind(h)),w(c,_),w(c,S),w(S,E),w(E,A),w(A,P),w(A,R),w(E,C),w(E,I),w(S,D),w(S,N),w(t,$),O=!0},p(e,t){U!==e[15]&&(q(),U=e[15],j());const n={};4&t&&(n.X=e[2]),8&t&&(n.data=e[13]),u.$set(n),(!O||2&t)&&V!==(V=e[1].description.highlights[e[15]]+"")&&M(I,V),(!O||2&t)&&W!==(W=e[1].description.texts[e[15]]+"")&&M(N,W)},i(e){O||(o(u.$$.fragment,e),O=!0)},o(e){l(u.$$.fragment,e),O=!1},d(e){e&&v(t),q(),k(u),d()}}}function Gp(e){let t,n,r,i,a;n=new ah({}),n.$on("click",e[8]);let s=e[3],c=[];for(let t=0;t<s.length;t+=1)c[t]=kp(Hp(e,s,t));const h=e=>l(c[e],1,1,(()=>{c[e]=null}));return{c(){t=p("div"),B(n.$$.fragment),r=T(),i=p("div");for(let e=0;e<c.length;e+=1)c[e].c();this.h()},l(e){t=m(e,"DIV",{class:!0});var a=g(t);H(n.$$.fragment,a),a.forEach(v),r=L(e),i=m(e,"DIV",{class:!0});var s=g(i);for(let e=0;e<c.length;e+=1)c[e].l(s);s.forEach(v),this.h()},h(){x(t,"class","w-full flex flex-row justify-end"),x(i,"class","flex-1 w-full flex flex-col items-center space-y-8")},m(s,o){b(s,t,o),F(n,t,null),b(s,r,o),b(s,i,o);for(let e=0;e<c.length;e+=1)c[e].m(i,null);e[11](i),a=!0},p(e,t){if(175&t){let n;for(s=e[3],n=0;n<s.length;n+=1){const r=Hp(e,s,n);c[n]?(c[n].p(r,t),o(c[n],1)):(c[n]=kp(r),c[n].c(),o(c[n],1),c[n].m(i,null))}for(j(),n=s.length;n<c.length;n+=1)h(n);q()}},i(e){if(!a){o(n.$$.fragment,e);for(let e=0;e<s.length;e+=1)o(c[e]);a=!0}},o(e){l(n.$$.fragment,e),c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)l(c[e]);a=!1},d(a){a&&v(t),k(n),a&&v(r),a&&v(i),P(c,a),e[11](null)}}}function Vp(e){let t,n;return t=new lh({props:{$$slots:{default:[Gp]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};65647&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Wp(e){let t,n,r,i,a;function s(t){e[12](t)}t=new Bp({props:{number:e[1].description.topicNumber,$$slots:{description:[Up],topic:[Fp]},$$scope:{ctx:e}}});let c={element:e[6],threshold:.5,$$slots:{default:[Vp]},$$scope:{ctx:e}};return void 0!==e[4]&&(c.intersecting=e[4]),r=new Ll({props:c}),R.push((()=>z(r,"intersecting",s))),{c(){B(t.$$.fragment),n=T(),B(r.$$.fragment)},l(e){H(t.$$.fragment,e),n=L(e),H(r.$$.fragment,e)},m(e,i){F(t,e,i),b(e,n,i),F(r,e,i),a=!0},p(e,[n]){const a={};2&n&&(a.number=e[1].description.topicNumber),65538&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const s={};64&n&&(s.element=e[6]),65647&n&&(s.$$scope={dirty:n,ctx:e}),!i&&16&n&&(i=!0,s.intersecting=e[4],U((()=>i=!1))),r.$set(s)},i(e){a||(o(t.$$.fragment,e),o(r.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),l(r.$$.fragment,e),a=!1},d(e){k(t,e),e&&v(n),k(r,e)}}}function jp(e,t,n){let r,{props:i}=t,{appearance:a}=i,{X:s,dataList:o}=t,{barWidth:l=500}=t,c=o.map((()=>null));function h(){c.forEach((e=>e.replay()))}let u=!1;return e.$$set=e=>{"props"in e&&n(1,i=e.props),"X"in e&&n(2,s=e.X),"dataList"in e&&n(3,o=e.dataList),"barWidth"in e&&n(0,l=e.barWidth)},e.$$.update=()=>{16&e.$$.dirty&&u&&h()},[l,i,s,o,u,c,r,a,h,function(e,t){R[e?"unshift":"push"]((()=>{c[t]=e,n(5,c)}))},function(){l=this.clientWidth,n(0,l)},function(e){R[e?"unshift":"push"]((()=>{r=e,n(6,r)}))},function(e){u=e,n(4,u)}]}class qp extends e{constructor(e){super(),t(this,e,jp,Wp,n,{props:1,X:2,dataList:3,barWidth:0})}}function Xp(e,t,n){const r=e.slice();return r[8]=t[n][1],r}function Yp(e){let t,n,r,i,a;function s(t){e[4](t)}let c={props:e[8],X:e[1],dataList:e[2]};return void 0!==e[0]&&(c.barWidth=e[0]),n=new qp({props:c}),R.push((()=>z(n,"barWidth",s))),{c(){t=p("section"),B(n.$$.fragment),i=T()},l(e){t=m(e,"SECTION",{});var r=g(t);H(n.$$.fragment,r),i=L(r),r.forEach(v)},m(e,r){b(e,t,r),F(n,t,null),w(t,i),a=!0},p(e,t){const i={};2&t&&(i.X=e[1]),!r&&1&t&&(r=!0,i.barWidth=e[0],U((()=>r=!1))),n.$set(i)},i(e){a||(o(n.$$.fragment,e),a=!0)},o(e){l(n.$$.fragment,e),a=!1},d(e){e&&v(t),k(n)}}}function Zp(e){let t,n,r=Object.entries(e[3]),i=[];for(let t=0;t<r.length;t+=1)i[t]=Yp(Xp(e,r,t));const a=e=>l(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=G()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);t=G()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);b(e,t,r),n=!0},p(e,[n]){if(15&n){let s;for(r=Object.entries(e[3]),s=0;s<r.length;s+=1){const a=Xp(e,r,s);i[s]?(i[s].p(a,n),o(i[s],1)):(i[s]=Yp(a),i[s].c(),o(i[s],1),i[s].m(t.parentNode,t))}for(j(),s=r.length;s<i.length;s+=1)a(s);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)o(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)l(i[e]);n=!1},d(e){P(i,e),e&&v(t)}}}function Jp(e){return e.reduce(((e,t)=>e+t.x),0)}function Qp(e,t,n){let r;const i=20,a=20,s={start:"black",drafted:`#${zc[0].getHexString()}`,done:`#${zc[1].getHexString()}`},o=[[{x:0,event:"start",fill:s.start},{x:167,event:"drafted",fill:s.drafted},{x:982,event:"done",fill:s.done}],[{x:0,event:"start",fill:s.start},{x:2507,event:"drafted",fill:s.drafted},{x:1247,event:"done",fill:s.done}],[{x:0,event:"start",fill:s.start},{x:222,event:"drafted",fill:s.drafted},{x:3266,event:"done",fill:s.done}],[{x:0,event:"start",fill:s.start},{x:180,event:"drafted",fill:s.drafted},{x:2464,event:"done",fill:s.done}]],l=Math.max(...o.map(Jp));let c=300;const h={[dp.pre_start]:{appearance:{from:fp[dp.pre_start],to:fp[dp.start]},description:{topicNumber:8,topic:"รัฐธรรมนูญที่ให้กำเนิด สสร.",description:"สภาร่างรัฐธรรมนูญแต่ละชุด มีต้นกำเนิดมาจากรัฐธรรมนูญต่างฉบับกัน",highlights:["เกิดขึ้นตามรัฐธรรมนูญชั่วคราว","เกิดขึ้นตามรัฐธรรมนูญชั่วคราว","เกิดขึ้นตามรัฐธรรมนูญถาวร","เกิดขึ้นตามรัฐธรรมนูญชั่วคราว"],texts:["คือรัฐธรรมนูญแห่งราชอาณาจักรไทย (ฉบับชั่วคราว) พ.ศ. 2490 (แก้ไขเพิ่มเติมครั้งที่ 2) ที่ประกาศใช้หลังการทำรัฐประหาร เมื่อวันที่ 8 พฤศจิกายน พ.ศ. 2490","คือธรรมนูญการปกครองราชอาณาจักร พ.ศ. 2502 ที่ประกาศใช้หลังการทำรัฐประหาร เมื่อวันที่ 20 ตุลาคม พ.ศ. 2501","คือรัฐธรรมนูญแห่งราชอาณาจักรไทย พ.ศ. 2534 แก้ไขเพิ่มเติมโดยรัฐธรรมนูญแห่งราชอาณาจักรไทยแก้ไขเพิ่มเติม (ฉบับที่ 6) พ.ศ. 2539 ซึ่งประกาศใช้แทนรัฐธรรมนูญชั่วคราว คือธรรมนูญแห่งราชอาณาจักรไทย พ.ศ. 2534 ที่ประกาศใช้หลังการทำรัฐประหาร เมื่อวันที่ 23 กุมภาพันธ์ พ.ศ. 2534","คือรัฐธรรมนูญแห่งราชอาณาจักรไทย (ฉบับชั่วคราว) พ.ศ. 2549 ที่ประกาศใช้หลังการทำรัฐประหาร เมื่อวันที่ 19 กันยายน พ.ศ. 2549"]}},[dp.start]:{appearance:{from:fp[dp.start],to:fp[dp.drafted]},description:{topicNumber:9,topic:"ระยะเวลาร่างรัฐธรรมนูญของ สสร.",description:"สภาร่างรัฐธรรมนูญแต่ละชุดใช้ระยะเวลาไม่เท่ากันในการทำงานเพื่อร่างรัฐธรรมนูญ",highlights:["167 วัน","2,507 วัน (ประมาณ 6 ปี 10 เดือน 10 วัน)","222 วัน","180 วัน"],texts:["นับตั้งแต่การประชุมครั้งแรก (12 กรกฎาคม พ.ศ. 2491) จนถึงการประชุมเพื่อพิจารณาร่างรัฐธรรมนูญ (25 ธันวาคม พ.ศ. 2491) โดยประชุมไปทั้งสิ้น 81 ครั้ง","นับตั้งแต่การประชุมในฐานะสภาร่างรัฐธรรมนูญครั้งแรก (30 มีนาคม พ.ศ. 2504) จนถึงการประชุมในฐานะสภาร่างรัฐธรรมนูญเพื่อพิจารณาร่างรัฐธรรมนูญ (8 กุมภาพันธ์ พ.ศ. 2511) โดยประชุมไปทั้งสิ้น 66 ครั้ง","นับตั้งแต่การประชุมครั้งแรก (7 มกราคม พ.ศ. 2540) จนถึงการประชุมเพื่อพิจารณาร่างรัฐธรรมนูญ (15 สิงหาคม พ.ศ. 2540) โดยประชุมไปทั้งสิ้น 30 ครั้ง","นับตั้งแต่การประชุมครั้งแรก (8 มกราคม พ.ศ 2550) จนถึงการประชุมเพื่อพิจารณาร่างรัฐธรรมนูญ (6 กรกฎาคม พ.ศ 2550) โดยประชุมไปทั้งสิ้น 40 ครั้ง"]}},[dp.drafted]:{appearance:{from:fp[dp.drafted],to:fp[dp.done]},description:{topicNumber:10,topic:"ชะตากรรมของรัฐธรรมนูญจาก สสร.",description:"รัฐธรรมนูญที่เกิดขึ้นจากสภาร่างรัฐธรรมนูญทั้ง 4 ชุด ล้วนไม่อยู่คงทนถาวร และถูกยกเลิกโดยการทำรัฐประหารทั้งสิ้น",highlights:["สร้างรัฐธรรมนูญอายุ 982 วัน (ประมาณ 2 ปี 8 เดือน 6 วัน)","สร้างรัฐธรรมนูญอายุ 1,247 วัน (ประมาณ 3 ปี 4 เดือน 28 วัน)","สร้างรัฐธรรมนูญอายุ 3,266 วัน (ประมาณ 8 ปี 11 เดือน 9 วัน)","สร้างรัฐธรรมนูญอายุ 2,464 วัน (ประมาณ 6 ปี 9 เดือน)"],texts:["คือรัฐธรรมนูญแห่งราชอาณาจักรไทย พุทธศักราช 2492 ที่ประกาศใช้เมื่อวันที่ 23 มีนาคม พ.ศ. 2492 และถูกยกเลิกโดยการทำรัฐประหารเมื่อวันที่ 29 พฤศจิกายน พ.ศ. 2494","คือรัฐธรรมนูญแห่งราชอาณาจักรไทย พุทธศักราช 2511 ที่ประกาศใช้เมื่อวันที่ 20 มิถุนายน พ.ศ. 2511 และถูกยกเลิกโดยการทำรัฐประหารเมื่อวันที่ 17 พฤศจิกายน พ.ศ. 2514","คือรัฐธรรมนูญแห่งราชอาณาจักรไทย พุทธศักราช 2540 ที่ประกาศใช้เมื่อวันที่ 11 ตุลาคม พ.ศ. 2540 และถูกยกเลิกโดยการทำรัฐประหารเมื่อวันที่ 19 กันยายน พ.ศ. 2549","คือรัฐธรรมนูญแห่งราชอาณาจักรไทย พุทธศักราช 2550 ที่ประกาศใช้เมื่อวันที่ 24 สิงหาคม พ.ศ. 2550 และถูกยกเลิกโดยการทำรัฐประหารเมื่อวันที่ 22 พฤษภาคม พ.ศ. 2557"]}}};return e.$$.update=()=>{1&e.$$.dirty&&n(1,r=up().domain([0,l]).range([a,c-i]))},[c,r,o,h,function(e){c=e,n(0,c)}]}class Kp extends e{constructor(e){super(),t(this,e,Qp,Zp,n,{})}}function ef(e,t,n){const r=e.slice();return r[13]=t[n].description,r[14]=t[n].subsets,r[15]=K(t[n],["description","subsets"]),r}function tf(e,t,n){const r=e.slice();return r[14]=t[n].subsets,r[18]=K(t[n],["subsets"]),r}function nf(e,t,n){const r=e.slice();return r[14]=t[n].subsets,r[18]=K(t[n],["subsets"]),r}function rf(e,t,n){const r=e.slice();return r[23]=t[n].primaryColor,r[13]=t[n].description,r[24]=t[n].years,r}function af(e){let t,n,r;return n=new ru({props:{state:"selected"}}),n.$on("click",e[7]),{c(){t=p("div"),B(n.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var r=g(t);H(n.$$.fragment,r),r.forEach(v),this.h()},h(){x(t,"class","flex justify-end")},m(e,i){b(e,t,i),F(n,t,null),r=!0},p:S,i(e){r||(o(n.$$.fragment,e),r=!0)},o(e){l(n.$$.fragment,e),r=!1},d(e){e&&v(t),k(n)}}}function sf(e){let t;return{c(){t=f("ความหลากหลายของ สสร.")},l(e){t=y(e,"ความหลากหลายของ สสร.")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function of(e){let t,n;return t=new Hh({props:{description:e[13],years:e[24],selectedYears:e[1],color:e[3]?null:e[23]}}),t.$on("select",e[6]),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};16&n&&(r.description=e[13]),16&n&&(r.years=e[24]),2&n&&(r.selectedYears=e[1]),24&n&&(r.color=e[3]?null:e[23]),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function lf(e){let t,r,i=e[1][0],a=yf(e);return{c(){a.c(),t=G()},l(e){a.l(e),t=G()},m(e,n){a.m(e,n),b(e,t,n),r=!0},p(e,r){2&r&&n(i,i=e[1][0])?(j(),l(a,1,1,S),q(),a=yf(e),a.c(),o(a),a.m(t.parentNode,t)):a.p(e,r)},i(e){r||(o(a),r=!0)},o(e){l(a),r=!1},d(e){e&&v(t),a.d(e)}}}function cf(e){let t,n,r=e[13]+"";return{c(){t=p("p"),n=f(r)},l(e){t=m(e,"P",{});var i=g(t);n=y(i,r),i.forEach(v)},m(e,r){b(e,t,r),w(t,n)},p(e,t){8&t&&r!==(r=e[13]+"")&&M(n,r)},d(e){e&&v(t)}}}function hf(e){let t,n,r=e[14],i=[];for(let t=0;t<r.length;t+=1)i[t]=pf(tf(e,r,t));const a=e=>l(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=G()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);t=G()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);b(e,t,r),n=!0},p(e,n){if(8&n){let s;for(r=e[14],s=0;s<r.length;s+=1){const a=tf(e,r,s);i[s]?(i[s].p(a,n),o(i[s],1)):(i[s]=pf(a),i[s].c(),o(i[s],1),i[s].m(t.parentNode,t))}for(j(),s=r.length;s<i.length;s+=1)a(s);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)o(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)l(i[e]);n=!1},d(e){P(i,e),e&&v(t)}}}function uf(e){let t,n,r=e[14],i=[];for(let t=0;t<r.length;t+=1)i[t]=df(nf(e,r,t));const a=e=>l(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=G()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);t=G()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);b(e,t,r),n=!0},p(e,n){if(8&n){let s;for(r=e[14],s=0;s<r.length;s+=1){const a=nf(e,r,s);i[s]?(i[s].p(a,n),o(i[s],1)):(i[s]=df(a),i[s].c(),o(i[s],1),i[s].m(t.parentNode,t))}for(j(),s=r.length;s<i.length;s+=1)a(s);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)o(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)l(i[e]);n=!1},d(e){P(i,e),e&&v(t)}}}function df(e){let t,n;const r=[e[18],{class:"ml-6 py-2"}];let i={};for(let e=0;e<r.length;e+=1)i=N(i,r[e]);return t=new jh({props:i}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const i=8&n?V(r,[W(e[18]),r[1]]):{};t.$set(i)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function pf(e){let t,n,r,i;const a=[e[18],{class:"py-2"}];let s={};for(let e=0;e<a.length;e+=1)s=N(s,a[e]);t=new jh({props:s});let c=e[14]&&uf(e);return{c(){B(t.$$.fragment),n=T(),c&&c.c(),r=G()},l(e){H(t.$$.fragment,e),n=L(e),c&&c.l(e),r=G()},m(e,a){F(t,e,a),b(e,n,a),c&&c.m(e,a),b(e,r,a),i=!0},p(e,n){const i=8&n?V(a,[W(e[18]),a[1]]):{};t.$set(i),e[14]?c?(c.p(e,n),8&n&&o(c,1)):(c=uf(e),c.c(),o(c,1),c.m(r.parentNode,r)):c&&(j(),l(c,1,1,(()=>{c=null})),q())},i(e){i||(o(t.$$.fragment,e),o(c),i=!0)},o(e){l(t.$$.fragment,e),l(c),i=!1},d(e){k(t,e),e&&v(n),c&&c.d(e),e&&v(r)}}}function ff(e){let t,n,r,i,a,s;const c=[e[15],{isLarge:!0}];let h={};for(let e=0;e<c.length;e+=1)h=N(h,c[e]);t=new jh({props:h});let u=e[13]&&cf(e),d=e[14]&&hf(e);return{c(){B(t.$$.fragment),n=T(),r=p("div"),u&&u.c(),i=T(),d&&d.c(),a=T(),this.h()},l(e){H(t.$$.fragment,e),n=L(e),r=m(e,"DIV",{class:!0});var s=g(r);u&&u.l(s),i=L(s),d&&d.l(s),s.forEach(v),a=L(e),this.h()},h(){x(r,"class","flex flex-col ml-8 divide-y divide-black divide-opacity-20")},m(e,o){F(t,e,o),b(e,n,o),b(e,r,o),u&&u.m(r,null),w(r,i),d&&d.m(r,null),b(e,a,o),s=!0},p(e,n){const a=8&n?V(c,[W(e[15]),c[1]]):{};t.$set(a),e[13]?u?u.p(e,n):(u=cf(e),u.c(),u.m(r,i)):u&&(u.d(1),u=null),e[14]?d?(d.p(e,n),8&n&&o(d,1)):(d=hf(e),d.c(),o(d,1),d.m(r,null)):d&&(j(),l(d,1,1,(()=>{d=null})),q())},i(e){s||(o(t.$$.fragment,e),o(d),s=!0)},o(e){l(t.$$.fragment,e),l(d),s=!1},d(e){k(t,e),e&&v(n),e&&v(r),u&&u.d(),d&&d.d(),e&&v(a)}}}function mf(e){let t,n;return t=new kh({props:{class:"flex flex-col",$$slots:{default:[ff]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};134217736&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function gf(e){let t,n,r=e[3],i=[];for(let t=0;t<r.length;t+=1)i[t]=mf(ef(e,r,t));const a=e=>l(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=G()},l(e){for(let t=0;t<i.length;t+=1)i[t].l(e);t=G()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);b(e,t,r),n=!0},p(e,n){if(8&n){let s;for(r=e[3],s=0;s<r.length;s+=1){const a=ef(e,r,s);i[s]?(i[s].p(a,n),o(i[s],1)):(i[s]=mf(a),i[s].c(),o(i[s],1),i[s].m(t.parentNode,t))}for(j(),s=r.length;s<i.length;s+=1)a(s);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)o(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)l(i[e]);n=!1},d(e){P(i,e),e&&v(t)}}}function yf(e){let t,n;return t=new Ph({props:{class:"space-y-2",$$slots:{default:[gf]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};134217736&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function vf(e){let t,n,r,i,a,s,c=e[0].length>0&&af(e);n=new bh({props:{dark:!0,$$slots:{default:[sf]},$$scope:{ctx:e}}});let h=e[4],u=[];for(let t=0;t<h.length;t+=1)u[t]=of(rf(e,h,t));const d=e=>l(u[e],1,1,(()=>{u[e]=null}));let p=e[3]&&lf(e);return{c(){c&&c.c(),t=T(),B(n.$$.fragment),r=T();for(let e=0;e<u.length;e+=1)u[e].c();i=T(),p&&p.c(),a=G()},l(e){c&&c.l(e),t=L(e),H(n.$$.fragment,e),r=L(e);for(let t=0;t<u.length;t+=1)u[t].l(e);i=L(e),p&&p.l(e),a=G()},m(e,o){c&&c.m(e,o),b(e,t,o),F(n,e,o),b(e,r,o);for(let t=0;t<u.length;t+=1)u[t].m(e,o);b(e,i,o),p&&p.m(e,o),b(e,a,o),s=!0},p(e,r){e[0].length>0?c?(c.p(e,r),1&r&&o(c,1)):(c=af(e),c.c(),o(c,1),c.m(t.parentNode,t)):c&&(j(),l(c,1,1,(()=>{c=null})),q());const s={};if(134217728&r&&(s.$$scope={dirty:r,ctx:e}),n.$set(s),90&r){let t;for(h=e[4],t=0;t<h.length;t+=1){const n=rf(e,h,t);u[t]?(u[t].p(n,r),o(u[t],1)):(u[t]=of(n),u[t].c(),o(u[t],1),u[t].m(i.parentNode,i))}for(j(),t=h.length;t<u.length;t+=1)d(t);q()}e[3]?p?(p.p(e,r),8&r&&o(p,1)):(p=lf(e),p.c(),o(p,1),p.m(a.parentNode,a)):p&&(j(),l(p,1,1,(()=>{p=null})),q())},i(e){if(!s){o(c),o(n.$$.fragment,e);for(let e=0;e<h.length;e+=1)o(u[e]);o(p),s=!0}},o(e){l(c),l(n.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)l(u[e]);l(p),s=!1},d(e){c&&c.d(e),e&&v(t),k(n,e),e&&v(r),P(u,e),e&&v(i),p&&p.d(e),e&&v(a)}}}function xf(e){let t,n,r,i,a;function s(t){e[8](t)}function c(t){e[9](t)}function h(t){e[10](t)}let u={data:e[5],$$slots:{default:[vf]},$$scope:{ctx:e}};return void 0!==e[2]&&(u.nodes=e[2]),void 0!==e[0]&&(u.selectedNodes=e[0]),void 0!==e[1]&&(u.selectedYears=e[1]),t=new vh({props:u}),R.push((()=>z(t,"nodes",s))),R.push((()=>z(t,"selectedNodes",c))),R.push((()=>z(t,"selectedYears",h))),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,n){F(t,e,n),a=!0},p(e,[a]){const s={};134217755&a&&(s.$$scope={dirty:a,ctx:e}),!n&&4&a&&(n=!0,s.nodes=e[2],U((()=>n=!1))),!r&&1&a&&(r=!0,s.selectedNodes=e[0],U((()=>r=!1))),!i&&2&a&&(i=!0,s.selectedYears=e[1],U((()=>i=!1))),t.$set(s)},i(e){a||(o(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){k(t,e)}}}function _f(e,t,n){let r,i;const a=[{name:"categorial",description:"สสร.ชุดที่มีการแบ่งประเภทด้วยกฎหมาย",primaryColor:zc[0],hoveredColor:Bc[0],years:["2491","2539"]},{name:"non-categorial",description:"สสร.ชุดที่ไม่มีการแบ่งประเภทด้วยกฎหมาย",primaryColor:zc[1],hoveredColor:Bc[1],years:["2502","2550"]}],s=new Map([["2491",[{color:zc[2],amount:20,label:"ผู้เป็นสมาชิกรัฐสภา",description:"ประกอบด้วยสมาชิกสภาผู้แทนราษฎรและสมาชิกวุฒิสภาอย่างละ 10 คน"},{color:zc[3],amount:20,label:"ผู้ไม่เป็นสมาชิกรัฐสภา",subsets:[{label:"กลุ่มผู้มีคุณสมบัติของผู้สมัครรับเลือกตั้งเป็นสมาชิกสภาผู้แทน (ประเภททั่วไป)",amount:5},{label:"กลุ่มผู้ที่ดำรง หรือเคยดำรงตำแหน่งปลัดกระทรวง หรืออธิบดี หรือเทียบเท่า",amount:5},{label:"กลุ่มผู้เคยเป็นสมาชิกสภาผู้แทนราษฎร หรือสมาชิกสภาผู้แทน หรือสมาชิกพฤฒสภา หรือดำรงตำแหน่งเป็นรัฐมนตรี ",amount:5},{label:"กลุ่มผู้สำเร็จการศึกษาได้รับปริญญาตรีหรือเทียบเท่า",amount:5}]}]],["2539",[{color:zc[4],amount:76,label:"ประชาชนผู้เป็นตัวแทนจังหวัด",description:"จังหวัดละ 1 คน"},{color:zc[5],amount:23,label:"ผู้เชี่ยวชาญจาก 3 สาขา",subsets:[{label:"สาขากฎหมายมหาชน",amount:8},{label:"สาขารัฐศาสตร์ หรือรัฐประศาสนศาสตร์",amount:8},{label:"สาขาประสบการณ์ด้านการเมือง การบริหารราชการแผ่นดิน หรือการร่างรัฐธรรมนูญ",amount:7}]}]],["2502",[{color:zc[6],amount:Nc[2502],label:"ไม่มีการแบ่งประเภท (ด้วยกฎหมาย)",subsets:[{label:"เป็นทหาร",amount:162,subsets:[{label:"ทหารบก",amount:110},{label:"ทหารเรือ",amount:27},{label:"ทหารอากาศ",amount:25}]},{label:"ไม่เป็นทหาร",amount:78}]}]],["2550",[{color:zc[7],amount:Nc[2550],label:"ไม่มีการแบ่งประเภท (ด้วยกฎหมาย)",subsets:[{label:"ภาครัฐ",amount:30},{label:"ภาควิชาการ",amount:27},{label:"ภาคเอกชน",amount:25},{label:"ภาคสังคม",amount:18}]}]]]),o=Dc.map((e=>{const t=a.findIndex((({years:t})=>t.includes(e))),{primaryColor:n,hoveredColor:r}=a[t],i=s.get(e),o=new Array(Nc[e]).fill({primaryColor:n,hoveredColor:r,group:e,data:{groupIndex:t}});return i?o.map(((e,t)=>Object.assign(Object.assign({},e),{selectedColor:i[t<=i[0].amount?0:1].color}))):o}));let l=[],c=[],h=[];return e.$$.update=()=>{3&e.$$.dirty&&n(4,r=h.length>0&&c.length>0?[a[c[0].data.groupIndex]]:a),2&e.$$.dirty&&n(3,i=h&&s.get(h[0]))},[c,h,l,i,r,o,({detail:e})=>{n(0,c=l.filter((({group:t})=>t===e)))},()=>{n(0,c=[])},function(e){l=e,n(2,l)},function(e){c=e,n(0,c)},function(e){h=e,n(1,h)}]}class bf extends e{constructor(e){super(),t(this,e,_f,xf,n,{})}}var wf=[{year:"2539",name:"นางปราณี วชิราศรีศิริกุล"},{year:"2539",name:"นางพวงเล็ก บุญเชียง"},{year:"2539",name:"นางพินทิพย์ ลีลาภรณ์"},{year:"2539",name:"นางยุพา อุดมศักดิ์"},{year:"2539",name:"นางสุนี ไชยรส"},{year:"2539",name:"นางสาวอุทัยวรรณ ดำรงกิจการวงศ์"},{year:"2550",name:"นางกรรณิการ์ บันเทิงจิตร"},{year:"2550",name:"นางดวงสุดา เตโชติรส"},{year:"2550",name:"นางพรรณราย แสงวิเชียร"},{year:"2550",name:"นางสาวพวงเพชร สารคุณ"},{year:"2550",name:"นางมนูญศรี โชติเทวัญ"},{year:"2550",name:"นางรุจิรา เตชางกูร"},{year:"2550",name:"นางสดศรี สัตยธรรม"},{year:"2550",name:"นางสาวอลิสา พันธุศักดิ์"},{year:"2550",name:"นางอังคณา นีละไพจิตร"},{year:"2550",name:"นางสาวอาภา อรรถบูรณวงศ์"}];function Mf(e,t,n){const r=e.slice();return r[14]=t[n].name,r[15]=t[n].image,r[17]=n,r}function Sf(e,t,n){const r=e.slice();return r[18]=t[n].primaryColor,r[19]=t[n].description,r[20]=t[n].years,r}function Ef(e){let t,n,r;return n=new ru({props:{state:"selected"}}),n.$on("click",e[8]),{c(){t=p("div"),B(n.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var r=g(t);H(n.$$.fragment,r),r.forEach(v),this.h()},h(){x(t,"class","flex justify-end")},m(e,i){b(e,t,i),F(n,t,null),r=!0},p:S,i(e){r||(o(n.$$.fragment,e),r=!0)},o(e){l(n.$$.fragment,e),r=!1},d(e){e&&v(t),k(n)}}}function Tf(e){let t;return{c(){t=f("เพศสภาพกับ สสร.")},l(e){t=y(e,"เพศสภาพกับ สสร.")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Lf(e){let t,n;return t=new Hh({props:{description:e[19],years:e[20],selectedYears:e[1],color:e[1]&&e[1].length>0?null:e[18]}}),t.$on("select",e[7]),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.description=e[19]),32&n&&(r.years=e[20]),2&n&&(r.selectedYears=e[1]),34&n&&(r.color=e[1]&&e[1].length>0?null:e[18]),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Af(e){let t,r,i=e[1][0],a=Of(e);return{c(){a.c(),t=G()},l(e){a.l(e),t=G()},m(e,n){a.m(e,n),b(e,t,n),r=!0},p(e,r){2&r&&n(i,i=e[1][0])?(j(),l(a,1,1,S),q(),a=Of(e),a.c(),o(a),a.m(t.parentNode,t)):a.p(e,r)},i(e){r||(o(a),r=!0)},o(e){l(a),r=!1},d(e){e&&v(t),a.d(e)}}}function Pf(e){let t,n;return t=new kh({props:{$$slots:{default:[Cf]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};8388616&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Rf(e){let t,n,r,i;t=new kh({props:{$$slots:{default:[If]},$$scope:{ctx:e}}});let a=e[4],s=[];for(let t=0;t<a.length;t+=1)s[t]=Nf(Mf(e,a,t));const c=e=>l(s[e],1,1,(()=>{s[e]=null}));return{c(){B(t.$$.fragment),n=T();for(let e=0;e<s.length;e+=1)s[e].c();r=G()},l(e){H(t.$$.fragment,e),n=L(e);for(let t=0;t<s.length;t+=1)s[t].l(e);r=G()},m(e,a){F(t,e,a),b(e,n,a);for(let t=0;t<s.length;t+=1)s[t].m(e,a);b(e,r,a),i=!0},p(e,n){const i={};if(8388632&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i),16&n){let t;for(a=e[4],t=0;t<a.length;t+=1){const i=Mf(e,a,t);s[t]?(s[t].p(i,n),o(s[t],1)):(s[t]=Nf(i),s[t].c(),o(s[t],1),s[t].m(r.parentNode,r))}for(j(),t=a.length;t<s.length;t+=1)c(t);q()}},i(e){if(!i){o(t.$$.fragment,e);for(let e=0;e<a.length;e+=1)o(s[e]);i=!0}},o(e){l(t.$$.fragment,e),s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)l(s[e]);i=!1},d(e){k(t,e),e&&v(n),P(s,e),e&&v(r)}}}function Cf(e){let t,n,r,i,a,s,c;return t=new jh({props:{isLarge:!0,label:"สมาชิกที่เป็นเพศชาย",amount:e[3],color:zc[0]}}),{c(){B(t.$$.fragment),n=T(),r=p("p"),i=f("จากจำนวนสมาชิกทั้งหมด "),a=f(e[3]),s=f(" คน")},l(o){H(t.$$.fragment,o),n=L(o),r=m(o,"P",{});var l=g(r);i=y(l,"จากจำนวนสมาชิกทั้งหมด "),a=y(l,e[3]),s=y(l," คน"),l.forEach(v)},m(e,o){F(t,e,o),b(e,n,o),b(e,r,o),w(r,i),w(r,a),w(r,s),c=!0},p(e,n){const r={};8&n&&(r.amount=e[3]),t.$set(r),(!c||8&n)&&M(a,e[3])},i(e){c||(o(t.$$.fragment,e),c=!0)},o(e){l(t.$$.fragment,e),c=!1},d(e){k(t,e),e&&v(n),e&&v(r)}}}function If(e){let t,n,r,i,a,s,c;return t=new jh({props:{isLarge:!0,label:"สมาชิกที่เป็นเพศหญิง",amount:e[4].length,color:zc[2]}}),{c(){B(t.$$.fragment),n=T(),r=p("p"),i=f("จากจำนวนสมาชิกทั้งหมด "),a=f(e[3]),s=f(" คน")},l(o){H(t.$$.fragment,o),n=L(o),r=m(o,"P",{});var l=g(r);i=y(l,"จากจำนวนสมาชิกทั้งหมด "),a=y(l,e[3]),s=y(l," คน"),l.forEach(v)},m(e,o){F(t,e,o),b(e,n,o),b(e,r,o),w(r,i),w(r,a),w(r,s),c=!0},p(e,n){const r={};16&n&&(r.amount=e[4].length),t.$set(r),(!c||8&n)&&M(a,e[3])},i(e){c||(o(t.$$.fragment,e),c=!0)},o(e){l(t.$$.fragment,e),c=!1},d(e){k(t,e),e&&v(n),e&&v(r)}}}function Df(e){let t,n,r;return t=new Jh({props:{name:e[14],number:e[17]+1,color:zc[2],image:e[15]}}),{c(){B(t.$$.fragment),n=T()},l(e){H(t.$$.fragment,e),n=L(e)},m(e,i){F(t,e,i),b(e,n,i),r=!0},p(e,n){const r={};16&n&&(r.name=e[14]),16&n&&(r.image=e[15]),t.$set(r)},i(e){r||(o(t.$$.fragment,e),r=!0)},o(e){l(t.$$.fragment,e),r=!1},d(e){k(t,e),e&&v(n)}}}function Nf(e){let t,n;return t=new kh({props:{$$slots:{default:[Df]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};8388624&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function $f(e){let t,n,r,i;const a=[Rf,Pf],s=[];function c(e,t){return e[4].length>0?0:1}return t=c(e),n=s[t]=a[t](e),{c(){n.c(),r=G()},l(e){n.l(e),r=G()},m(e,n){s[t].m(e,n),b(e,r,n),i=!0},p(e,i){let h=t;t=c(e),t===h?s[t].p(e,i):(j(),l(s[h],1,1,(()=>{s[h]=null})),q(),n=s[t],n?n.p(e,i):(n=s[t]=a[t](e),n.c()),o(n,1),n.m(r.parentNode,r))},i(e){i||(o(n),i=!0)},o(e){l(n),i=!1},d(e){s[t].d(e),e&&v(r)}}}function Of(e){let t,n;return t=new Ph({props:{class:"flex flex-col space-y-2 max-h-64 md:max-h-96 overflow-y-auto",$$slots:{default:[$f]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p(e,n){const r={};8388632&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function zf(e){let t,n,r,i,a,s,c=e[0].length>0&&Ef(e);n=new bh({props:{dark:!0,$$slots:{default:[Tf]},$$scope:{ctx:e}}});let h=e[5],u=[];for(let t=0;t<h.length;t+=1)u[t]=Lf(Sf(e,h,t));const d=e=>l(u[e],1,1,(()=>{u[e]=null}));let p=e[1].length>0&&Af(e);return{c(){c&&c.c(),t=T(),B(n.$$.fragment),r=T();for(let e=0;e<u.length;e+=1)u[e].c();i=T(),p&&p.c(),a=G()},l(e){c&&c.l(e),t=L(e),H(n.$$.fragment,e),r=L(e);for(let t=0;t<u.length;t+=1)u[t].l(e);i=L(e),p&&p.l(e),a=G()},m(e,o){c&&c.m(e,o),b(e,t,o),F(n,e,o),b(e,r,o);for(let t=0;t<u.length;t+=1)u[t].m(e,o);b(e,i,o),p&&p.m(e,o),b(e,a,o),s=!0},p(e,r){e[0].length>0?c?(c.p(e,r),1&r&&o(c,1)):(c=Ef(e),c.c(),o(c,1),c.m(t.parentNode,t)):c&&(j(),l(c,1,1,(()=>{c=null})),q());const s={};if(8388608&r&&(s.$$scope={dirty:r,ctx:e}),n.$set(s),162&r){let t;for(h=e[5],t=0;t<h.length;t+=1){const n=Sf(e,h,t);u[t]?(u[t].p(n,r),o(u[t],1)):(u[t]=Lf(n),u[t].c(),o(u[t],1),u[t].m(i.parentNode,i))}for(j(),t=h.length;t<u.length;t+=1)d(t);q()}e[1].length>0?p?(p.p(e,r),2&r&&o(p,1)):(p=Af(e),p.c(),o(p,1),p.m(a.parentNode,a)):p&&(j(),l(p,1,1,(()=>{p=null})),q())},i(e){if(!s){o(c),o(n.$$.fragment,e);for(let e=0;e<h.length;e+=1)o(u[e]);o(p),s=!0}},o(e){l(c),l(n.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)l(u[e]);l(p),s=!1},d(e){c&&c.d(e),e&&v(t),k(n,e),e&&v(r),P(u,e),e&&v(i),p&&p.d(e),e&&v(a)}}}function Bf(e){let t,n,r,i,a;function s(t){e[9](t)}function c(t){e[10](t)}function h(t){e[11](t)}let u={data:e[6],$$slots:{default:[zf]},$$scope:{ctx:e}};return void 0!==e[2]&&(u.nodes=e[2]),void 0!==e[0]&&(u.selectedNodes=e[0]),void 0!==e[1]&&(u.selectedYears=e[1]),t=new vh({props:u}),R.push((()=>z(t,"nodes",s))),R.push((()=>z(t,"selectedNodes",c))),R.push((()=>z(t,"selectedYears",h))),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,n){F(t,e,n),a=!0},p(e,[a]){const s={};8388667&a&&(s.$$scope={dirty:a,ctx:e}),!n&&4&a&&(n=!0,s.nodes=e[2],U((()=>n=!1))),!r&&1&a&&(r=!0,s.selectedNodes=e[0],U((()=>r=!1))),!i&&2&a&&(i=!0,s.selectedYears=e[1],U((()=>i=!1))),t.$set(s)},i(e){a||(o(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){k(t,e)}}}function Hf(e,t,n){let r,i,a;const s=[{name:"allmale",description:"สสร.ชุดที่มีสมาชิกเป็นเพศชายทั้งหมด",primaryColor:zc[0],hoveredColor:Bc[0],years:["2491","2502"]},{name:"mix",description:"สสร.ชุดที่มีสมาชิกทั้งเพศชายและหญิง ",primaryColor:zc[1],hoveredColor:Bc[1],years:["2539","2550"]}],o=wf.map(((e,t)=>Object.assign(Object.assign({},e),{image:`images/people/03_no${t+1}_${e.year}.png`}))),l=Dc.map((e=>{const t=s.findIndex((({years:t})=>t.includes(e))),{primaryColor:n,hoveredColor:r}=s[t],i=wf.filter((t=>t.year===e)).length,a=new Array(Nc[e]).fill({primaryColor:n,hoveredColor:r,group:e,data:{groupIndex:t}});return 0===i?a:a.map(((e,t)=>Object.assign(Object.assign({},e),{selectedColor:t<i?zc[2]:Oc})))}));let c=[],h=[],u=[];return e.$$.update=()=>{3&e.$$.dirty&&n(5,r=u.length>0&&h.length>0?[s[h[0].data.groupIndex]]:s),2&e.$$.dirty&&n(4,i=u?o.filter((({year:e})=>u.includes(e))):[]),2&e.$$.dirty&&n(3,a=u&&Nc[u[0]])},[h,u,c,a,i,r,l,({detail:e})=>{n(0,h=c.filter((({group:t})=>t===e)))},()=>{n(0,h=[])},function(e){c=e,n(2,c)},function(e){h=e,n(0,h)},function(e){u=e,n(1,u)}]}class Ff extends e{constructor(e){super(),t(this,e,Hf,Bf,n,{})}}var Uf=[{category:"death",year:"2502",name:"นายมาลัย ชูพินิจ"},{category:"death",year:"2502",name:"พันเอก หลวงวิจิตรวาทการ"},{category:"death",year:"2502",name:"นายวิบูลย์ ธรรมบุตร"},{category:"death",year:"2502",name:"พลเอก สุทธิ์ สุทธิสารรณกร"},{category:"death",year:"2502",name:"พันตรี สันต์ ศรแมน"},{category:"death",year:"2502",name:"นายสิริ ปกาสิต"},{category:"death",year:"2502",name:"พลจัตวา อัครเดช ยงยุทธ"},{category:"resigned",year:"2502",name:"นายสัญญา ธรรมศักดิ์"},{category:"resigned",year:"2539",name:"นายทองใบ ทองเปาด์"},{category:"resigned",year:"2539",name:"ศาสตราจารย์อุกฤษ มงคลนาวิน"},{category:"resigned",year:"2550",name:"นายวรากรณ์ สามโกเศศ"}];function kf(e){let t,n;return t=new Ru({props:{title:"สสร. ไม่ครบวาระ",membersData:e[1],categoriesLabel:e[0]}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p:S,i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Gf(e){var t=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const n=new Map([["death","เสียชีวิตระหว่างเป็นสมาชิกของสภาร่างรัฐธรรมนูญ"],["resigned","ลาออกระหว่างเป็นสมาชิกของสภาร่างรัฐธรรมนูญ"]]),r=new Map(["death","resigned"].map(((e,t)=>[e,zc[t]]))),i=Uf.filter((({category:e})=>"death"===e)).length;return[n,Uf.map(((e,n)=>{var{year:a,category:s}=e,o=t(e,["year","category"]);return Object.assign({index:n,number:("death"===s?n:n-i)+1,years:[a],color:r.get(s),description:"death"===s?`เสียชีวิตระหว่างเป็นสมาชิกของสภาร่างรัฐธรรมนูญ พ.ศ. ${a}`:`ลาออกระหว่างเป็นสมาชิกของสภาร่างรัฐธรรมนูญ พ.ศ. ${a}`,image:`images/people/05_no${n+1}_${a}.png`,category:s,group:n+1},o)}))]}class Vf extends e{constructor(e){super(),t(this,e,Gf,kf,n,{})}}var Wf=[{category:"same_year",group:"1",year:"2502",name:"พันเอก พงษ์ เภกะนันทน์"},{category:"same_year",group:"1",year:"2502",name:"นายพันตำรวจเอก พจน์ เภกะนันทน์"},{category:"same_year",group:"2",year:"2502",name:"พลโท บัญญัติ เทพหัสดิน ณ อยุธยา"},{category:"same_year",group:"2",year:"2502",name:"พันเอก ยศ เทพหัสดิน ณ อยุธยา"},{category:"same_year",group:"3",year:"2502",name:"นายสงวน จันทรสาขา"},{category:"same_year",group:"3",year:"2502",name:"นายสุรจิตต์ จันทรสาขา"},{category:"same_year",group:"4",year:"2539",name:"ศาสตราจารย์คณิต ณ นคร"},{category:"same_year",group:"4",year:"2539",name:"นายวรพจน์ ณ นคร"},{category:"same_year",group:"5",year:"2539",name:"นายประเทือง คำประกอบ"},{category:"same_year",group:"5",year:"2539",name:"นายสวัสดิ์ คำประกอบ"},{category:"different_year",group:"6",year:"2491",name:"หม่อมราชวงศ์เสนีย์ ปราโมช"},{category:"different_year",group:"6",year:"2502",name:"หม่อมราชวงศ์คึกฤทธิ์ ปราโมช"},{category:"different_year",group:"7",year:"2491",name:"นายทองม้วน อัตถากร "},{category:"different_year",group:"7",year:"2502",name:"นายบุญชนะ อัตถากร"},{category:"different_year",group:"8",year:"2502",name:"ว่าที่นาวาอากาศตรี สุพจน์ เทพกาญจนา"},{category:"different_year",group:"8",year:"2539",name:"นายพงศ์เทพ เทพกาญจนา"},{category:"different_year",group:"9",year:"2502",name:"พลโท สนิท สนิทยุทธการ ไทยานนท์"},{category:"different_year",group:"9",year:"2539",name:"ร้อยตรี อำนวย ไทยานนท์"}];function jf(e){let t,n;return t=new Ru({props:{title:"สสร. กับนามสกุล",membersData:e[1],categoriesLabel:e[0]}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p:S,i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function qf(e){var t=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const n=new Map([["same_year","นามสกุลเดียวกัน ในสภาร่างรัฐธรรมนูญชุดเดียวกัน"],["different_year","นามสกุลเดียวกัน ในสภาร่างรัฐธรรมนูญชุดต่างกัน"]]),r=Wf.filter((({category:e})=>"same_year"===e)).length;return[n,Wf.map(((e,n)=>{var{year:i,category:a,group:s}=e,o=t(e,["year","category","group"]);return Object.assign({index:n,number:("same_year"===a?n:n-r)+1,years:[i],color:zc[+s-1],description:`สภาร่างรัฐธรรมนูญ พ.ศ. ${i}`,image:`images/people/06_no${n+1}_${i}.png`,category:a,group:s},o)}))]}class Xf extends e{constructor(e){super(),t(this,e,qf,jf,n,{})}}var Yf=[{year:"2491",name:"หม่อมราชวงศ์เสนีย์ ปราโมช",description:"อดีตนายกรัฐมนตรี และผู้ร่วมก่อตั้งขบวนการเสรีไทย"},{year:"2491",name:"นายหยุด แสงอุทัย",description:"ปรมาจารย์แห่งวงการกฎหมายของประเทศไทย"},{year:"2491",name:"พลโท พระยาเทพหัสดิน",description:"หัวหน้าคณะทูตทหารไทยที่เข้าร่วมรบในสงครามโลกครั้งที่ 1"},{year:"2502",name:"หม่อมราชวงศ์คึกฤทธิ์ ปราโมช",description:"อดีตนายกรัฐมนตรี และศิลปินแห่งชาติสาขาวรรณศิลป์"},{year:"2502",name:"นายทวี บุณยเกตุ",description:"อดีตนายกรัฐมนตรี สมาชิกคณะราษฎรสายพลเรือน และสมาชิกขบวนการเสรีไทย"},{year:"2502",name:"พันเอก เปรม ติณสูลานนท์ (ยศขณะนั้น)",description:"รัฐบุรุษ อดีตผู้สำเร็จราชการแทนพระองค์ อดีตประธานองคมนตรี อดีตนายกรัฐมนตรี และอดีตผู้บัญชาการทหารบก"},{year:"2502",name:"นายป๋วย อึ้งภากรณ์",description:"อดีตผู้ว่าการธนาคารแห่งประเทศไทย และอดีตอธิการบดีมหาวิทยาลัยธรรมศาสตร์"},{year:"2502",name:"นายสัญญา ธรรมศักดิ์ ",description:"อดีตประธานองคมนตรี อดีตนายกรัฐมนตรี อดีตประธานศาลฎีกา และอดีตอธิการบดีมหาวิทยาลัยธรรมศาสตร์"},{year:"2502",name:"พลเรือตรี ถวัลย์ ธำรงนาวาสวัสดิ์",description:"อดีต​นายกรัฐมนตรี และสมาชิกคณะราษฎรสายทหาร"},{year:"2539",name:"ศาสตราจารย์บวรศักดิ์ อุวรรณโณ",description:"ประธานกรรมการคณะกรรมการปฏิรูปประเทศด้านกฎหมาย อดีตประธานคณะกรรมาธิการยกร่างรัฐธรรมนูญ พ.ศ. 2558 อดีตสมาชิกสภานิติบัญญัติแห่งชาติ พ.ศ. 2549 และอดีตเลขาธิการคณะรัฐมนตรี"},{year:"2539",name:"นายพงศ์เทพ เทพกาญจนา",description:"อดีตรองนายกรัฐมนตรีสมัยรัฐบาลนางสาวยิ่งลักษณ์ ชินวัตร"},{year:"2539",name:"ศาสตราจารย์ลิขิต ธีรเวคิน",description:"ราชบัณฑิตสาขาวิชารัฐศาสตร์และรัฐประศาสนศาสตร์ สำนักธรรมศาสตร์และการเมือง ราชบัณฑิตยสภา และอดีตรัฐมนตรีช่วยว่าการกระทรวงมหาดไทยสมัยรัฐบาลพลเอกชวลิต ยงใจยุทธ"},{year:"2539",name:"นายอานันท์ ปันยารชุน",description:"อดีต​นายกรัฐมนตรี อดีตเอกอัครราชทูตไทยประจำสหประชาชาติ ประเทศแคนาดา สหรัฐอเมริกา และเยอรมนี และอดีตปลัดกระทรวงการต่างประเทศ "},{year:"2539",name:"นายอุทัย พิมพ์ใจชน",description:"อดีตประธานรัฐสภา และอดีตประธานสภาผู้แทนราษฎร"},{year:"2550",name:"นายจรัญ ภักดีธนากุล",description:"อดีตตุลาการศาลรัฐธรรมนูญ อดีตเลขาธิการประธานศาลฎีกา และอดีตปลัดกระทรวงยุติธรรม"},{year:"2550",name:"นายนครินทร์ เมฆไตรรัตน์",description:"ตุลาการศาลรัฐธรรมนูญ "},{year:"2550",name:"นายนุรักษ์ มาประณีต",description:"องคมนตรี และอดีตประธานศาลรัฐธรรมนูญ"},{year:"2550",name:"นายสมคิด เลิศไพฑูรย์",description:"อดีตสมาชิกสภานิติบัญญัติแห่งชาติ พ.ศ. 2557 และอดีตอธิการบดีมหาวิทยาลัยธรรมศาสตร์"},{year:"2550",name:"นางอังคณา นีละไพจิตร",description:"นักเคลื่อนไหวเพื่อสิทธิมนุษยชน และอดีตกรรมการสิทธิมนุษยชนแห่งชาติ"}];function Zf(e){let t,n;return t=new Ru({props:{title:"สสร. คนดัง",membersData:e[1],categoriesLabel:e[0]}}),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,r){F(t,e,r),n=!0},p:S,i(e){n||(o(t.$$.fragment,e),n=!0)},o(e){l(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function Jf(e){var t=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const n=new Map([["2491","พ.ศ. 2491"],["2502","พ.ศ. 2502"],["2539","พ.ศ. 2539"],["2550","พ.ศ. 2550"]]),r=new Map(["2491","2502","2539","2550"].map(((e,t)=>[e,zc[t]]))),i=new Map(Dc.map((e=>[e,Yf.findIndex((t=>t.year===e))])));return[n,Yf.map(((e,n)=>{var{year:a}=e,s=t(e,["year"]);return Object.assign({index:n,number:n-i.get(a)+1,years:[a],color:r.get(a),description:`สภาร่างรัฐธรรมนูญ พ.ศ. ${a}`,image:`images/people/07_no${n+1}_${a}.png`,category:a,group:n+1},s)}))]}class Qf extends e{constructor(e){super(),t(this,e,Jf,Zf,n,{})}}function Kf(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function em(e){let t,n,r,i,a,s,o,l,c,h=e[7]+"",u=Nc[e[7]]+"";return{c(){t=p("div"),n=p("p"),r=f("พ.ศ. "),i=f(h),a=T(),s=p("p"),o=f(u),l=f(" คน"),c=T(),this.h()},l(e){t=m(e,"DIV",{class:!0,style:!0});var d=g(t);n=m(d,"P",{class:!0});var p=g(n);r=y(p,"พ.ศ. "),i=y(p,h),p.forEach(v),a=L(d),s=m(d,"P",{class:!0});var f=g(s);o=y(f,u),l=y(f," คน"),f.forEach(v),c=L(d),d.forEach(v),this.h()},h(){x(n,"class","md:hidden"),x(s,"class","text-h5"),x(t,"class","absolute font-semibold left-0 right-0 text-center"),_(t,"top",e[3][e[9]]+"%"),_(t,"opacity","0")},m(e,h){b(e,t,h),w(t,n),w(n,r),w(n,i),w(t,a),w(t,s),w(s,o),w(s,l),w(t,c)},p:S,d(e){e&&v(t)}}}function tm(e){let t,n,r,i,a;n=new vh({props:{data:e[1],transitionConfig:e[2]}}),n.$on("transitionstart",e[4]);let s=Dc,c=[];for(let t=0;t<s.length;t+=1)c[t]=em(Kf(e,s,t));return{c(){t=p("div"),B(n.$$.fragment),r=T(),i=p("div");for(let e=0;e<c.length;e+=1)c[e].c();this.h()},l(e){t=m(e,"DIV",{class:!0});var a=g(t);H(n.$$.fragment,a),r=L(a),i=m(a,"DIV",{});var s=g(i);for(let e=0;e<c.length;e+=1)c[e].l(s);s.forEach(v),a.forEach(v),this.h()},h(){x(t,"class","relative")},m(s,o){b(s,t,o),F(n,t,null),w(t,r),w(t,i);for(let e=0;e<c.length;e+=1)c[e].m(i,null);e[5](i),a=!0},p(e,[t]){if(8&t){let n;for(s=Dc,n=0;n<s.length;n+=1){const r=Kf(e,s,n);c[n]?c[n].p(r,t):(c[n]=em(r),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=s.length}},i(e){a||(o(n.$$.fragment,e),a=!0)},o(e){l(n.$$.fragment,e),a=!1},d(r){r&&v(t),k(n),P(c,r),e[5](null)}}}function nm(e,t,n){const r=Dc.map((e=>new Array(Nc[e]).fill({}))),i=2850;let a;return[a,r,{delay:i,duration:i},[24,64,72,93],()=>{Pc({targets:a.childNodes,opacity:[{value:0},{value:1,delay:(e,t)=>500+t*i},{value:0,delay:1500}],easing:"linear",duration:900})},function(e){R[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class rm extends e{constructor(e){super(),t(this,e,nm,tm,n,{})}}function im(e){let t,n,c,h;const u=e[2].default,d=r(u,e,e[1],null);return{c(){t=p("div"),n=p("div"),d&&d.c(),this.h()},l(e){t=m(e,"DIV",{class:!0});var r=g(t);n=m(r,"DIV",{class:!0});var i=g(n);d&&d.l(i),i.forEach(v),r.forEach(v),this.h()},h(){x(n,"class","bg-white rounded-sm p-4 md:p-8 border border-black space-y-4 text-body1"),x(t,"class",c="frame m-auto p-6 text-h6 text-center w-full max-w-lg rounded-sm "+(e[0].class||"")+" svelte-11u9da1")},m(e,r){b(e,t,r),w(t,n),d&&d.m(n,null),h=!0},p(e,[n]){d&&d.p&&(!h||2&n)&&i(d,u,e,e[1],h?s(u,e[1],n,null):a(e[1]),null),(!h||1&n&&c!==(c="frame m-auto p-6 text-h6 text-center w-full max-w-lg rounded-sm "+(e[0].class||"")+" svelte-11u9da1"))&&x(t,"class",c)},i(e){h||(o(d,e),h=!0)},o(e){l(d,e),h=!1},d(e){e&&v(t),d&&d.d(e)}}}function am(e,t,n){let{$$slots:r={},$$scope:i}=t;return e.$$set=e=>{n(0,t=N(N({},t),$(e))),"$$scope"in e&&n(1,i=e.$$scope)},[t=$(t),i,r]}class sm extends e{constructor(e){super(),t(this,e,am,im,n,{})}}function om(e,t,n){const r=e.slice();return r[1]=t[n],r}function lm(e){let t,n,r,i=e[1]+"";return{c(){t=p("br"),n=f("สภาร่างรัฐธรรมนูญ พ.ศ. "),r=f(i)},l(e){t=m(e,"BR",{}),n=y(e,"สภาร่างรัฐธรรมนูญ พ.ศ. "),r=y(e,i)},m(e,i){b(e,t,i),b(e,n,i),b(e,r,i)},p:S,d(e){e&&v(t),e&&v(n),e&&v(r)}}}function cm(e){let t,n,r,i,a,s,o,l,c,h,u,d,x,_,M=Dc,S=[];for(let t=0;t<M.length;t+=1)S[t]=lm(om(e,M,t));return{c(){t=p("p"),n=f("นับตั้งแต่การเปลี่ยนแปลงการปกครองจากระบอบสมบูรณาญาสิทธิราชย์เป็นระบอบประชาธิปไตยอันมีพระมหากษัตริย์ทรงเป็นพระประมุข"),r=T(),i=p("p"),a=f("ประเทศไทยได้มีสภาร่างรัฐธรรมนูญเกิดขึ้นเพื่อมาร่างรัฐธรรมนูญแล้วจำนวนทั้งสิ้น\n        4 ชุด"),s=T(),o=p("p"),l=f("............"),c=T(),h=p("p"),u=f("ได้แก่\n        ");for(let e=0;e<S.length;e+=1)S[e].c();d=T(),x=p("p"),_=f("โดยสมาชิกสภาร่างรัฐธรรมนูญแต่ละชุดก็มีเรื่องราวที่น่าสนใจแตกต่างกันออกไป")},l(e){t=m(e,"P",{});var p=g(t);n=y(p,"นับตั้งแต่การเปลี่ยนแปลงการปกครองจากระบอบสมบูรณาญาสิทธิราชย์เป็นระบอบประชาธิปไตยอันมีพระมหากษัตริย์ทรงเป็นพระประมุข"),p.forEach(v),r=L(e),i=m(e,"P",{});var f=g(i);a=y(f,"ประเทศไทยได้มีสภาร่างรัฐธรรมนูญเกิดขึ้นเพื่อมาร่างรัฐธรรมนูญแล้วจำนวนทั้งสิ้น\n        4 ชุด"),f.forEach(v),s=L(e),o=m(e,"P",{});var b=g(o);l=y(b,"............"),b.forEach(v),c=L(e),h=m(e,"P",{});var w=g(h);u=y(w,"ได้แก่\n        ");for(let e=0;e<S.length;e+=1)S[e].l(w);w.forEach(v),d=L(e),x=m(e,"P",{});var M=g(x);_=y(M,"โดยสมาชิกสภาร่างรัฐธรรมนูญแต่ละชุดก็มีเรื่องราวที่น่าสนใจแตกต่างกันออกไป"),M.forEach(v)},m(e,p){b(e,t,p),w(t,n),b(e,r,p),b(e,i,p),w(i,a),b(e,s,p),b(e,o,p),w(o,l),b(e,c,p),b(e,h,p),w(h,u);for(let e=0;e<S.length;e+=1)S[e].m(h,null);b(e,d,p),b(e,x,p),w(x,_)},p(e,t){if(0&t){let n;for(M=Dc,n=0;n<M.length;n+=1){const r=om(e,M,n);S[n]?S[n].p(r,t):(S[n]=lm(r),S[n].c(),S[n].m(h,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}},d(e){e&&v(t),e&&v(r),e&&v(i),e&&v(s),e&&v(o),e&&v(c),e&&v(h),P(S,e),e&&v(d),e&&v(x)}}}function hm(e){let t,n,r,i,a,s,c,h,u,d,_,M,S,E,A,P,R,C,I,N,$,O;return I=new sm({props:{class:"transform translate-y-24",$$slots:{default:[cm]},$$scope:{ctx:e}}}),{c(){t=p("section"),n=p("div"),r=p("div"),i=p("h1"),a=f("ทำความรู้จักสมาชิก"),s=p("br"),c=f("\n        สภาร่างรัฐธรรมนูญ (สสร.) "),h=p("br"),u=f("\n        แต่ละชุด"),d=p("br"),_=f("\n        ในประวัติศาสตร์"),M=p("br"),S=f("การเมืองไทย"),E=T(),A=p("button"),P=f("เริ่มอ่านเนื้อหา"),R=T(),C=p("div"),B(I.$$.fragment),this.h()},l(e){t=m(e,"SECTION",{class:!0});var o=g(t);n=m(o,"DIV",{class:!0});var l=g(n);r=m(l,"DIV",{class:!0});var p=g(r);i=m(p,"H1",{class:!0});var f=g(i);a=y(f,"ทำความรู้จักสมาชิก"),s=m(f,"BR",{}),c=y(f,"\n        สภาร่างรัฐธรรมนูญ (สสร.) "),h=m(f,"BR",{class:!0}),u=y(f,"\n        แต่ละชุด"),d=m(f,"BR",{class:!0}),_=y(f,"\n        ในประวัติศาสตร์"),M=m(f,"BR",{class:!0}),S=y(f,"การเมืองไทย"),f.forEach(v),E=L(p),A=m(p,"BUTTON",{class:!0});var x=g(A);P=y(x,"เริ่มอ่านเนื้อหา"),x.forEach(v),p.forEach(v),l.forEach(v),R=L(o),C=m(o,"DIV",{class:!0});var b=g(C);H(I.$$.fragment,b),b.forEach(v),o.forEach(v),this.h()},h(){x(h,"class","md:hidden"),x(d,"class","hidden md:inline"),x(M,"class","md:hidden"),x(i,"class","font-heading text-h4 md:text-h1 font-bold text-center mt-44 md:mt-52 mx-auto p-2 bg-white"),x(A,"class","bg-black rounded-lg focus:ring ring-gold focus:outline-none py-2 px-4 md:py-4 md:px-6 text-white md:text-h6 font-bold mx-auto mt-16 md:mt-36"),x(r,"class","flex flex-col h-screen"),x(n,"class","landing-intro svelte-12kw4qq"),x(C,"class","landing-detail flex mb-24 svelte-12kw4qq"),x(t,"class","mb-48")},m(o,l){b(o,t,l),w(t,n),w(n,r),w(r,i),w(i,a),w(i,s),w(i,c),w(i,h),w(i,u),w(i,d),w(i,_),w(i,M),w(i,S),w(r,E),w(r,A),w(A,P),w(t,R),w(t,C),F(I,C,null),N=!0,$||(O=D(A,"click",e[0]),$=!0)},p(e,[t]){const n={};16&t&&(n.$$scope={dirty:t,ctx:e}),I.$set(n)},i(e){N||(o(I.$$.fragment,e),N=!0)},o(e){l(I.$$.fragment,e),N=!1},d(e){e&&v(t),k(I),$=!1,O()}}}function um(e){return[()=>{window.scroll({top:1.2*window.innerHeight,behavior:"smooth"})}]}class dm extends e{constructor(e){super(),t(this,e,um,hm,n,{})}}function pm(e){let t,n,r,i,a;return{c(){t=p("p"),n=f("รายละเอียดน่าสนใจเกี่ยวกับสมาชิกสภาร่างรัฐธรรมนูญทั้ง 4\n      ชุดในประวัติศาสตร์การเมืองไทย แสดงเห็นให้ว่า"),r=T(),i=p("p"),a=f('"การทำให้สภาร่างรัฐธรรมนูญเป็นกลไกทางประชาธิปไตยที่สามารถให้ประชาชนเข้าไปมีส่วนร่วมได้เต็มที่และทั่วถึง\n      เพื่อทำให้เกิดการร่างรัฐธรรมนูญที่คงทนถาวรและเป็นของประชาชนอย่างแท้จริง\n      ยังคงเป็นโจทย์ใหญ่ที่สังคมไทยต้องร่วมกันขบคิดต่อไป"')},l(e){t=m(e,"P",{});var s=g(t);n=y(s,"รายละเอียดน่าสนใจเกี่ยวกับสมาชิกสภาร่างรัฐธรรมนูญทั้ง 4\n      ชุดในประวัติศาสตร์การเมืองไทย แสดงเห็นให้ว่า"),s.forEach(v),r=L(e),i=m(e,"P",{});var o=g(i);a=y(o,'"การทำให้สภาร่างรัฐธรรมนูญเป็นกลไกทางประชาธิปไตยที่สามารถให้ประชาชนเข้าไปมีส่วนร่วมได้เต็มที่และทั่วถึง\n      เพื่อทำให้เกิดการร่างรัฐธรรมนูญที่คงทนถาวรและเป็นของประชาชนอย่างแท้จริง\n      ยังคงเป็นโจทย์ใหญ่ที่สังคมไทยต้องร่วมกันขบคิดต่อไป"'),o.forEach(v)},m(e,s){b(e,t,s),w(t,n),b(e,r,s),b(e,i,s),w(i,a)},d(e){e&&v(t),e&&v(r),e&&v(i)}}}function fm(e){let t,n,r;return n=new sm({props:{class:"transform -translate-y-1/3",$$slots:{default:[pm]},$$scope:{ctx:e}}}),{c(){t=p("div"),B(n.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var r=g(t);H(n.$$.fragment,r),r.forEach(v),this.h()},h(){x(t,"class","landing-detail flex px-1 -mx-3 md:-mx-8 svelte-11y223c")},m(e,i){b(e,t,i),F(n,t,null),r=!0},p(e,[t]){const r={};1&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(o(n.$$.fragment,e),r=!0)},o(e){l(n.$$.fragment,e),r=!1},d(e){e&&v(t),k(n)}}}class mm extends e{constructor(e){super(),t(this,e,null,fm,n,{})}}function gm(e){let t;return{c(){t=f("ที่มาของ สสร.")},l(e){t=y(e,"ที่มาของ สสร.")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function ym(e){let t;return{c(){t=f("ที่มาของสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) 4 ชุด ของประเทศไทย\n        มาจากการเลือกตั้งโดยรัฐสภา 2 ชุด และการแต่งตั้งโดยพระมหากษัตริย์ 2 ชุด\n        ซึ่งยังไม่เคยมีสมาชิกสภาร่างรัฐธรรมนูญชุดใดที่มาจากการเลือกตั้งโดยตรงของประชาชน")},l(e){t=y(e,"ที่มาของสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) 4 ชุด ของประเทศไทย\n        มาจากการเลือกตั้งโดยรัฐสภา 2 ชุด และการแต่งตั้งโดยพระมหากษัตริย์ 2 ชุด\n        ซึ่งยังไม่เคยมีสมาชิกสภาร่างรัฐธรรมนูญชุดใดที่มาจากการเลือกตั้งโดยตรงของประชาชน")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function vm(e){let t;return{c(){t=f("ความหลากหลายของ สสร.")},l(e){t=y(e,"ความหลากหลายของ สสร.")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function xm(e){let t;return{c(){t=f("โครงสร้างของสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) 4 ชุด ของประเทศไทย\n        มีการแบ่งประเภทสมาชิกอย่างชัดเจน 2 ชุด และไม่มีการแบ่งประเภทสมาชิก 2 ชุด\n        ซึ่งยังไม่เคยมีสภาร่างรัฐธรรมนูญชุดใดที่มีสมาชิกครอบคลุมคนทุกกลุ่มในประเทศไทย")},l(e){t=y(e,"โครงสร้างของสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) 4 ชุด ของประเทศไทย\n        มีการแบ่งประเภทสมาชิกอย่างชัดเจน 2 ชุด และไม่มีการแบ่งประเภทสมาชิก 2 ชุด\n        ซึ่งยังไม่เคยมีสภาร่างรัฐธรรมนูญชุดใดที่มีสมาชิกครอบคลุมคนทุกกลุ่มในประเทศไทย")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function _m(e){let t;return{c(){t=f("เพศสภาพกับ สสร.")},l(e){t=y(e,"เพศสภาพกับ สสร.")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function bm(e){let t;return{c(){t=f("โครงสร้างของสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) 4 ชุด ของประเทศไทย\n        มีสมาชิกที่มีเพศสภาพเป็นชายล้วน 2 ชุด\n        และมีสมาชิกที่มีเพศสภาพเป็นชายและหญิง 2 ชุด\n        แต่สมาชิกที่มีเพศสภาพเป็นหญิงนั้นมีในอัตราส่วนที่น้อยมาก")},l(e){t=y(e,"โครงสร้างของสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) 4 ชุด ของประเทศไทย\n        มีสมาชิกที่มีเพศสภาพเป็นชายล้วน 2 ชุด\n        และมีสมาชิกที่มีเพศสภาพเป็นชายและหญิง 2 ชุด\n        แต่สมาชิกที่มีเพศสภาพเป็นหญิงนั้นมีในอัตราส่วนที่น้อยมาก")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function wm(e){let t;return{c(){t=f("สสร. มากกว่า 1 ครั้ง")},l(e){t=y(e,"สสร. มากกว่า 1 ครั้ง")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Mm(e){let t;return{c(){t=f("สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคน ได้เป็น สสร. มากกว่า 1 ครั้ง")},l(e){t=y(e,"สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคน ได้เป็น สสร. มากกว่า 1 ครั้ง")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Sm(e){let t;return{c(){t=f("สสร. ไม่ครบวาระ")},l(e){t=y(e,"สสร. ไม่ครบวาระ")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Em(e){let t;return{c(){t=f("สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคน อยู่ไม่ครบวาระด้วยสาเหตุหลัก 2\n        ประการ คือ เสียชีวิต และลาออก")},l(e){t=y(e,"สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคน อยู่ไม่ครบวาระด้วยสาเหตุหลัก 2\n        ประการ คือ เสียชีวิต และลาออก")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Tm(e){let t;return{c(){t=f("สสร. กับนามสกุล")},l(e){t=y(e,"สสร. กับนามสกุล")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Lm(e){let t;return{c(){t=f("สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคน มีนามสกุลเดียวกัน\n        ทั้งที่อยู่ในสภาร่างรัฐธรรมนูญชุดเดียวกันและสภาร่างรัฐธรรมนูญต่างชุดกัน")},l(e){t=y(e,"สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคน มีนามสกุลเดียวกัน\n        ทั้งที่อยู่ในสภาร่างรัฐธรรมนูญชุดเดียวกันและสภาร่างรัฐธรรมนูญต่างชุดกัน")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Am(e){let t;return{c(){t=f("สสร. คนดัง")},l(e){t=y(e,"สสร. คนดัง")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Pm(e){let t;return{c(){t=f("สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคนเป็นที่รู้จักของสังคม\n        เนื่องจากดำรงตำแหน่งสำคัญทางการเมือง หรือมีชื่อเสียงในสังคม")},l(e){t=y(e,"สมาชิกสภาร่างรัฐธรรมนูญ (สสร.) หลายคนเป็นที่รู้จักของสังคม\n        เนื่องจากดำรงตำแหน่งสำคัญทางการเมือง หรือมีชื่อเสียงในสังคม")},m(e,n){b(e,t,n)},d(e){e&&v(t)}}}function Rm(e){let t,n,r,i,a,s,c,h,u,d,_,M,S,E,A,P,R,C,I,D,N,$,O,z,U,G,V,W,j,q,X,Y,Z,J,Q,K,ee,te,ne,re,ie,ae,se,oe,le,ce,he,ue,de,pe,fe,me;return t=new dm({}),M=new rm({}),A=new Bp({props:{number:1,$$slots:{description:[ym],topic:[gm]},$$scope:{ctx:e}}}),R=new yu({}),D=new Bp({props:{number:2,$$slots:{description:[xm],topic:[vm]},$$scope:{ctx:e}}}),$=new bf({}),U=new Bp({props:{number:3,$$slots:{description:[bm],topic:[_m]},$$scope:{ctx:e}}}),V=new Ff({}),q=new Bp({props:{number:4,$$slots:{description:[Mm],topic:[wm]},$$scope:{ctx:e}}}),Y=new Du({}),Q=new Bp({props:{number:5,$$slots:{description:[Em],topic:[Sm]},$$scope:{ctx:e}}}),ee=new Vf({}),re=new Bp({props:{number:6,$$slots:{description:[Lm],topic:[Tm]},$$scope:{ctx:e}}}),ae=new Xf({}),le=new Bp({props:{number:7,$$slots:{description:[Pm],topic:[Am]},$$scope:{ctx:e}}}),he=new Qf({}),de=new Kp({}),fe=new mm({}),{c(){B(t.$$.fragment),n=T(),r=p("div"),i=p("section"),a=p("div"),s=p("p"),c=f("ELECT"),h=T(),u=p("p"),d=f("ขอพาทุกคนทำความรู้จักสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) ทั้ง 4 ชุด\n        ในประเทศไทย ผ่านการนำเสนอด้วย 10 หัวข้อที่น่าสนใจเกี่ยวกับ สสร. แต่ละชุด"),_=T(),B(M.$$.fragment),S=T(),E=p("section"),B(A.$$.fragment),P=T(),B(R.$$.fragment),C=T(),I=p("section"),B(D.$$.fragment),N=T(),B($.$$.fragment),O=T(),z=p("section"),B(U.$$.fragment),G=T(),B(V.$$.fragment),W=T(),j=p("section"),B(q.$$.fragment),X=T(),B(Y.$$.fragment),Z=T(),J=p("section"),B(Q.$$.fragment),K=T(),B(ee.$$.fragment),te=T(),ne=p("section"),B(re.$$.fragment),ie=T(),B(ae.$$.fragment),se=T(),oe=p("section"),B(le.$$.fragment),ce=T(),B(he.$$.fragment),ue=T(),B(de.$$.fragment),pe=T(),B(fe.$$.fragment),this.h()},l(e){H(t.$$.fragment,e),n=L(e),r=m(e,"DIV",{class:!0});var o=g(r);i=m(o,"SECTION",{class:!0});var l=g(i);a=m(l,"DIV",{class:!0});var p=g(a);s=m(p,"P",{class:!0});var f=g(s);c=y(f,"ELECT"),f.forEach(v),h=L(p),u=m(p,"P",{class:!0});var x=g(u);d=y(x,"ขอพาทุกคนทำความรู้จักสมาชิกสภาร่างรัฐธรรมนูญ (สสร.) ทั้ง 4 ชุด\n        ในประเทศไทย ผ่านการนำเสนอด้วย 10 หัวข้อที่น่าสนใจเกี่ยวกับ สสร. แต่ละชุด"),x.forEach(v),p.forEach(v),_=L(l),H(M.$$.fragment,l),l.forEach(v),S=L(o),E=m(o,"SECTION",{});var b=g(E);H(A.$$.fragment,b),P=L(b),H(R.$$.fragment,b),b.forEach(v),C=L(o),I=m(o,"SECTION",{});var w=g(I);H(D.$$.fragment,w),N=L(w),H($.$$.fragment,w),w.forEach(v),O=L(o),z=m(o,"SECTION",{});var T=g(z);H(U.$$.fragment,T),G=L(T),H(V.$$.fragment,T),T.forEach(v),W=L(o),j=m(o,"SECTION",{});var B=g(j);H(q.$$.fragment,B),X=L(B),H(Y.$$.fragment,B),B.forEach(v),Z=L(o),J=m(o,"SECTION",{});var F=g(J);H(Q.$$.fragment,F),K=L(F),H(ee.$$.fragment,F),F.forEach(v),te=L(o),ne=m(o,"SECTION",{});var k=g(ne);H(re.$$.fragment,k),ie=L(k),H(ae.$$.fragment,k),k.forEach(v),se=L(o),oe=m(o,"SECTION",{});var me=g(oe);H(le.$$.fragment,me),ce=L(me),H(he.$$.fragment,me),me.forEach(v),ue=L(o),H(de.$$.fragment,o),pe=L(o),H(fe.$$.fragment,o),o.forEach(v),this.h()},h(){x(s,"class","text-h4 font-heading font-bold"),x(u,"class","text-h6 leading-normal"),x(a,"class","text-center w-full max-w-screen-lg m-auto space-y-2"),x(i,"class","space-y-8 px-3 md:px-8 text-center"),x(r,"class","space-y-screen-h-1/2 px-3 md:px-8")},m(e,o){F(t,e,o),b(e,n,o),b(e,r,o),w(r,i),w(i,a),w(a,s),w(s,c),w(a,h),w(a,u),w(u,d),w(i,_),F(M,i,null),w(r,S),w(r,E),F(A,E,null),w(E,P),F(R,E,null),w(r,C),w(r,I),F(D,I,null),w(I,N),F($,I,null),w(r,O),w(r,z),F(U,z,null),w(z,G),F(V,z,null),w(r,W),w(r,j),F(q,j,null),w(j,X),F(Y,j,null),w(r,Z),w(r,J),F(Q,J,null),w(J,K),F(ee,J,null),w(r,te),w(r,ne),F(re,ne,null),w(ne,ie),F(ae,ne,null),w(r,se),w(r,oe),F(le,oe,null),w(oe,ce),F(he,oe,null),w(r,ue),F(de,r,null),w(r,pe),F(fe,r,null),me=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),A.$set(n);const r={};1&t&&(r.$$scope={dirty:t,ctx:e}),D.$set(r);const i={};1&t&&(i.$$scope={dirty:t,ctx:e}),U.$set(i);const a={};1&t&&(a.$$scope={dirty:t,ctx:e}),q.$set(a);const s={};1&t&&(s.$$scope={dirty:t,ctx:e}),Q.$set(s);const o={};1&t&&(o.$$scope={dirty:t,ctx:e}),re.$set(o);const l={};1&t&&(l.$$scope={dirty:t,ctx:e}),le.$set(l)},i(e){me||(o(t.$$.fragment,e),o(M.$$.fragment,e),o(A.$$.fragment,e),o(R.$$.fragment,e),o(D.$$.fragment,e),o($.$$.fragment,e),o(U.$$.fragment,e),o(V.$$.fragment,e),o(q.$$.fragment,e),o(Y.$$.fragment,e),o(Q.$$.fragment,e),o(ee.$$.fragment,e),o(re.$$.fragment,e),o(ae.$$.fragment,e),o(le.$$.fragment,e),o(he.$$.fragment,e),o(de.$$.fragment,e),o(fe.$$.fragment,e),me=!0)},o(e){l(t.$$.fragment,e),l(M.$$.fragment,e),l(A.$$.fragment,e),l(R.$$.fragment,e),l(D.$$.fragment,e),l($.$$.fragment,e),l(U.$$.fragment,e),l(V.$$.fragment,e),l(q.$$.fragment,e),l(Y.$$.fragment,e),l(Q.$$.fragment,e),l(ee.$$.fragment,e),l(re.$$.fragment,e),l(ae.$$.fragment,e),l(le.$$.fragment,e),l(he.$$.fragment,e),l(de.$$.fragment,e),l(fe.$$.fragment,e),me=!1},d(e){k(t,e),e&&v(n),e&&v(r),k(M),k(A),k(R),k(D),k($),k(U),k(V),k(q),k(Y),k(Q),k(ee),k(re),k(ae),k(le),k(he),k(de),k(fe)}}}class Cm extends e{constructor(e){super(),t(this,e,null,Rm,n,{})}}export{Cm as default};
